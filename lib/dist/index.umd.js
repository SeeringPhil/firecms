(function(b,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("@emotion/react/jsx-runtime"),require("@mui/x-date-pickers/AdapterDateFns"),require("@mui/x-date-pickers/LocalizationProvider"),require("@date-io/date-fns"),require("date-fns/locale"),require("react"),require("@mui/material"),require("react-router-dom"),require("notistack"),require("@mui/icons-material/Error"),require("@mui/material/styles"),require("@mui/material/Tooltip"),require("@mui/icons-material"),require("react-fast-compare"),require("@mui/icons-material/Close"),require("object-hash"),require("@mui/icons-material/Adjust"),require("@mui/icons-material/Functions"),require("@mui/icons-material/Crop75"),require("@mui/icons-material/ShortText"),require("@mui/icons-material/Subject"),require("@mui/icons-material/AddLink"),require("@mui/icons-material/List"),require("@mui/icons-material/Schedule"),require("@mui/icons-material/UploadFile"),require("@mui/icons-material/DriveFolderUpload"),require("@mui/icons-material/Repeat"),require("@mui/icons-material/ViewStream"),require("@mui/icons-material/ListAlt"),require("@mui/icons-material/Link"),require("@mui/icons-material/Http"),require("@mui/icons-material/Flag"),require("@mui/icons-material/Numbers"),require("@mui/icons-material/FormatListNumbered"),require("@mui/icons-material/FormatQuote"),require("@mui/icons-material/Email"),require("@mui/icons-material/BallotOutlined"),require("@mui/icons-material/Clear"),require("formik"),require("@mui/icons-material/Add"),require("@mui/icons-material/Remove"),require("@mui/icons-material/DragHandle"),require("@hello-pangea/dnd"),require("@mui/icons-material/InfoOutlined"),require("react-dropzone"),require("date-fns/format"),require("@mui/icons-material/DescriptionOutlined"),require("@mui/icons-material/OpenInNew"),require("@mui/icons-material/ContentCopy"),require("markdown-it"),require("@mui/icons-material/KeyboardTab"),require("@mui/x-date-pickers/DatePicker"),require("@mui/x-date-pickers/DateTimePicker"),require("firebase/auth"),require("firebase/firestore"),require("firebase/storage"),require("@mui/icons-material/ExpandMore"),require("react-markdown-editor-lite"),require("@mui/icons-material/ArrowBack"),require("@mui/icons-material/PersonOutline"),require("firebase/app"),require("yup"),require("@mui/icons-material/ArrowForward"),require("@mui/icons-material/Assignment"),require("react-window"),require("react-use-measure"),require("@mui/icons-material/ArrowUpward"),require("@mui/icons-material/ArrowDownward"),require("@mui/icons-material/ArrowDropDownCircle"),require("@mui/material/Tooltip/Tooltip"),require("@mui/lab"),require("@mui/material/Select"),require("@mui/material/InputBase"),require("@mui/material/MenuItem"),require("@mui/material/colors"),require("@mui/icons-material/CalendarToday"),require("@emotion/react"),require("@mui/icons-material/GetApp"),require("@mui/icons-material/Menu"),require("@mui/material/IconButton"),require("@mui/icons-material/ChevronLeft"),require("@mui/icons-material/ChevronRight"),require("@mui/icons-material/LightModeOutlined"),require("@mui/icons-material/DarkModeOutlined"),require("@mui/icons-material/NavigateNext"),require("clsx"),require("react-image-file-resizer"),require("@mui/material/Button"),require("@mui/material/Dialog"),require("@mui/material/DialogContent"),require("@mui/material/DialogContentText"),require("@mui/material/DialogTitle"),require("@mui/icons-material/Edit"),require("@mui/system"),require("@mui/icons-material/ErrorOutline"),require("@mui/icons-material/RemoveCircle"),require("@mui/icons-material/Search"),require("@mui/icons-material/FilterListOff")):typeof define=="function"&&define.amd?define(["exports","@emotion/react/jsx-runtime","@mui/x-date-pickers/AdapterDateFns","@mui/x-date-pickers/LocalizationProvider","@date-io/date-fns","date-fns/locale","react","@mui/material","react-router-dom","notistack","@mui/icons-material/Error","@mui/material/styles","@mui/material/Tooltip","@mui/icons-material","react-fast-compare","@mui/icons-material/Close","object-hash","@mui/icons-material/Adjust","@mui/icons-material/Functions","@mui/icons-material/Crop75","@mui/icons-material/ShortText","@mui/icons-material/Subject","@mui/icons-material/AddLink","@mui/icons-material/List","@mui/icons-material/Schedule","@mui/icons-material/UploadFile","@mui/icons-material/DriveFolderUpload","@mui/icons-material/Repeat","@mui/icons-material/ViewStream","@mui/icons-material/ListAlt","@mui/icons-material/Link","@mui/icons-material/Http","@mui/icons-material/Flag","@mui/icons-material/Numbers","@mui/icons-material/FormatListNumbered","@mui/icons-material/FormatQuote","@mui/icons-material/Email","@mui/icons-material/BallotOutlined","@mui/icons-material/Clear","formik","@mui/icons-material/Add","@mui/icons-material/Remove","@mui/icons-material/DragHandle","@hello-pangea/dnd","@mui/icons-material/InfoOutlined","react-dropzone","date-fns/format","@mui/icons-material/DescriptionOutlined","@mui/icons-material/OpenInNew","@mui/icons-material/ContentCopy","markdown-it","@mui/icons-material/KeyboardTab","@mui/x-date-pickers/DatePicker","@mui/x-date-pickers/DateTimePicker","firebase/auth","firebase/firestore","firebase/storage","@mui/icons-material/ExpandMore","react-markdown-editor-lite","@mui/icons-material/ArrowBack","@mui/icons-material/PersonOutline","firebase/app","yup","@mui/icons-material/ArrowForward","@mui/icons-material/Assignment","react-window","react-use-measure","@mui/icons-material/ArrowUpward","@mui/icons-material/ArrowDownward","@mui/icons-material/ArrowDropDownCircle","@mui/material/Tooltip/Tooltip","@mui/lab","@mui/material/Select","@mui/material/InputBase","@mui/material/MenuItem","@mui/material/colors","@mui/icons-material/CalendarToday","@emotion/react","@mui/icons-material/GetApp","@mui/icons-material/Menu","@mui/material/IconButton","@mui/icons-material/ChevronLeft","@mui/icons-material/ChevronRight","@mui/icons-material/LightModeOutlined","@mui/icons-material/DarkModeOutlined","@mui/icons-material/NavigateNext","clsx","react-image-file-resizer","@mui/material/Button","@mui/material/Dialog","@mui/material/DialogContent","@mui/material/DialogContentText","@mui/material/DialogTitle","@mui/icons-material/Edit","@mui/system","@mui/icons-material/ErrorOutline","@mui/icons-material/RemoveCircle","@mui/icons-material/Search","@mui/icons-material/FilterListOff"],o):(b=typeof globalThis<"u"?globalThis:b||self,o(b.FireCMS={},b.jsxRuntime,b.AdapterDateFns,b.LocalizationProvider,b.DateFnsUtils,b.locales,b.React,b.material,b.reactRouterDom,b.notistack,b.ErrorIcon,b.styles,b.Tooltip,b.mui,b.equal,b.CloseIcon,b.hash,b.AdjustIcon,b.FunctionsIcon,b.Crop75Icon,b.ShortTextIcon,b.SubjectIcon,b.AddLinkIcon,b.ListIcon,b.ScheduleIcon,b.UploadFileIcon,b.DriveFolderUploadIcon,b.RepeatIcon,b.ViewStreamIcon,b.ListAltIcon,b.LinkIcon,b.HttpIcon,b.FlagIcon,b.NumbersIcon,b.FormatListNumberedIcon,b.FormatQuoteIcon,b.EmailIcon,b.BallotOutlinedIcon,b.ClearIcon,b.formik,b.AddIcon,b.RemoveIcon,b.DragHandleIcon,b.dnd,b.InfoIcon,b.reactDropzone,b.format,b.DescriptionOutlinedIcon,b.OpenInNewIcon,b.ContentCopyIcon,b.MarkdownIt,b.KeyboardTabIcon,b.DatePicker,b.DateTimePicker,b.auth,b.firestore,b.storage,b.ExpandMoreIcon,b.MdEditor,b.ArrowBackIcon,b.PersonOutlineIcon,b.app,b.yup,b.ArrowForwardIcon,b.AssignmentIcon,b.reactWindow,b.useMeasure,b.ArrowUpwardIcon,b.ArrowDownwardIcon,b.ArrowDropDownCircleIcon,b.Tooltip$1,b.lab,b.Select,b.InputBase,b.MenuItem,b.colors,b.CalendarTodayIcon,b.react,b.GetAppIcon,b.MenuIcon,b.IconButton,b.ChevronLeftIcon,b.ChevronRightIcon,b.LightModeOutlinedIcon,b.DarkModeOutlinedIcon,b.NavigateNextIcon,b.clsx,b.Resizer,b.Button,b.Dialog,b.DialogContent,b.DialogContentText,b.DialogTitle,b.EditIcon,b.system,b.ErrorOutlineIcon,b.RemoveCircleIcon,b.SearchIcon,b.FilterListOffIcon))})(this,function(b,o,ds,As,us,fs,d,a,de,Pt,Ar,ue,Qt,ve,re,gs,Lt,hs,ps,bs,ys,ws,vs,Cs,Bs,xs,Es,Gt,ms,ks,Ss,Is,Fs,Ts,$t,Ds,Ot,Ms,Me,Ce,Ps,Yt,Qs,Re,Ls,Vt,Gs,$s,po,Os,Wt,ur,fr,gr,Z,J,eo,Ys,bo,hr,Vs,Ws,zs,Us,Ns,Hs,zt,Ut,js,_s,Nt,Js,qs,Ht,Zs,Io,Xs,Ks,Rs,el,jt,ol,rl,tl,nl,il,sl,ll,_t,al,cl,Jt,dl,Al,qt,ul,fl,gl,hl){"use strict";function Fo(e){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,i.get?i:{enumerable:!0,get:()=>e[t]})}}return r.default=e,Object.freeze(r)}const Zt=Fo(fs),To=Fo(d),Xt=Fo(ve),Be=Fo(zs),pl={breadcrumbs:[],set:e=>{}},Kt=d.createContext(pl),bl=({children:e})=>{const[r,t]=d.useState([]),i=s=>{t(s.breadcrumbs)};return o.jsx(Kt.Provider,{value:{breadcrumbs:r,set:i},children:e})},yl={mode:"light",setMode:e=>{},toggleMode:()=>{}},pr=d.createContext(yl),Rt=pr.Provider;function ge(e){return en(on(e))}function en(e){return e.startsWith("/")?e.slice(1):e}function on(e){return e.endsWith("/")?e.slice(0,-1):e}function wl(e){return e.startsWith("/")?e:`/${e}`}function vl(e){const r=ge(e);if(r.includes("/")){const t=r.split("/");return t[t.length-1]}return r}function br(e,r){const t=ge(e),i=t.split("/");if(i.length%2===0)throw Error(`Collection paths must have an odd number of segments: ${e}`);const s=r.find(l=>l.alias===i[0]);let n;if(s&&(n=s.path),i.length>1){const l=Do(n??i[0],r);if(!l?.subcollections)return t;const c=t.split("/").slice(2).join("/");return(n??i[0])+"/"+i[1]+"/"+br(c,l.subcollections)}else return n??t}function Do(e,r){const t=ge(e).split("/");if(t.length%2===0)throw Error(`Collection paths must have an odd number of segments: ${e}`);const i=yr(t);let s;for(let n=0;n<i.length;n++){const l=i[n],c=r&&r.sort((A,u)=>(A.alias??"").localeCompare(u.alias??"")).find(A=>A.alias===l||A.path===l);if(c){if(l===e)s=c;else if(c.subcollections){const A=e.replace(l,"").split("/").slice(2).join("/");A.length>0&&(s=Do(A,c.subcollections))}}if(s)break}return s}function yr(e){const r=e.length>0&&e.length%2===0?e.splice(0,e.length-1):e,t=r.length,i=[];for(let s=t;s>0;s=s-2)i.push(r.slice(0,s).join("/"));return i}function wr(e){const{path:r,collections:t=[],currentFullPath:i}=e,s=ge(r).split("/"),n=yr(s),l=[];for(let c=0;c<n.length;c++){const A=n[c],u=t&&t.find(f=>f.alias===A||f.path===A);if(u){const f=u.alias??u.path,g=i&&i.length>0?i+"/"+f:f;l.push({type:"collection",path:g,collection:u});const y=ge(ge(r).replace(A,"")),w=y.length>0?y.split("/"):[];if(w.length>0){const h=w[0],p=g+"/"+h;if(l.push({type:"entity",entityId:h,path:g,parentCollection:u}),w.length>1){const v=w.slice(1).join("/");if(!u)throw Error("collection not found resolving path: "+u);const B=u.views,C=B&&B.find(E=>E.path===v);if(C){const E=i&&i.length>0?i+"/"+C.path:C.path;l.push({type:"custom_view",path:E,view:C})}else u.subcollections&&l.push(...wr({path:v,customViews:B,collections:u.subcollections,currentFullPath:p}))}}break}}return l}const oo="100vw",Mo="53vw",Po="600px",rn=d.createContext({}),Ee=()=>d.useContext(rn),tn=d.createContext({}),he=()=>d.useContext(tn),nn=d.createContext({}),Ue=()=>d.useContext(nn),sn=d.createContext({}),Qo=()=>d.useContext(sn),ln=d.createContext({}),Oe=()=>d.useContext(ln),an=d.createContext({}),ro=()=>d.useContext(an),Pe=()=>{const{enqueueSnackbar:e,closeSnackbar:r}=Pt.useSnackbar();return{open:d.useCallback(i=>{const{type:s,message:n}=i;e(n,{variant:s})},[]),close:r}},cn=d.createContext(void 0),dn=()=>d.useContext(cn),vr=d.createContext({sideDialogsController:{},sideEntityController:{},navigation:{},dataSource:{},storageSource:{},authController:{},snackbarController:{},fields:{}}),R=()=>{const e=d.useContext(vr),r=Ue(),t=Qo(),i=Oe(),s=he(),n=Ee(),l=ro(),c=Pe(),A=dn();return{...e,authController:r,sideDialogsController:t,sideEntityController:i,navigation:s,dataSource:n,storageSource:l,snackbarController:c,userConfigPersistence:A}};function An({path:e,collection:r,filterValues:t,sortBy:i,itemCount:s,searchString:n}){const l=Ee(),A=he().resolveAliasesFrom(e),u=i?i[0]:void 0,f=i?i[1]:void 0,g=R(),[y,w]=d.useState([]),[h,p]=d.useState(!1),[v,B]=d.useState(),[C,E]=d.useState(!1);return d.useEffect(()=>{p(!0);const x=async S=>{if(r.callbacks?.onFetch)try{S=await Promise.all(S.map(m=>r.callbacks.onFetch({collection:r,path:A,entity:m,context:g})))}catch(m){console.error(m)}p(!1),B(void 0),w(S),E(!s||S.length<s)},k=S=>{console.error("ERROR",S),p(!1),w([]),B(S)};return l.listenCollection?l.listenCollection({path:A,collection:r,onUpdate:x,onError:k,searchString:n,filter:t,limit:s,startAfter:void 0,orderBy:u,order:f}):(l.fetchCollection({path:A,collection:r,searchString:n,filter:t,limit:s,startAfter:void 0,orderBy:u,order:f}).then(x).catch(k),()=>{})},[A,s,f,u,t,n]),{data:y,dataLoading:h,dataLoadingError:v,noMoreToLoad:C}}const Cr={};function Lo({path:e,entityId:r,collection:t,useCache:i=!1}){const s=Ee(),l=he().resolveAliasesFrom(e),c=R(),[A,u]=d.useState(),[f,g]=d.useState(!0),[y,w]=d.useState();return d.useEffect(()=>{g(!0);const h=async v=>{if(t.callbacks?.onFetch&&v)try{v=await t.callbacks.onFetch({collection:t,path:l,entity:v,context:c})}catch(B){console.error(B)}Cr[`${l}/${r}`]=v,u(v),g(!1),w(void 0)},p=v=>{console.error("ERROR fetching entity",v),g(!1),u(void 0),w(v)};return r&&i&&Cr[`${l}/${r}`]?(u(Cr[`${l}/${r}`]),g(!1),w(void 0),()=>{}):r&&l&&t?s.listenEntity?s.listenEntity({path:l,entityId:r,collection:t,onUpdate:h,onError:p}):(s.fetchEntity({path:l,entityId:r,collection:t}).then(h).catch(p),()=>{}):(h(void 0),()=>{})},[r,l]),{entity:A,dataLoading:f,dataLoadingError:y}}async function Br({collection:e,path:r,entityId:t,values:i,previousValues:s,status:n,dataSource:l,context:c,onSaveSuccess:A,onSaveFailure:u,onPreSaveHookError:f,onSaveSuccessHookError:g}){let y;const w=c.navigation.resolveAliasesFrom(r),h=e.callbacks;if(h?.onPreSave)try{const p=pe({collection:e,path:r,values:s,entityId:t,fields:c.fields});y=await h.onPreSave({collection:p,path:r,resolvedPath:w,entityId:t,values:i,previousValues:s,status:n,context:c})}catch(p){console.error(p),f&&f(p);return}else y=i;return l.saveEntity({collection:e,path:w,entityId:t,values:y,previousValues:s,status:n}).then(p=>{try{if(h?.onSaveSuccess){const v=pe({collection:e,path:r,values:y,entityId:t,fields:c.fields});h.onSaveSuccess({collection:v,path:r,resolvedPath:w,entityId:p.id,values:y,previousValues:s,status:n,context:c})}}catch(v){g&&g(v)}A&&A(p)}).catch(p=>{if(h?.onSaveFailure){const v=pe({collection:e,path:r,values:y,entityId:t,fields:c.fields});h.onSaveFailure({collection:v,path:r,resolvedPath:w,entityId:t,values:y,previousValues:s,status:n,context:c})}u&&u(p)})}async function un({dataSource:e,entity:r,collection:t,callbacks:i,onDeleteSuccess:s,onDeleteFailure:n,onPreDeleteHookError:l,onDeleteSuccessHookError:c,context:A}){console.debug("Deleting entity",r.path,r.id);const u={entity:r,collection:t,entityId:r.id,path:r.path,context:A};if(i?.onPreDelete)try{await i.onPreDelete(u)}catch(f){return console.error(f),l&&l(r,f),!1}return e.deleteEntity({entity:r}).then(()=>{s&&s(r);try{return i?.onDelete&&i.onDelete(u),!0}catch(f){return c&&c(r,f),!1}}).catch(f=>(n&&n(r,f),!1))}function xe({property:e,value:r,setValue:t}){const i=d.useRef(null);d.useEffect(()=>{typeof e.disabled=="object"&&Boolean(e.disabled.clearOnDisabled)?r!=null&&(i.current=r,t(null)):i.current&&(t(i.current),i.current=null)},[e])}function fn({path:e,context:r}){const t=r.dataSource,i=r.navigation;if(!i)throw Error("Calling getNavigationFrom, but main navigation has not yet been initialised");const n=wr({path:e,collections:i.collections??[]}).map(l=>{if(l.type==="collection")return Promise.resolve(l);if(l.type==="entity"){const c=i.getCollection(l.path,l.entityId);if(!c)throw Error(`No collection defined in the navigation for the entity with path ${l.path}`);return t.fetchEntity({path:l.path,entityId:l.entityId,collection:c}).then(A=>{if(A)return{...l,entity:A}})}else{if(l.type==="custom_view")return Promise.resolve(l);throw Error("Unmapped element in useEntitiesFromPath")}}).filter(l=>Boolean(l));return Promise.all(n)}function Cl({path:e}){const r=R(),[t,i]=d.useState(),[s,n]=d.useState(!1),[l,c]=d.useState();return d.useEffect(()=>{r.navigation&&(n(!0),c(void 0),fn({path:e,context:r}).then(u=>{i(u)}).catch(u=>c(u)).finally(()=>n(!1)))},[e,r]),r.navigation?{data:t,dataLoading:s,dataLoadingError:l}:{dataLoading:!0}}const Go=()=>d.useContext(pr),gn=e=>{const{onSuccess:r,onError:t,disableClipboardAPI:i=!1,copiedDuration:s}=e||{},n=d.useRef(null),[l,c]=d.useState(!1),[A,u]=d.useState("");d.useEffect(()=>{s&&setTimeout(()=>c(!1),s)},[l]);const f=()=>navigator.clipboard!==void 0,g=d.useCallback(C=>{if(t)t(C);else throw new Error(C)},[t]),y=d.useCallback(C=>{r&&r(C),c(!0),u(C)},[r]),w=d.useCallback(C=>{navigator.clipboard.writeText(C).then(()=>y(C)).catch(E=>{g(E),c(!1)})},[g,y]),h=()=>{f()&&navigator.clipboard.writeText("")},p=C=>B("copy",typeof C=="object"?void 0:C),v=()=>B("cut"),B=d.useCallback((C="copy",E)=>{const x=n.current,k=x&&(x.tagName==="INPUT"||x.tagName==="TEXTAREA"),S=n.current;f()&&!i&&(E?w(E):x?k?(w(S.value),C==="cut"&&(S.value="")):w(x.innerText):g("Both the ref & text were undefined"))},[i,w,g]);return{ref:n,isCoppied:l,clipboard:A,clearClipboard:h,isSupported:f,copy:p,cut:v}},$o=()=>d.useContext(Kt);function Oo(e){const r=he(),t=Qo(),i=d.useCallback(()=>{if(e.path){let n=e.collection;if(n||(n=r.getCollection(e.path)),!n)throw Error("Not able to resolve the collection in useReferenceDialog");t.open({key:`reference_${e.path}`,component:o.jsx(Pi,{...e,collection:n}),width:"90vw"})}else throw Error("useReferenceDialog: You are trying to open a reference dialog, but have not declared the `path`")},[r,e,t]),s=d.useCallback(()=>{t.close()},[t]);return{open:i,close:s}}const Bl=`data:image/png;base64,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
`;function hn(e,r){d.useEffect(()=>{if(document){document.title=`${e} - FireCMS`;let t=document.querySelector("link[rel~='icon']");t||(t=document.createElement("link"),t.rel="icon",document.getElementsByTagName("head")[0].appendChild(t)),t.href=r??Bl}},[e,r])}const pn=ue.styled(({className:e,...r})=>o.jsx(a.Tooltip,{...r,classes:{popper:e}}))(({theme:e})=>({[`& .${Qt.tooltipClasses.tooltip}`]:{margin:"0 8px",backgroundColor:e.palette.error.light},[`& .${Qt.tooltipClasses.arrow}`]:{color:e.palette.error.light}}));function fe({title:e,error:r,tooltip:t}){const i=r instanceof Error?r.message:r,s=o.jsxs(a.Box,{sx:{display:"flex",alignItems:"center",margin:1},children:[o.jsx(Ar,{fontSize:"small",color:"error"}),o.jsxs(a.Box,{sx:{paddingLeft:2},children:[e&&o.jsx(a.Typography,{variant:"body2",sx:{fontWeight:"500"},children:e}),o.jsx(a.Typography,{variant:"body2",children:i})]})]});return t?o.jsx(pn,{title:t,children:s}):s}class Ye{id;path;constructor(r,t){this.id=r,this.path=t}get pathWithId(){return`${this.path}/${this.id}`}}class yo{latitude;longitude;constructor(r,t){this.latitude=r,this.longitude=t}}function be(e){const r=R();let t;const{property:i,propertyKey:s,value:n,size:l,height:c,width:A,entity:u}=e,f=ke({propertyOrBuilder:i,propertyValue:n,fields:r.fields});if(n===void 0||f===null)t=o.jsx(no,{});else if(f.Preview)t=d.createElement(f.Preview,{propertyKey:s,value:n,property:f,size:l,height:c,width:A,entity:u,customProps:f.customProps});else if(n===null)t=o.jsx(no,{});else if(f.dataType==="string"){const g=f;typeof n=="string"?g.url?typeof g.url=="boolean"?t=o.jsx(No,{size:e.size,url:n}):typeof g.url=="string"&&(t=o.jsx(No,{size:e.size,url:n,previewType:g.url})):g.storage?t=o.jsx(Fn,{storeUrl:f.storage?.storeUrl??!1,size:e.size,storagePathOrDownloadUrl:n}):g.markdown?t=o.jsx(Ho,{source:n}):t=o.jsx(kr,{...e,property:g,value:n}):t=Ne(s,f.dataType,n)}else if(f.dataType==="array")if(n instanceof Array){const g=f;if(!g.of&&!g.oneOf)throw Error(`You need to specify an 'of' or 'oneOf' prop (or specify a custom field) in your array property ${s}`);g.of?Array.isArray(g.of)?t=o.jsx(Fr,{...e,value:n,property:f}):g.of.dataType==="map"?t=o.jsx(vn,{propertyKey:s,property:f,value:n,entity:u,size:l}):g.of.dataType==="reference"?typeof g.of.path=="string"?t=o.jsx(En,{...e,value:n,property:f}):t=o.jsx(no,{}):g.of.dataType==="string"?g.of.enumValues?t=o.jsx(Ir,{...e,value:n,property:f}):g.of.storage?t=o.jsx(xn,{...e,value:n,property:f}):t=o.jsx(wn,{...e,value:n,property:f}):g.of.dataType==="number"&&g.of.enumValues?t=o.jsx(Ir,{...e,value:n,property:f}):t=o.jsx(Fr,{...e,value:n,property:f}):g.oneOf&&(t=o.jsx(kn,{...e,value:n,property:f}))}else t=Ne(s,f.dataType,n);else f.dataType==="map"?typeof n=="object"?t=o.jsx(mn,{...e,property:f}):t=Ne(s,f.dataType,n):f.dataType==="date"?n instanceof Date?t=o.jsx(Sn,{date:n}):t=Ne(s,f.dataType,n):f.dataType==="reference"?typeof f.path=="string"?n instanceof Ye?t=o.jsx(io,{disabled:!f.path,previewProperties:f.previewProperties,size:e.size,onClick:e.onClick,reference:n}):t=Ne(s,f.dataType,n):t=o.jsx(no,{}):f.dataType==="boolean"?typeof n=="boolean"?t=o.jsx(Mn,{value:n}):t=Ne(s,f.dataType,n):f.dataType==="number"?typeof n=="number"?t=o.jsx(Cn,{...e,value:n,property:f}):t=Ne(s,f.dataType,n):t=JSON.stringify(n);return t??o.jsx(no,{})}function Ne(e,r,t){return console.error(`Unexpected value for property ${e}, of type ${r}`,t),o.jsx(fe,{title:"Unexpected value",error:`${JSON.stringify(t)}`})}function bn(e){let r=0,t,i;for(t=0;t<e.length;t++)i=e.charCodeAt(t),r=(r<<5)-r+i,r|=0;return Math.abs(r)}const xr={blueLighter:{color:"#cfdfff",text:"#102046"},cyanLighter:{color:"#d0f0fd",text:"#04283f"},tealLighter:{color:"#c2f5e9",text:"#012524"},greenLighter:{color:"#d1f7c4",text:"#0b1d05"},yellowLighter:{color:"#ffeab6",text:"#3b2501"},orangeLighter:{color:"#fee2d5",text:"#6b2613"},redLighter:{color:"#ffdce5",text:"#4c0c1c"},pinkLighter:{color:"#ffdaf6",text:"#400832"},purpleLighter:{color:"#ede2fe",text:"#280b42"},grayLighter:{color:"#eee",text:"#040404"},blueLight:{color:"#9cc7ff",text:"#102046"},cyanLight:{color:"#77d1f3",text:"#04283f"},tealLight:{color:"#72ddc3",text:"#012524"},greenLight:{color:"#93e088",text:"#0b1d05"},yellowLight:{color:"#ffd66e",text:"#3b2501"},orangeLight:{color:"#ffa981",text:"#6b2613"},redLight:{color:"#ff9eb7",text:"#4c0c1c"},pinkLight:{color:"#f99de2",text:"#400832"},purpleLight:{color:"#cdb0ff",text:"#280b42"},grayLight:{color:"#ccc",text:"#040404"},blueDark:{color:"#2d7ff9",text:"#fff"},cyanDark:{color:"#18bfff",text:"#fff"},tealDark:{color:"#20d9d2",text:"#fff"},greenDark:{color:"#20c933",text:"#fff"},yellowDark:{color:"#fcb400",text:"#fff"},orangeDark:{color:"#ff6f2c",text:"#fff"},redDark:{color:"#f82b60",text:"#fff"},pinkDark:{color:"#ff08c2",text:"#fff"},purpleDark:{color:"#8b46ff",text:"#fff"},grayDark:{color:"#666",text:"#fff"},blueDarker:{color:"#2750ae",text:"#cfdfff"},cyanDarker:{color:"#0b76b7",text:"#d0f0fd"},tealDarker:{color:"#06a09b",text:"#c2f5e9"},greenDarker:{color:"#338a17",text:"#d1f7c4"},yellowDarker:{color:"#b87503",text:"#ffeab6"},orangeDarker:{color:"#d74d26",text:"#fee2d5"},redDarker:{color:"#ba1e45",text:"#ffdce5"},pinkDarker:{color:"#b2158b",text:"#ffdaf6"},purpleDarker:{color:"#6b1cb0",text:"#ede2fe"},grayDarker:{color:"#444",text:"#eee"}};function Er(e){const r=bn(e),t=Object.keys(xr),i=r%t.length;return xr[t[i]]}function Yo(e){return Array.isArray(e)?e:Object.entries(e).map(([r,t])=>typeof t=="string"?{id:r,label:t}:{...t,id:r})}function yn(e,r){if(r)return e.find(t=>t.id===r)}function xl(e,r){const t=yn(e,r);if(!t?.color)return Er(r.toString());if(typeof t=="object"&&"color"in t){if(typeof t.color=="string")return xr[t.color];if(typeof t.color=="object")return t.color}}function Vo(e){return typeof e=="object"&&e.disabled}function El(e){if(e!==void 0)return typeof e=="object"?e.label:e}function me({enumValues:e,enumKey:r,small:t}){if(!e)return null;const i=Yo(e),s=r!==void 0?yn(i,r):void 0,n=El(s),l=xl(i,r);return o.jsx(mr,{colorScheme:l,label:n!==void 0?n:r,error:!n,outlined:!1,small:t})}function mr({label:e,colorScheme:r,error:t,outlined:i,small:s}){const n=a.useTheme(),l=r??Er(e);return o.jsx(a.Chip,{sx:{maxWidth:"100%",backgroundColor:t||!l?"#eee":l.color,color:t||!l?"red":l.text,fontWeight:n.typography.fontWeightRegular},size:s?"small":"medium",variant:i?"outlined":"filled",label:e})}function kr({propertyKey:e,value:r,property:t,size:i}){if(t.enumValues){const s=r,n=Rr(t);return o.jsx(me,{enumKey:s,enumValues:n.enumValues,small:i!=="regular"})}else if(t.previewAsTag){const s=Er(e??"");return o.jsx(oe,{children:o.jsx(mr,{colorScheme:s,label:r,small:i!=="regular"})})}else return r&&r.includes(`
`)?o.jsx("div",{children:r.split(`
`).map((s,n)=>o.jsx("div",{children:s},`string_preview_${n}`))}):o.jsx(o.Fragment,{children:r})}const Sr="ArrayOfStringsPreview",wo={array:`${Sr}-array`,arrayWrap:`${Sr}-arrayWrap`,arrayItem:`${Sr}-arrayItem`},ml=ue.styled("div")(({theme:e})=>({[`& .${wo.array}`]:{display:"flex",flexDirection:"column"},[`& .${wo.arrayWrap}`]:{display:"flex",flexWrap:"wrap"},[`& .${wo.arrayItem}`]:{margin:e.spacing(.5)}}));function wn({propertyKey:e,value:r,property:t,entity:i,size:s}){const n=R(),l=Ve({property:t,propertyValue:r,fields:n.fields});if(Array.isArray(l.of))throw Error("Using array properties instead of single one in `of` in ArrayProperty");if(!l.of||l.dataType!=="array"||l.of.dataType!=="string")throw Error("Picked wrong preview component ArrayOfStringsPreview");if(r&&!Array.isArray(r))return o.jsx(ml,{children:`Unexpected value: ${r}`});const c=l.of;return o.jsx("div",{className:wo.array,children:r&&r.map((A,u)=>o.jsx("div",{className:wo.arrayItem,children:o.jsx(oe,{children:o.jsx(kr,{propertyKey:e,property:c,value:A,entity:i,size:s})})},`preview_array_strings_${e}_${u}`))})}function Wo({name:e,value:r,enumValues:t,size:i}){return o.jsx(a.Box,{sx:s=>({display:"flex",flexWrap:"wrap",gap:s.spacing(.5)}),children:r&&r.map((s,n)=>o.jsx(oe,{children:o.jsx(me,{enumKey:s,enumValues:t,small:i!=="regular"})},`preview_array_ref_${e}_${n}`))})}function Ir({propertyKey:e,value:r,property:t,size:i}){if(t.dataType!=="array")throw Error("Picked wrong preview component ArrayEnumPreview");const s=t.of;if(!s.enumValues)throw Error("Picked wrong preview component ArrayEnumPreview");return r?o.jsx(Wo,{name:e,value:r,enumValues:s.enumValues,size:i}):null}function vn({propertyKey:e,value:r,property:t,size:i,entity:s}){const n=R(),l=Ve({property:t,propertyValue:r,fields:n.fields});if(Array.isArray(l?.of))throw Error("Using array properties instead of single one in `of` in ArrayProperty");if(l?.dataType!=="array"||!l.of||l.of.dataType!=="map")throw Error("Picked wrong preview component ArrayOfMapsPreview");const c=l.of,A=c.properties;if(!A)throw Error(`You need to specify a 'properties' prop (or specify a custom field) in your map property ${e}`);const u=r,f=c.previewProperties;if(!u)return null;let g=f;return(!g||!g.length)&&(g=Object.keys(A),i&&(g=g.slice(0,3))),o.jsx(a.Table,{size:"small",children:o.jsx(a.TableBody,{children:u&&u.map((y,w)=>o.jsx(a.TableRow,{sx:{"&:last-child th, &:last-child td":{borderBottom:0}},children:g&&g.map(h=>o.jsx(a.TableCell,{component:"th",children:o.jsx(oe,{children:o.jsx(be,{propertyKey:h,value:y[h],property:A[h],entity:s,size:"small"})})},`table-cell-${h}`))},`table_${y}_${w}`))})})}function Cn({value:e,property:r,size:t}){if(r.enumValues){const i=e,s=Eo(r.enumValues);return s?o.jsx(me,{enumKey:i,enumValues:s,small:t!=="regular"}):o.jsx(o.Fragment,{children:e})}else return o.jsx(o.Fragment,{children:e})}const Bn="ArrayOfStorageComponentsPreview",zo={arrayWrap:`${Bn}-arrayWrap`,arrayItem:`${Bn}-arrayItem`},kl=ue.styled("div")(({theme:e})=>({[`&.${zo.arrayWrap}`]:{display:"flex",flexWrap:"wrap"},[`& .${zo.arrayItem}`]:{margin:e.spacing(.5)}}));function xn({propertyKey:e,entity:r,value:t,property:i,size:s}){const n=R(),l=Ve({property:i,propertyValue:t,fields:n.fields});if(Array.isArray(l.of))throw Error("Using array properties instead of single one in `of` in ArrayProperty");if(l.dataType!=="array"||!l.of||l.of.dataType!=="string")throw Error("Picked wrong preview component ArrayOfStorageComponentsPreview");const c=s==="regular"?"small":"tiny";return o.jsx(kl,{className:zo.arrayWrap,children:t&&t.map((A,u)=>o.jsx("div",{className:zo.arrayItem,children:o.jsx(oe,{children:o.jsx(be,{propertyKey:e,value:A,entity:r,property:l.of,size:c})})},`preview_array_storage_${e}_${u}`))})}function En({propertyKey:e,value:r,property:t,size:i}){const s=R(),n=Ve({property:t,propertyValue:r,fields:s.fields});if(Array.isArray(n?.of))throw Error("Using array properties instead of single one in `of` in ArrayProperty");if(n?.dataType!=="array"||!n.of||n.of.dataType!=="reference")throw Error("Picked wrong preview component ArrayOfReferencesPreview");const l=i==="regular"?"small":"tiny";return o.jsx(a.Box,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:r&&r.map((c,A)=>{const u=n.of;return o.jsx(a.Box,{sx:{marginTop:.25,marginBottom:.25,width:"100%"},children:o.jsx(io,{disabled:!u.path,previewProperties:u.previewProperties,size:l,reference:c})},`preview_array_ref_${e}_${A}`)})})}function mn({propertyKey:e,value:r,property:t,entity:i,size:s}){if(t.dataType!=="map")throw Error("Picked wrong preview component MapPropertyPreview");const n=t;if(!n.properties)throw Error(`You need to specify a 'properties' prop (or specify a custom field) in your map property ${e}`);if(!r)return null;let l;return s==="regular"?l=Object.keys(n.properties):(l=n.previewProperties||Object.keys(n.properties),s==="small"?l=l.slice(0,3):s==="tiny"&&(l=l.slice(0,1))),s!=="regular"?o.jsx(a.Box,{sx:c=>({width:"100%",display:"flex",flexDirection:"column","& > *":{[c.breakpoints.down("md")]:{marginBottom:`${c.spacing(.5)} !important`},marginBottom:`${c.spacing(1)} !important`}}),children:l.map((c,A)=>o.jsx("div",{children:o.jsx(oe,{children:o.jsx(be,{propertyKey:c,value:r[c],property:n.properties[c],entity:i,size:s})},"map_preview_"+n.name+c+A)},`map_${c}`))}):o.jsx(a.Table,{size:"small",children:o.jsx(a.TableBody,{children:l&&l.map((c,A)=>o.jsxs(a.TableRow,{sx:{"&:last-child th, &:last-child td":{borderBottom:0}},children:[o.jsx(a.TableCell,{sx:{verticalAlign:"top"},width:"30%",component:"th",children:o.jsx(a.Typography,{variant:"caption",color:"textSecondary",children:n.properties[c].name})},`table-cell-title-${e}-${c}`),o.jsx(a.TableCell,{width:"70%",component:"th",children:o.jsx(oe,{children:o.jsx(be,{propertyKey:c,value:r[c],property:n.properties[c],entity:i,size:"small"})})},`table-cell-${e}-${c}`)]},`map_preview_table_${e}_${A}`))})},`map_preview_${e}`)}function Fr({propertyKey:e,value:r,property:t,entity:i,size:s}){const n=R(),l=Ve({property:t,propertyValue:r,fields:n.fields});if(!l.of)throw Error(`You need to specify an 'of' prop (or specify a custom field) in your array property ${e}`);if(l.dataType!=="array")throw Error("Picked wrong preview component ArrayPreview");const c=r;if(!c)return null;const A=s==="regular"?"small":"tiny";return o.jsx(a.Box,{sx:{display:"flex",flexDirection:"column"},children:c&&c.map((u,f)=>{const g=l.resolvedProperties[f]??l.resolvedProperties[f]??(Array.isArray(l.of)?l.of[f]:l.of);return g?o.jsxs(d.Fragment,{children:[o.jsx(a.Box,{sx:{margin:1},children:o.jsx(oe,{children:o.jsx(be,{propertyKey:e,entity:i,value:u,property:g,size:A})})}),f<c.length-1&&o.jsx(a.Divider,{})]},"preview_array_"+u+"_"+f):null})})}const Uo="type",Tr="value",Dr="ArrayOneOfPreview",vo={array:`${Dr}-array`,arrayWrap:`${Dr}-arrayWrap`,arrayItemBig:`${Dr}-arrayItemBig`},Sl=ue.styled("div")(({theme:e})=>({[`&.${vo.array}`]:{display:"flex",flexDirection:"column"},[`& .${vo.arrayWrap}`]:{display:"flex",flexWrap:"wrap"},[`& .${vo.arrayItemBig}`]:{margin:e.spacing(1)}}));function kn({propertyKey:e,value:r,property:t,size:i,entity:s}){const n=R(),l=Ve({property:t,propertyValue:r,fields:n.fields});if(l?.dataType!=="array")throw Error("Picked wrong preview component ArrayPreview");if(!l?.oneOf)throw Error(`You need to specify an 'of' or 'oneOf' prop (or specify a custom field) in your array property ${e}`);const c=r;if(!c)return null;const A=i==="regular"?"small":"tiny",u=l.oneOf.typeField??Uo,f=l.oneOf.valueField??Tr,g=l.oneOf.properties;return o.jsx(Sl,{className:vo.array,children:c&&c.map((y,w)=>o.jsxs(d.Fragment,{children:[o.jsx("div",{className:vo.arrayItemBig,children:o.jsx(oe,{children:y&&o.jsx(be,{propertyKey:e,value:y[f],entity:s,property:l.resolvedProperties[w]??g[y[u]],size:A})})}),w<c.length-1&&o.jsx(a.Divider,{})]},"preview_array_"+y+"_"+w))})}const Il=40,Fl=100,Tl=200;function to(e){if(e==="tiny")return Il;if(e==="small")return Fl;if(e==="regular")return Tl;throw Error("Thumbnail size not mapped")}function He(e){switch(e){case"xs":case"s":return"tiny";case"m":return"small";case"l":case"xl":return"regular";default:throw Error("Missing mapping value in getPreviewSizeFrom")}}function je({property:e,size:r}){e||console.error("No property assigned for skeleton component",e,r);let t;if(e.dataType==="string"){const i=e;i.url?t=Gl(i,r):i.storage?t=Pr(r):t=Ie()}else if(e.dataType==="array"){const i=e;i.of&&(Array.isArray(i.of)?t=o.jsxs(o.Fragment,{children:[i.of.map((s,n)=>Mr(s,n))," "]}):i.of.dataType==="map"&&i.of.properties?t=Ml(i.of.properties,r,i.of.previewProperties):i.of.dataType==="string"?i.of.enumValues?t=Ql():i.of.storage?t=Mr(i.of):t=Pl():t=Mr(i.of))}else e.dataType==="map"?t=Dl(e,r):e.dataType==="date"?t=Ie():e.dataType==="reference"?t=Ll():(e.dataType,t=Ie());return t||null}function Dl(e,r){if(!e.properties)return o.jsx(o.Fragment,{});let t;return r==="regular"?t=Object.keys(e.properties):(t=e.previewProperties||Object.keys(e.properties),r==="small"?t=t.slice(0,3):r==="tiny"&&(t=t.slice(0,1))),r!=="regular"?o.jsx(a.Box,{sx:i=>({width:"100%",display:"flex",flexDirection:"column","& > *":{[i.breakpoints.down("md")]:{marginBottom:`${i.spacing(.5)} !important`},marginBottom:`${i.spacing(1)} !important`}}),children:t.map((i,s)=>o.jsx("div",{children:e.properties&&e.properties[i]&&o.jsx(je,{property:e.properties[i],size:"small"})},`map_${i}`))}):o.jsx(a.Table,{size:"small",children:o.jsx(a.TableBody,{children:t&&t.map((i,s)=>o.jsxs(a.TableRow,{sx:{"&:last-child th, &:last-child td":{borderBottom:0}},children:[o.jsx(a.TableCell,{sx:{verticalAlign:"top"},width:"30%",component:"th",children:o.jsx(a.Typography,{variant:"caption",color:"textSecondary",children:e.properties[i].name})},`table-cell-title--${i}`),o.jsx(a.TableCell,{width:"70%",component:"th",children:e.properties&&e.properties[i]&&o.jsx(je,{property:e.properties[i],size:"small"})},`table-cell-${i}`)]},`map_preview_table__${s}`))})})}function Ml(e,r,t){let i=t;return(!i||!i.length)&&(i=Object.keys(e),r&&(i=i.slice(0,3))),o.jsx(a.Table,{size:"small",children:o.jsx(a.TableBody,{children:[0,1,2].map((s,n)=>o.jsx(a.TableRow,{children:i&&i.map(l=>o.jsx(a.TableCell,{component:"th",children:o.jsx(je,{property:e[l],size:"small"})},`table-cell-${l}`))},`table_${s}_${n}`))})})}function Pl(){return o.jsx(a.Grid,{children:[0,1].map((e,r)=>Ie(r))})}function Ql(){return o.jsx(a.Grid,{children:[0,1].map((e,r)=>o.jsx(o.Fragment,{children:Ie(r)}))})}function Mr(e,r=0){return o.jsx(a.Grid,{children:[0,1].map((t,i)=>o.jsx(o.Fragment,{children:o.jsx(je,{property:e,size:"small"},`i_${i}`)}))},"array_index")}function Pr(e){const r=e==="tiny"?40:e==="small"?100:200;return o.jsx(a.Skeleton,{variant:"rectangular",sx:t=>({borderRadius:`${t.shape.borderRadius}px`}),width:r,height:r})}function Ll(){return o.jsx(a.Skeleton,{variant:"rectangular",width:200,height:100})}function Gl(e,r="regular"){return typeof e.url=="boolean"?o.jsxs("div",{style:{display:"flex"},children:[Qr(),Ie()]}):$l(r)}function $l(e){return o.jsx(a.Box,{sx:{width:to(e),height:to(e)},children:Qr()})}function Ie(e){return o.jsx(a.Skeleton,{variant:"text"},`skeleton_${e}`)}function Ol(e){return o.jsx(a.Skeleton,{height:20,variant:"text"})}function Qr(){return o.jsx(a.Skeleton,{variant:"rectangular",width:24,height:24})}const Yl=To.memo(function({builder:r}){const[t,i]=d.useState(!0),[s,n]=d.useState(null);return d.useEffect(()=>{let l=!1;return r.then(c=>{l||(i(!1),n(c))}).catch(c=>{i(!1),console.error(c)}),()=>{l=!0}},[r]),t?o.jsx(a.Skeleton,{variant:"text"}):o.jsx(To.Fragment,{children:s})}),Vl="MMMM dd, yyyy, HH:mm:ss";function Sn({date:e}){const r=R(),t=r?.locale?Zt[r?.locale]:void 0,i=r?.dateTimeFormat??Vl,s=e?Gs(e,i,{locale:t}):"";return o.jsx(o.Fragment,{children:s})}function In({size:e,url:r}){const[t,i]=d.useState(!1),s=d.useMemo(()=>to(e),[e]),n=a.useTheme();if(e==="tiny")return o.jsx("img",{src:r,style:{position:"relative",objectFit:"cover",width:s,height:s,borderRadius:n.shape.borderRadius,maxHeight:"100%"}},"tiny_image_preview_"+r);const l={maxWidth:"100%",maxHeight:"100%",borderRadius:n.shape.borderRadius};return o.jsxs(a.Box,{sx:{position:"relative",maxWidth:"100%",maxHeight:"100%",display:"flex",alignItems:"center",justifyContent:"center",width:s,height:s},onMouseEnter:()=>i(!0),onMouseMove:()=>i(!0),onMouseLeave:()=>i(!1),children:[o.jsx("img",{src:r,style:l}),t&&o.jsxs(o.Fragment,{children:[navigator&&o.jsx(a.Tooltip,{title:"Copy url to clipboard",children:o.jsx(a.Box,{sx:{borderRadius:"9999px",position:"absolute",bottom:-4,right:32,backgroundColor:n.palette.background.default},children:o.jsx(a.IconButton,{size:"small",onClick:c=>(c.stopPropagation(),navigator.clipboard.writeText(r)),children:o.jsx(Os,{htmlColor:"#666",fontSize:"small"})})})}),o.jsx(a.Tooltip,{title:"Open image in new tab",children:o.jsx("a",{style:{borderRadius:"9999px",position:"absolute",bottom:-4,right:-4,backgroundColor:n.palette.background.default},href:r,rel:"noopener noreferrer",target:"_blank",children:o.jsx(a.IconButton,{size:"small",onClick:c=>c.stopPropagation(),children:o.jsx(po,{htmlColor:"#666",fontSize:"small"})})})})]})]},"image_preview_"+r)}function No({url:e,previewType:r,size:t,hint:i}){return r?r==="image"?o.jsx(In,{url:e,size:t},`image_preview_${e}_${t}`):r==="audio"?o.jsxs("audio",{controls:!0,src:e,children:["Your browser does not support the",o.jsx("code",{children:"audio"})," element."]},`audio_preview_${e}_${t}`):r==="video"?o.jsx(a.CardMedia,{sx:{maxWidth:t==="small"?300:500},component:"video",controls:!0,image:e},`video_preview_${e}_${t}`):o.jsx("a",{href:e,rel:"noopener noreferrer",target:"_blank",onClick:s=>s.stopPropagation(),children:o.jsxs(a.Box,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:to(t),height:to(t)},children:[o.jsx($s,{sx:{flexGrow:1}}),i&&o.jsx(a.Tooltip,{title:i,children:o.jsx(a.Typography,{sx:{maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",direction:"rtl",textAlign:"left"},variant:"caption",children:i})})]})},`link_preview_${e}_${t}`):o.jsxs(a.Link,{sx:s=>({display:"flex",wordBreak:"break-word",fontWeight:s.typography.fontWeightMedium}),href:e,onMouseDown:s=>{s.preventDefault()},target:"_blank",children:[o.jsx(po,{style:{marginRight:8},fontSize:"small"}),e]})}const Fn=d.memo(Dn,Wl);function Wl(e,r){return e.size===r.size&&e.storagePathOrDownloadUrl===r.storagePathOrDownloadUrl&&e.storeUrl===r.storeUrl}const Tn={};function Dn({storeUrl:e,storagePathOrDownloadUrl:r,size:t}){const i=ro(),[s,n]=d.useState(Tn[r]);if(d.useEffect(()=>{if(!r)return;let A=!1;return i.getDownloadURL(r).then(function(u){A||(n(u),Tn[r]=u)}),()=>{A=!0}},[r]),!r)return null;const l=s?.metadata?zl(s?.metadata.contentType):void 0,c=l?.startsWith("image")?"image":l?.startsWith("video")?"video":l?.startsWith("audio")?"audio":"file";return s?o.jsx(No,{previewType:c,url:s.url,size:t,hint:r}):Pr(t)}function zl(e){return e.startsWith("image")?"image/*":e.startsWith("video")?"video/*":e.startsWith("audio")?"audio/*":e.startsWith("application")?"application/*":e.startsWith("text")?"text/*":e.startsWith("font")?"font/*":e}function Mn({value:e}){return e?o.jsx(ve.CheckBox,{color:"secondary"}):o.jsx(ve.CheckBoxOutlineBlank,{color:"disabled"})}const Ul=new Wt,Ho=d.memo(function({source:r}){const t=d.useMemo(()=>Ul.render(typeof r=="string"?r:""),[r]);return o.jsx("div",{dangerouslySetInnerHTML:{__html:t}})},Nl);function Nl(e,r){return e.source===r.source}function no(){return o.jsx(a.Box,{sx:{borderRadius:"9999px",backgroundColor:"rgba(128,128,128,0.1)",width:"18px",height:"6px",display:"inline-block"}})}const io=To.memo(jl,Hl);function Hl(e,r){return e.disabled===r.disabled&&e.size===r.size&&e.onHover===r.onHover&&e.reference?.id===r.reference?.id&&e.reference?.path===r.reference?.path}function jl({disabled:e,reference:r,previewProperties:t,size:i,onHover:s,onClick:n}){const l=R(),c=he(),A=Oe();if(e)return o.jsx(Pn,{onClick:n,onHover:s,size:i,children:"Disabled"});const u=c.getCollection(r.path);if(!u)throw Error(`Couldn't find the corresponding collection view for the path: ${r.path}`);const{entity:f,dataLoading:g,dataLoadingError:y}=Lo({path:r.path,entityId:r.id,collection:u,useCache:!0}),w=d.useMemo(()=>pe({collection:u,path:r.path,values:f?.values,fields:l.fields}),[u]),h=d.useMemo(()=>at(w,l.fields,t,i==="small"||i==="regular"?3:1),[t,w,i]);let p;function v(B,C){return o.jsx(fe,{error:B,tooltip:C})}return w?(r?r instanceof Ye?f&&!f.values?p=v("Reference does not exist",r.path):p=o.jsxs(o.Fragment,{children:[o.jsxs(a.Box,{sx:{display:"flex",flexDirection:"column",flexGrow:1,maxWidth:"calc(100% - 52px)",margin:1},children:[i!=="tiny"&&(r?o.jsx(a.Box,{sx:{display:i!=="regular"?"block":void 0,whiteSpace:i!=="regular"?"nowrap":void 0,overflow:i!=="regular"?"hidden":void 0,textOverflow:i!=="regular"?"ellipsis":void 0},children:o.jsx(a.Typography,{variant:"caption",className:"mono",children:r.id})}):o.jsx(a.Skeleton,{variant:"text"})),h&&h.map(B=>{const C=w.properties[B];return C?o.jsx(a.Box,{sx:{my:h.length>1?.5:0},children:f?o.jsx(be,{propertyKey:B,value:_e(f.values,B),property:C,entity:f,size:"tiny"}):o.jsx(je,{property:C,size:"tiny"})},"ref_prev_"+B):null})]}),o.jsx(a.Box,{sx:{my:i==="tiny"?.5:1},children:f&&o.jsx(a.Tooltip,{title:`See details for ${f.id}`,children:o.jsx(a.IconButton,{color:"inherit",size:"small",onClick:B=>{B.stopPropagation(),l.onAnalyticsEvent?.("entity_click_from_reference",{path:f.path,entityId:f.id}),A.open({entityId:f.id,path:f.path,collection:w,updateUrl:!0})},children:o.jsx(ur,{fontSize:"small"})})})})]}):(console.error("Reference preview received value of type",typeof r),p=v("Unexpected value",JSON.stringify(r))):p=v("Reference not set"),o.jsx(Pn,{onClick:n,onHover:s,size:i,children:p})):o.jsx(fe,{error:"Could not find collection with id "+w})}function Pn({children:e,onHover:r,size:t,onClick:i}){return o.jsx(a.Typography,{variant:"label",sx:s=>{const n=i?{tabindex:0,backgroundColor:r?s.palette.mode==="dark"?a.lighten(s.palette.background.default,.1):a.darken(s.palette.background.default,.15):a.darken(s.palette.background.default,.1),transition:"background-color 300ms ease, box-shadow 300ms ease",boxShadow:r?"0 0 0 2px rgba(128,128,128,0.05)":void 0,cursor:r?"pointer":void 0}:{};return{width:"100%",display:"flex",backgroundColor:a.darken(s.palette.background.default,.1),borderRadius:`${s.shape.borderRadius}px`,overflow:"hidden",padding:t==="regular"?1:0,itemsAlign:t==="tiny"?"center":void 0,...n}},onClick:s=>{i&&(s.preventDefault(),i())},children:e})}const Qn=(e,...r)=>({...r.reduce((t,i)=>({...t,[i]:e[i]}),{})});function jo(e){return e&&typeof e=="object"&&!Array.isArray(e)}function Fe(e,r){const t=jo(e),i=t?Object.assign({},e):e;return t&&jo(r)&&Object.keys(r).forEach(s=>{jo(r[s])?s in e?i[s]=Fe(e[s],r[s]):Object.assign(i,{[s]:r[s]}):Object.assign(i,{[s]:r[s]})}),i}function _e(e,r){if(typeof e=="object"){if(r in e)return e[r];if(r.includes(".")){const t=r.split(".");return _e(e[t[0]],t.slice(1).join("."))}}}function _l(e,r){let t={...e};const i=r.split("."),s=i.pop();for(const n of i)t=t[n];return s&&delete t[s],t}function Lr(e){return typeof e=="object"?Object.entries(e).filter(([r,t])=>typeof t!="function").map(([r,t])=>Array.isArray(t)?{[r]:t.map(i=>Lr(i))}:typeof t=="object"?{[r]:Lr(t)}:{[r]:t}).reduce((r,t)=>({...r,...t}),{}):e}function Gr(e){if(!e)return null;if(typeof e=="object"){if("id"in e)return e.id;if(e instanceof Date)return e.toLocaleString();if(e instanceof yo)return Lt(e)}return Lt(e,{ignoreUnknown:!0})}function $r(e){if(typeof e=="function")return e;if(Array.isArray(e))return e.map(r=>$r(r));if(typeof e=="object"){const r={};return Object.keys(e).forEach(t=>{if(!Or(e)){const i=$r(e[t]);i!==void 0&&!Or(i)&&(r[t]=i)}}),r}return e}function Or(e){return e&&Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length===0}function so(e){return e.readOnly||e.dataType==="date"&&e.autoValue?!0:e.dataType==="reference"?!e.path:!1}function _o(e){return typeof e.disabled=="object"&&Boolean(e.disabled.hidden)}function Qe(e){return typeof e=="function"}function Co(e){return e?Object.entries(e).map(([r,t])=>{const i=Jl(t);return i===void 0?{}:{[r]:i}}).reduce((r,t)=>({...r,...t}),{}):{}}function Jl(e){if(!Qe(e))if(e.dataType==="map"&&e.properties){const r=Co(e.properties);return Object.keys(r).length===0?void 0:r}else return e.defaultValue}function Ln({inputValues:e,properties:r,status:t,timestampNowValue:i,setDateToMidnight:s}){return Yr(e,r,(n,l)=>{if(l.dataType==="date"){let c;return t==="existing"&&l.autoValue==="on_update"||(t==="new"||t==="copy")&&(l.autoValue==="on_update"||l.autoValue==="on_create")?c=i:c=n,l.mode==="date"&&(c=s(c)),c}else return n})??{}}function Gn(e,r){const t=e;return Object.entries(r).forEach(([i,s])=>{e&&e[i]!==void 0?t[i]=e[i]:s.validation?.required&&(t[i]=null)}),t}function Bo(e){return new Ye(e.id,e.path)}function Yr(e,r,t){const i=Object.entries(r).map(([n,l])=>{const c=e&&e[n],A=Jo(c,l,t);if(A!==void 0)return{[n]:A}}).reduce((n,l)=>({...n,...l}),{}),s={...e,...i};if(Object.keys(s).length!==0)return s}function Jo(e,r,t){let i;if(r.dataType==="map"&&r.properties)i=Yr(e,r.properties,t);else if(r.dataType==="array")if(r.of&&Array.isArray(e))i=e.map(s=>Jo(s,r.of,t));else if(r.oneOf&&Array.isArray(e)){const s=r.oneOf?.typeField??Uo,n=r.oneOf?.valueField??Tr;i=e.map(l=>{if(l===null)return null;if(typeof l!="object")return l;const c=l[s],A=r.oneOf?.properties[c];return!c||!A?l:{[s]:c,[n]:Jo(l[n],A,t)}})}else i=e;else i=t(e,r);return i}function Vr(e,r){const t=e.subcollections?.map(s=>{const n=r.subcollections?.find(l=>l.path===s.path)??r.subcollections?.find(l=>l.alias===s.alias);return n?Vr(s,n):s}),i=Fe(e,r);return{...i,subcollections:t,properties:Wr(i.properties,i.propertiesOrder)}}function ql(e,r){const t=e.map(n=>({...n,editable:!0,deletable:!0})),i=(r??[]).map(n=>{const l=t?.find(c=>c.path===n.path)??t?.find(c=>c.alias===n.alias);return l?{...Vr(n,l),deletable:!1}:{...n,deletable:!1}}),s=t.filter(n=>!i.map(l=>l.path).includes(n.path)||!i.map(l=>l.alias).includes(n.alias));return[...i,...s]}function Wr(e,r){try{const t=Object.keys(e);return(r??t).map(s=>{if(e[s]){const n=e[s];return!Qe(n)&&n?.dataType==="map"&&n.properties?{[s]:{...n,properties:Wr(n.properties,n.propertiesOrder)}}:{[s]:n}}else return}).filter(s=>s!==void 0).reduce((s,n)=>({...s,...n}),{})}catch(t){return console.error("Error sorting properties",t),e}}function zr(e){if(e.defaultAdditionalView)return{path:e.defaultAdditionalView}}const Zl=/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g,Xl=e=>{const r=e.match(Zl);return r?r.map(t=>t.toLowerCase()).join("-"):""},Kl=/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g,Rl=e=>{const r=e.match(Kl);return r?r.map(t=>t.toLowerCase()).join("_"):""};function lo(e=5){return Math.random().toString(36).slice(2,2+e)}function ea(){return Math.floor(Math.random()*16777215).toString(16)}const $n="::";function Ur(e){return On(Le(e))}function On(e){return e.length===1?e[0]:e.reduce((r,t)=>`${r}${$n}${t}`)}function Le(e){return e.split("/").filter((r,t)=>t%2===0)}function oa(e){return e?e.toString():""}function Yn(e){if(!e)return;const r=e.match(/\/(.*?)\/([a-z]*)?$/i);return r?new RegExp(r[1],r[2]||""):new RegExp(e,"")}function ra(e){return e.match(/\/((?![*+?])(?:[^\r\n[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*])+)\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/)?!0:!!e.match(/((?![*+?])(?:[^\r\n[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*])+)/)}function Nr(e,r,t=300){const i=d.useRef(!1),s=d.useCallback(()=>{r(),i.current=!1},[r]);d.useEffect(()=>{i.current=!0;const n=setTimeout(s,t);return()=>{clearTimeout(n),i.current&&s()}},[e])}function qo({name:e,addLabel:r,value:t,disabled:i,buildEntry:s,small:n,onInternalIdAdded:l,includeAddButton:c}){const A=t&&Array.isArray(t)&&t.length>0,u=d.useMemo(()=>A?t.map((w,h)=>w?{[Gr(w)+h]:Hr()}:{}).reduce((w,h)=>({...w,...h}),{}):{},[t,A]),f=d.useRef(u),[g,y]=d.useState(A?Object.values(f.current):[]);return d.useEffect(()=>{if(A&&t&&t.length!==g.length){const w=t.map((h,p)=>{const v=Gr(h)+p;if(v in f.current)return f.current[v];{const B=Hr();return f.current[v]=B,B}});y(w)}},[A,g.length,t]),o.jsx(Ce.FieldArray,{name:e,validateOnChange:!0,render:w=>{const h=()=>{if(i)return;const B=Hr(),C=[...g,B];l&&l(B),y(C),w.push(null)},p=B=>{const C=[...g];C.splice(B,1),y(C),w.remove(B)},v=B=>{if(!B.destination)return;const C=B.source.index,E=B.destination.index,x=[...g],k=x[C];x[C]=x[E],x[E]=k,y(x),w.move(C,E)};return o.jsx(Re.DragDropContext,{onDragEnd:v,children:o.jsx(Re.Droppable,{droppableId:`droppable_${e}`,renderClone:(B,C,E)=>{const x=E.source.index,k=g[x];return o.jsx(Vn,{provided:B,internalId:k,index:x,name:e,small:n,disabled:i,buildEntry:s,remove:p})},children:(B,C)=>o.jsxs("div",{...B.droppableProps,ref:B.innerRef,children:[A&&g.map((E,x)=>o.jsx(Re.Draggable,{draggableId:`array_field_${e}_${E}`,isDragDisabled:i,index:x,children:(k,S)=>o.jsx(Vn,{provided:k,internalId:E,index:x,name:e,small:n,disabled:i,buildEntry:s,remove:p})},`array_field_${e}_${E}`)),B.placeholder,c&&o.jsx(a.Box,{p:1,justifyContent:"center",textAlign:"left",children:o.jsx(a.Button,{variant:"outlined",color:"primary",disabled:i,startIcon:o.jsx(Ps,{}),onClick:h,children:r??"Add"})})]})})})}})}function Vn({provided:e,index:r,name:t,internalId:i,small:s,disabled:n,buildEntry:l,remove:c}){return o.jsx(a.Box,{ref:e.innerRef,...e.draggableProps,style:e.draggableProps.style,sx:A=>({marginBottom:1,borderRadius:A.shape.borderRadius,opacity:1}),children:o.jsxs(a.Box,{display:"flex",children:[o.jsx(a.Box,{flexGrow:1,width:"100%",children:l(r,i)},`field_${t}_entryValue`),o.jsxs(a.Box,{display:"flex",flexDirection:s?"row":"column",sx:{pl:1},alignItems:"center",children:[o.jsx(a.Tooltip,{title:"Remove",children:o.jsx(a.IconButton,{size:"small","aria-label":"remove",disabled:n,onClick:()=>c(r),children:o.jsx(Yt,{fontSize:"small"})})}),o.jsx("div",{...e.dragHandleProps,children:o.jsx(a.Tooltip,{title:"Move",children:o.jsx(a.IconButton,{size:"small",disabled:n,sx:{cursor:n?"inherit":"move"},children:o.jsx(Qs,{fontSize:"small",color:n?"disabled":"inherit"})})})})]})]},`field_${i}`)})}function Hr(){return Math.floor(Math.random()*Math.floor(Number.MAX_SAFE_INTEGER))}function ye({property:e}){const r=typeof e.disabled=="object"?e.disabled.disabledMessage:void 0;return o.jsxs(a.Box,{display:"flex",children:[o.jsx(a.Box,{flexGrow:1,children:o.jsx(a.FormHelperText,{children:r||e.description})}),e.longDescription&&o.jsx(a.Tooltip,{title:o.jsx(a.Typography,{variant:"caption",children:e.longDescription}),placement:"bottom-start",arrow:!0,children:o.jsx(a.IconButton,{edge:"start",size:"small",sx:{alignSelf:"flex-start"},children:o.jsx(Ls,{color:"disabled",fontSize:"small"})})})]})}function we({property:e,small:r,sx:t}){return o.jsxs(a.Box,{sx:{display:"inline-flex",paddingBottom:"2px",alignItems:"center",gap:r?1:1.5,...t},component:"span",children:[Xo(e),o.jsx(a.Typography,{component:"span",sx:{fontWeight:500,fontSize:r?"1rem":".85rem",transformOrigin:"left top",transform:r?"translate(8px, 0px) scale(0.75)":void 0},children:e.name})]})}function ta(e){const r=d.useRef(),[t,i]=d.useState(e.value),s=d.useDeferredValue(t);d.useEffect(()=>{i(e.value)},[e.value]),d.useEffect(()=>{!e.value&&!s||s!==e.value&&r.current&&e.onChange&&e.onChange(r.current)},[s,e.value,e.onChange]);const n=d.useCallback(l=>{r.current=l,i(l.target.value)},[]);return o.jsx(a.TextField,{...e,onChange:n,value:t})}function na({field:e,form:r,label:t,tooltip:i,disabled:s,size:n="small"}){const l=o.jsx(a.FormControlLabel,{checked:e.value??!1,sx:{ml:0},disabled:s,control:o.jsx(a.Switch,{size:n,disabled:s,onChange:(c,A)=>r.setFieldValue(e.name,A)}),label:o.jsx(a.Typography,{variant:"body2",children:t})});return i?o.jsx(a.Tooltip,{title:i,children:l}):l}function jr({propertyKey:e,value:r,setValue:t,error:i,showError:s,disabled:n,autoFocus:l,touched:c,property:A,includeDescription:u,shouldAlwaysRerender:f}){const g=A.enumValues;xe({property:A,value:r,setValue:t});const y=d.useCallback(()=>{t(null)},[t]);return o.jsxs(a.FormControl,{fullWidth:!0,required:A.validation?.required,error:s,disabled:n,sx:{"& .MuiInputLabel-root":{mt:1/2,ml:1/2},"& .MuiInputLabel-shrink":{mt:2}},children:[o.jsx(a.InputLabel,{id:`${e}-select-label`,children:o.jsx(we,{property:A})}),o.jsx(a.Select,{sx:{minHeight:"64px"},variant:"filled",labelId:`${e}-select-label`,autoFocus:l,value:r??"",disabled:n,endAdornment:A.clearable&&o.jsx(a.IconButton,{sx:{position:"absolute",top:"12px",right:"32px"},onClick:y,children:o.jsx(Me,{})}),onChange:w=>{const h=w.target.value,p=h?A.dataType==="number"?parseFloat(h):h:null;return t(p)},renderValue:w=>o.jsx(me,{enumKey:w,enumValues:g,small:!1}),children:g&&g.map(w=>o.jsx(a.MenuItem,{value:w.id,disabled:Vo(w),children:o.jsx(me,{enumKey:w.id,enumValues:g,small:!0})},`select_${e}_${w.id}`))}),u&&o.jsx(ye,{property:A}),s&&o.jsx(a.FormHelperText,{children:i})]})}function _r({propertyKey:e,value:r,setValue:t,error:i,showError:s,disabled:n,property:l,includeDescription:c,autoFocus:A}){const u=l.of;if(!u)throw Error("Using wrong component ArrayEnumSelect");if(Array.isArray(u))throw Error("Using array properties instead of single one in `of` in ArrayProperty");if(u.dataType!=="string"&&u.dataType!=="number")throw Error("Field misconfiguration: array field of type string or number");const f=u.enumValues;if(!f)throw console.error(l),Error("Field misconfiguration: array field of type string or number needs to have enumValues");xe({property:l,value:r,setValue:t});const g=d.useCallback(()=>{t(null)},[t]);if(f instanceof Error)return o.jsx(fe,{error:f.message});const y=!!r&&Array.isArray(r);return o.jsxs(a.FormControl,{fullWidth:!0,required:l.validation?.required,error:s,sx:{"& .MuiInputLabel-root":{mt:1/2,ml:1/2},"& .MuiInputLabel-shrink":{mt:2}},children:[o.jsx(a.InputLabel,{id:`${e}-multiselect-label`,children:o.jsx(we,{property:l})}),o.jsx(a.Select,{multiple:!0,sx:{minHeight:"64px"},variant:"filled",labelId:`${e}-multiselect-label`,value:y?r.map(w=>w.toString()):[],autoFocus:A,disabled:n,endAdornment:u.clearable&&o.jsx(a.IconButton,{sx:{position:"absolute",top:"12px",right:"32px"},onClick:g,children:o.jsx(Me,{})}),onChange:w=>{let h;return u?.dataType==="number"?h=w.target.value?w.target.value.map(p=>parseFloat(p)):[]:h=w.target.value,t(h)},renderValue:w=>o.jsx(Wo,{value:w,name:e,enumValues:f,size:"regular"}),children:Yo(f).map(w=>{const h=w.id,p=y&&r.map(v=>v.toString()).includes(h.toString());return o.jsxs(a.MenuItem,{value:h,disabled:Vo(w),dense:!0,children:[o.jsx(a.Checkbox,{checked:p}),o.jsx(a.ListItemText,{primary:o.jsx(me,{enumKey:h,enumValues:f,small:!0})})]},`form-select-${e}-${h}`)})}),c&&o.jsx(ye,{property:l}),s&&o.jsx(a.FormHelperText,{children:i})]})}function Wn({propertyKey:e,value:r,error:t,showError:i,isSubmitting:s,tableMode:n,property:l,includeDescription:c,setValue:A}){const u=l.of;if(u.dataType!=="reference")throw Error("ArrayOfReferencesField expected a property containing references");const f=l.expanded===void 0?!0:l.expanded,[g,y]=d.useState(!1),w=r&&Array.isArray(r)?r.map(S=>S.id):[];xe({property:l,value:r,setValue:A});const h=he(),p=d.useMemo(()=>u.path?h.getCollection(u.path):void 0,[u.path]);if(!p)throw Error(`Couldn't find the corresponding collection for the path: ${u.path}`);const v=d.useCallback(S=>{A(S.map(m=>Bo(m)))},[A]),B=Oo({multiselect:!0,path:u.path,collection:p,onMultipleEntitiesSelected:v,selectedEntityIds:w,forceFilter:u.forceFilter}),C=d.useCallback(()=>{B.open()},[B]),E=d.useCallback((S,m)=>{const I=r&&r.length>S?r[S]:void 0;return I?o.jsx("div",{onMouseEnter:()=>y(!0),onMouseMove:()=>y(!0),onMouseLeave:()=>y(!1),children:o.jsx(io,{disabled:!u.path,previewProperties:u.previewProperties,size:"regular",onClick:C,reference:I,onHover:g})}):o.jsx("div",{children:"Internal ERROR"})},[u.path,u.previewProperties,g,r]),x=o.jsx(we,{property:l}),k=o.jsxs(o.Fragment,{children:[!p&&o.jsx(fe,{error:"The specified collection does not exist. Check console"}),p&&o.jsxs(o.Fragment,{children:[o.jsx(qo,{value:r,addLabel:l.name?"Add reference to "+l.name:"Add reference",name:e,buildEntry:E,disabled:s}),o.jsx(a.Box,{p:1,justifyContent:"center",textAlign:"left",children:o.jsxs(a.Button,{variant:"outlined",color:"primary",disabled:s,onClick:C,children:["Edit ",l.name]})})]})]});return o.jsx(o.Fragment,{children:o.jsxs(a.FormControl,{fullWidth:!0,error:i,children:[!n&&o.jsx(uo,{expanded:f,title:x,children:k}),n&&k,c&&o.jsx(ye,{property:l}),i&&typeof t=="string"&&o.jsx(a.FormHelperText,{children:t})]})})}async function ia(e,r,t,i,s,n,l,c){let A;return typeof e=="function"?(A=await e({path:s,entityId:i,values:t,property:n,file:l,storage:r,propertyKey:c}),A||console.warn("Storage callback returned empty result. Using default name value")):A=zn(l,e,i,c,s),A||(A=lo()+"_"+l.name),A}function sa(e,r,t,i,s,n,l,c){let A;return typeof e=="function"?(A=e({path:s,entityId:i,values:t,property:n,file:l,storage:r,propertyKey:c}),A||console.warn("Storage callback returned empty result. Using default name value")):A=zn(l,e,i,c,s),A||(A=lo()+"_"+l.name),A}function zn(e,r,t,i,s){const n=e.name.split(".").pop();let l=r.replace("{entityId}",t).replace("{propertyKey}",i).replace("{rand}",lo()).replace("{file}",e.name).replace("{file.type}",e.type).replace("{path}",s);if(n){l=l.replace("{file.ext}",n);const c=e.name.replace(`.${n}`,"");l=l.replace("{file.name}",c)}return l||(l=lo()+"_"+e.name),l}function Un({entityId:e,entityValues:r,path:t,value:i,property:s,propertyKey:n,storageSource:l,disabled:c,onChange:A}){const u=s.dataType==="string"?s.storage:s.dataType==="array"&&s.of.dataType==="string"?s.of.storage:void 0,f=s.dataType==="array";if(!u)throw Error("Storage meta must be specified");const g=u?.metadata,y=f?"small":"regular",w=u?.imageCompression,h=(f?i??[]:i?[i]:[]).map(m=>({id:Jr(),storagePathOrDownloadUrl:m,metadata:g,size:y})),[p,v]=d.useState(i),[B,C]=d.useState(h);d.useEffect(()=>{re(p,i)||(v(i),C(h))},[h,i,p]);const E=d.useCallback(async m=>{if(u.fileName){const I=await ia(u.fileName,u,r,e,t,s,m,n);if(!I||I.length===0)throw Error("You need to return a valid filename");return I}return lo()+"_"+m.name},[e,r,t,s,n,u]),x=d.useCallback(m=>sa(u.storagePath,u,r,e,t,s,m,n)??"/",[e,r,t,s,n,u]),k=d.useCallback(async(m,I,D)=>{console.debug("onFileUploadComplete",m,I);let P=m;u.storeUrl&&(P=(await l.getDownloadURL(m)).url),u.postProcess&&(P=await u.postProcess(P));let T;I.storagePathOrDownloadUrl=P,I.metadata=D,T=[...B],T=Nn(T),C(T);const Q=T.filter($=>!!$.storagePathOrDownloadUrl).map($=>$.storagePathOrDownloadUrl);A(f?Q:Q?Q[0]:null)},[B,f,A,u,l]),S=d.useCallback(async m=>{if(!m.length||c)return;let I;if(f)I=[...B,...await Promise.all(m.map(async D=>(w&&qr(D)&&(D=await jn(D,w)),{id:Jr(),file:D,fileName:await E(D),metadata:g,size:y})))];else{let D=m[0];w&&qr(D)&&(D=await jn(D,w)),I=[{id:Jr(),file:D,fileName:await E(D),metadata:g,size:y}]}I=Nn(I),C(I)},[c,E,B,g,f,y]);return{internalValue:B,setInternalValue:C,storage:u,fileNameBuilder:E,storagePathBuilder:x,onFileUploadComplete:k,onFilesAdded:S,multipleFilesSupported:f}}function Nn(e){return e.filter((r,t)=>(e.map(i=>i.storagePathOrDownloadUrl).indexOf(r.storagePathOrDownloadUrl)===t||!r.storagePathOrDownloadUrl)&&(e.map(i=>i.file).indexOf(r.file)===t||!r.file))}function Jr(){return Math.floor(Math.random()*Math.floor(Number.MAX_SAFE_INTEGER))}const Hn={"image/jpeg":"JPEG","image/png":"PNG","image/webp":"WEBP"},qr=e=>Hn[e.type]?Hn[e.type]:null,la=100,jn=(e,r)=>new Promise(t=>{const i=r.quality===void 0?la:r.quality,s=i>=0&&i<=100?i:100;ll.imageFileResizer(e,r.maxWidth||Number.MAX_VALUE,r.maxHeight||Number.MAX_VALUE,qr(e),s,0,n=>t(n),"file")});function _n({storagePath:e,entry:r,metadata:t,onFileUploadComplete:i,imageSize:s,simple:n}){const l=ro(),c=Pe(),[A,u]=d.useState(),[f,g]=d.useState(!1),y=d.useRef(!1),w=d.useRef(!1),h=d.useCallback((p,v)=>{w.current||(w.current=!0,u(void 0),g(!0),l.uploadFile({file:p,fileName:v,path:e,metadata:t}).then(async({path:B})=>{console.debug("Upload successful"),await i(B,r,t),y.current&&g(!1)}).catch(B=>{console.error("Upload error",B),y.current&&(u(B),g(!1),c.open({type:"error",message:"Error uploading file: "+B.message}))}).finally(()=>{w.current=!1}))},[r,t,i,l,e]);return d.useEffect(()=>(y.current=!0,r.file&&h(r.file,r.fileName),()=>{y.current=!1}),[r.file,r.fileName,h]),n?o.jsx(a.Box,{m:1,sx:{width:s,height:s},children:f&&o.jsx(a.Skeleton,{variant:"rectangular",sx:{width:s,height:s}})}):o.jsx(a.Box,{m:1,children:o.jsxs(a.Paper,{elevation:0,sx:{padding:1,boxSizing:"border-box",minWidth:s,minHeight:s},variant:"outlined",children:[f&&o.jsx(a.Skeleton,{variant:"rectangular",sx:{width:"100%",height:"100%"}}),A&&o.jsx(fe,{title:"Error uploading file",error:A})]})})}function Jn({name:e,property:r,value:t,entity:i,onRemove:s,disabled:n,size:l}){return o.jsx(a.Box,{m:1,position:"relative",children:o.jsxs(a.Paper,{elevation:0,sx:{padding:1,boxSizing:"border-box",minWidth:l==="regular"?220:118,minHeight:l==="regular"?220:118},variant:"outlined",children:[!n&&o.jsx(a.Box,{sx:c=>({position:"absolute",borderRadius:"9999px",top:-8,right:-8,zIndex:1,backgroundColor:c.palette.background.paper}),children:o.jsx(a.Tooltip,{title:"Remove",children:o.jsx(a.IconButton,{size:"small",onClick:c=>{c.stopPropagation(),s(t)},children:o.jsx(Yt,{fontSize:"small"})})})}),t&&o.jsx(oe,{children:o.jsx(be,{propertyKey:e,value:t,property:r,entity:i,size:l})})]})})}const ao=e=>e.palette.mode==="light"?"rgb(240 240 240)":"rgb(39 39 41)",qn=e=>e.palette.mode==="light"?"rgb(232 232 232)":"rgb(49,49,50)",co="StorageUploadField",Se={dropZone:`${co}-dropZone`,disabled:`${co}-disabled`,nonActiveDrop:`${co}-nonActiveDrop`,activeDrop:`${co}-activeDrop`,acceptDrop:`${co}-acceptDrop`,rejectDrop:`${co}-rejectDrop`},aa=ue.styled(a.Box)(({theme:e})=>({[`&.${Se.dropZone}`]:{position:"relative",paddingTop:"2px",border:"2px solid transparent",minHeight:"254px",outline:0,borderTopLeftRadius:`${e.shape.borderRadius}px`,borderTopRightRadius:`${e.shape.borderRadius}px`,backgroundColor:ao(e),borderBottom:e.palette.mode==="light"?"1px solid rgba(0, 0, 0, 0.42)":"1px solid rgba(255, 255, 255, 0.7)",boxSizing:"border-box",transition:"border-bottom-color 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&:focus":{borderBottom:`2px solid ${e.palette.primary.main}`}},[`&.${Se.disabled}`]:{backgroundColor:"rgba(0, 0, 0, 0.12)",color:e.palette.mode==="light"?"rgba(0, 0, 0, 0.38)":"rgba(255, 255, 255, 0.38)",borderBottom:`1px dotted ${e.palette.grey[400]}`},[`&.${Se.nonActiveDrop}`]:{"&:hover":{backgroundColor:qn(e)}},[`&.${Se.activeDrop}`]:{paddingTop:"0px",boxSizing:"border-box",border:"2px solid"},[`&.${Se.acceptDrop}`]:{transition:"background-color 200ms cubic-bezier(0.0, 0, 0.2, 1) 0ms",background:"repeating-linear-gradient( 45deg, rgba(0, 0, 0, 0.09), rgba(0, 0, 0, 0.09) 10px, rgba(0, 0, 0, 0.12) 10px, rgba(0, 0, 0, 0.12) 20px) !important",border:"2px solid",borderColor:e.palette.success.light},[`&.${Se.rejectDrop}`]:{border:"2px solid",borderColor:e.palette.error.light}}));function Zr({propertyKey:e,value:r,setValue:t,error:i,showError:s,autoFocus:n,tableMode:l,property:c,includeDescription:A,context:u,isSubmitting:f}){const g=ro(),y=so(c)||!!c.disabled||f,{internalValue:w,setInternalValue:h,onFilesAdded:p,storage:v,onFileUploadComplete:B,storagePathBuilder:C,multipleFilesSupported:E}=Un({entityValues:u.values,entityId:u.entityId,path:u.path,property:c,propertyKey:e,value:r,storageSource:g,disabled:y,onChange:t});xe({property:c,value:r,setValue:t});const x={id:u.entityId,values:u.values,path:u.path};return o.jsxs(a.FormControl,{fullWidth:!0,required:c.validation?.required,error:s,children:[!l&&o.jsx(a.FormHelperText,{filled:!0,children:o.jsx(we,{property:c})}),o.jsx(da,{value:w,name:e,disabled:y,autoFocus:n,property:c,onChange:t,setInternalValue:h,onFilesAdded:p,entity:x,onFileUploadComplete:B,storagePathBuilder:C,storage:v,multipleFilesSupported:E}),A&&o.jsx(ye,{property:c}),s&&o.jsx(a.FormHelperText,{children:i})]})}function ca({storage:e,disabled:r,isDraggingOver:t,onFilesAdded:i,multipleFilesSupported:s,droppableProvided:n,autoFocus:l,internalValue:c,property:A,entity:u,onClear:f,metadata:g,storagePathBuilder:y,onFileUploadComplete:w,size:h,name:p,helpText:v}){const B=Pe(),{getRootProps:C,getInputProps:E,isDragActive:x,isDragAccept:k,isDragReject:S}=Vt.useDropzone({accept:e.acceptedFiles?e.acceptedFiles.map(m=>({[m]:[]})).reduce((m,I)=>({...m,...I}),{}):void 0,disabled:r||t,noDragEventsBubbling:!0,maxSize:e.maxSize,onDrop:i,onDropRejected:(m,I)=>{for(const D of m)for(const P of D.errors)B.open({type:"error",message:`Error uploading file: File is larger than ${e.maxSize} bytes`})}});return o.jsxs(aa,{...C(),className:sl(Se.dropZone,{[Se.nonActiveDrop]:!x,[Se.activeDrop]:x,[Se.rejectDrop]:S,[Se.acceptDrop]:k,[Se.disabled]:r}),sx:{display:s&&c.length?void 0:"flex",alignItems:"center"},children:[o.jsxs(a.Box,{...n.droppableProps,ref:n.innerRef,sx:{display:"flex",alignItems:"center",overflow:s&&c.length?"auto":void 0,minHeight:s&&c.length?180:250,p:1,"&::-webkit-scrollbar":{display:"none"}},children:[o.jsx("input",{autoFocus:l,...E()}),c.map((m,I)=>{let D;return m.storagePathOrDownloadUrl?D=o.jsx(Jn,{name:`storage_preview_${m.storagePathOrDownloadUrl}`,property:A,disabled:r,entity:u,value:m.storagePathOrDownloadUrl,onRemove:f,size:m.size}):m.file&&(D=o.jsx(_n,{entry:m,metadata:g,storagePath:y(m.file),onFileUploadComplete:w,imageSize:h==="regular"?220:118,simple:!1})),o.jsx(Re.Draggable,{draggableId:`array_field_${p}_${m.id}`,index:I,children:(P,T)=>o.jsx(a.Box,{ref:P.innerRef,...P.draggableProps,...P.dragHandleProps,style:P.draggableProps.style,sx:Q=>({borderRadius:`${Q.shape.borderRadius}px`}),children:D})},`array_field_${p}_${m.id}`)}),n.placeholder]}),o.jsx(a.Box,{sx:{flexGrow:1,minHeight:38,boxSizing:"border-box",m:2},children:o.jsx(a.Typography,{align:"center",variant:"label",children:v})})]})}function da({property:e,name:r,value:t,setInternalValue:i,onChange:s,multipleFilesSupported:n,onFileUploadComplete:l,disabled:c,onFilesAdded:A,autoFocus:u,storage:f,entity:g,storagePathBuilder:y}){if(n){const x=e;if(x.of){if(Array.isArray(x.of)||x.of.dataType!=="string")throw Error("Storage field using array must be of data type string")}else throw Error("Storage field using array must be of data type string")}const w=f?.metadata,h=n?"small":"regular",p=d.useCallback((x,k)=>{if(!n)return;const S=[...t],m=S[x];S.splice(x,1),S.splice(k,0,m),i(S);const I=S.filter(D=>!!D.storagePathOrDownloadUrl).map(D=>D.storagePathOrDownloadUrl);s(I)},[n,s,i,t]),v=d.useCallback(x=>{x.destination&&p(x.source.index,x.destination.index)},[p]),B=d.useCallback(x=>{if(n){const k=t.filter(S=>S.storagePathOrDownloadUrl!==x);s(k.filter(S=>!!S.storagePathOrDownloadUrl).map(S=>S.storagePathOrDownloadUrl)),i(k)}else s(null),i([])},[t,n,s]),C=n?"Drag 'n' drop some files here, or click to select files":"Drag 'n' drop a file here, or click to select one",E=n?e.of:e;return o.jsx(Re.DragDropContext,{onDragEnd:v,children:o.jsx(Re.Droppable,{droppableId:`droppable_${r}`,direction:"horizontal",renderClone:(x,k,S)=>{const m=t[S.source.index];return o.jsx(a.Box,{ref:x.innerRef,...x.draggableProps,...x.dragHandleProps,style:x.draggableProps.style,sx:I=>({borderRadius:I.shape.borderRadius}),children:o.jsx(Jn,{name:`storage_preview_${m.storagePathOrDownloadUrl}`,property:E,disabled:!0,entity:g,value:m.storagePathOrDownloadUrl,onRemove:B,size:m.size})})},children:(x,k)=>o.jsx(ca,{storage:f,disabled:c,isDraggingOver:k.isDraggingOver,droppableProvided:x,onFilesAdded:A,multipleFilesSupported:n,autoFocus:u,internalValue:t,property:E,entity:g,onClear:B,metadata:w,storagePathBuilder:y,onFileUploadComplete:l,size:h,name:r,helpText:C})})})}function Ao({propertyKey:e,value:r,setValue:t,error:i,showError:s,disabled:n,autoFocus:l,property:c,includeDescription:A,allowInfinity:u,shouldAlwaysRerender:f}){let g;c.dataType==="string"&&(g=c.multiline),xe({property:c,value:r,setValue:t});const y=d.useCallback(()=>{t(null)},[t]),w=Boolean(g),p=(r??(c.dataType==="string"?"":r===0?0:""))===1/0,v=!p&&c.dataType==="number"?"number":void 0,B=d.useCallback(C=>{if(!C)t(null);else if(v==="number"){const E=parseFloat(C);t(E)}else t(C)},[v,t]);return o.jsx(o.Fragment,{children:o.jsxs(a.FormControl,{variant:"filled",error:s,disabled:p,sx:{"& .MuiInputLabel-shrink":{mt:-1/4}},fullWidth:!0,children:[o.jsx(a.InputLabel,{sx:{top:"4px"},children:o.jsx(we,{property:c})}),o.jsx(a.FilledInput,{sx:{minHeight:"64px"},autoFocus:l,type:v,multiline:w,inputProps:{rows:4},endAdornment:c.clearable&&o.jsx(a.IconButton,{sx:{position:"absolute",right:"16px"},onClick:y,children:o.jsx(Me,{})}),value:p?"Infinity":r??"",disabled:n,onChange:C=>{B(C.target.value)}}),o.jsxs(a.Box,{display:"flex",children:[o.jsxs(a.Box,{flexGrow:1,children:[s&&o.jsx(a.FormHelperText,{children:i}),A&&o.jsx(ye,{property:c})]}),u&&o.jsx(a.FormControlLabel,{checked:p,style:{marginRight:0},labelPlacement:"start",control:o.jsx(a.Switch,{size:"small",type:"checkbox",onChange:C=>{B(C.target.checked?1/0:void 0)}}),disabled:n,label:o.jsx(a.Typography,{variant:"caption",children:"Set value to Infinity"})})]})]})})}const Zn=d.forwardRef(function({propertyKey:r,value:t,setValue:i,error:s,showError:n,autoFocus:l,disabled:c,touched:A,property:u,includeDescription:f,shouldAlwaysRerender:g},y){xe({property:u,value:t,setValue:i});const[w,h]=d.useState(l);return o.jsx(o.Fragment,{children:o.jsxs(a.FormControl,{fullWidth:!0,children:[o.jsx(a.FormControlLabel,{sx:p=>({color:w?p.palette.primary.main:p.palette.text.secondary,justifyContent:"space-between",margin:0,width:"100%",minHeight:"64px",paddingLeft:"16px",paddingRight:"24px",boxSizing:"border-box",position:"relative",display:"inline-flex",alignItems:"center",backgroundColor:ao(p),borderTopLeftRadius:`${p.shape.borderRadius}px`,borderTopRightRadius:`${p.shape.borderRadius}px`,transition:"background-color 200ms cubic-bezier(0.0, 0, 0.2, 1) 0ms","&::before":{borderBottom:w?p.palette.mode==="light"?"1px solid rgba(255, 255, 255, 0.7)":"1px solid rgba(0, 0, 0, 0.87)":p.palette.mode==="light"?"1px solid rgba(0, 0, 0, 0.42)":"1px solid rgba(255, 255, 255, 0.7)",left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:"border-bottom-color 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",pointerEvents:"none"},"&::after":{content:'""',transition:"transform 200ms cubic-bezier(0.0, 0, 0.2, 1) 0ms",left:0,bottom:0,position:"absolute",right:0,transform:w?"scaleX(1)":"scaleX(0)",borderBottom:`2px solid ${p.palette.primary.main}`,pointerEvents:w?"none":void 0},"&:hover":{backgroundColor:qn(p)}}),onClick:p=>h(!0),labelPlacement:"start",checked:Boolean(t),inputRef:y,control:o.jsx(a.Switch,{type:"checkbox",color:"secondary",autoFocus:l,disabled:c,onFocus:p=>h(!0),onBlur:p=>h(!1),onChange:p=>{h(!0),i(p.target.checked)}}),disabled:c,label:o.jsx(we,{property:u})}),f&&o.jsx(ye,{property:u}),n&&o.jsx(a.FormHelperText,{children:s})]})})});function Xn({propertyKey:e,value:r,setValue:t,autoFocus:i,error:s,showError:n,disabled:l,touched:c,property:A,includeDescription:u,shouldAlwaysRerender:f}){const g=r||null;xe({property:A,value:r,setValue:t});const y=d.useCallback(()=>{t(null)},[t]),w=A.mode===void 0||A.mode==="date_time"?gr.DateTimePicker:fr.DatePicker;return o.jsxs(o.Fragment,{children:[o.jsx(w,{autoFocus:i,value:g,renderInput:h=>o.jsx(a.TextField,{...h,fullWidth:!0,sx:{minHeight:"64px"},label:o.jsx(we,{property:A}),InputProps:{...h.InputProps,sx:{minHeight:"64px"},endAdornment:o.jsxs(a.Box,{sx:{pr:2,gap:2},children:[A.clearable&&o.jsx(a.IconButton,{sx:{position:"absolute",right:"56px",top:"12px"},onClick:y,children:o.jsx(Me,{})}),h.InputProps?.endAdornment]})},error:n,variant:"filled",helperText:n?s:null}),disabled:l,onChange:h=>t(h)}),u&&o.jsx(ye,{property:A})]})}function Kn(e){return typeof e.property.path!="string"?o.jsx(Xr,{...e}):o.jsx(Aa,{...e})}function Aa({propertyKey:e,value:r,setValue:t,error:i,showError:s,disabled:n,touched:l,autoFocus:c,property:A,includeDescription:u,context:f,shouldAlwaysRerender:g}){if(!A.path)throw new Error("Property path is required for ReferenceFieldBinding");const y=R();xe({property:A,value:r,setValue:t});const w=Oe(),h=he(),p=d.useMemo(()=>h.getCollection(A.path),[A.path,h]);if(!p)throw Error(`Couldn't find the corresponding collection for the path: ${A.path}`);const v=A.path,B=r&&r instanceof Ye,{entity:C,dataLoading:E,dataLoadingError:x}=Lo({path:B?r.path:A.path,entityId:B?r.id:void 0,collection:p,useCache:!0}),k=d.useCallback(T=>{n||t(T?Bo(T):null)},[n,t]),S=Oo({multiselect:!1,path:v,collection:p,onSingleEntitySelected:k,forceFilter:A.forceFilter}),m=d.useCallback(()=>{S.open()},[S]),I=d.useCallback(T=>{T.stopPropagation(),t(null),S.close()},[S,t]),D=d.useCallback(T=>{T.stopPropagation(),C&&(y.onAnalyticsEvent?.("entity_click_from_reference",{path:C.path,entityId:C.id}),w.open({entityId:C.id,path:v,updateUrl:!0}))},[C,v,w]),P=d.useCallback(T=>{const Q=C&&!C.values;let $;if(!T)$=o.jsx(fe,{error:"The specified collection does not exist. Check console"});else if(Q)$=o.jsx(a.Tooltip,{title:r&&r.path,children:o.jsxs(a.Box,{display:"flex",alignItems:"center",p:1,flexGrow:1,children:[o.jsx(Ar,{fontSize:"small",color:"error"}),o.jsxs(a.Box,{marginLeft:1,children:["Missing reference ",C&&C.id]})]})});else if(B){const q=at(T,y.fields,A.previewProperties,3);$=o.jsx(a.Box,{display:"flex",flexDirection:"column",flexGrow:1,ml:1,mr:1,children:q&&q.map(Y=>{const V=T.properties[Y];return V?o.jsx(a.Box,{mt:.5,mb:.5,children:o.jsx(oe,{children:C?o.jsx(be,{propertyKey:Y,value:C.values[Y],property:V,entity:C,size:"tiny"}):o.jsx(je,{property:V,size:"tiny"})})},`reference_previews_${Y}`):null})})}else $=o.jsxs(a.Box,{p:1,onClick:n?void 0:m,justifyContent:"center",display:"flex",children:[o.jsx(a.Typography,{variant:"label",sx:q=>({flexGrow:1,textAlign:"center"}),children:"No value set"}),!n&&o.jsx(a.Button,{variant:"outlined",color:"primary",children:"Set"})]});return o.jsx(a.Box,{onClick:n?void 0:m,display:"flex",children:o.jsxs(a.Box,{display:"flex",flexDirection:"column",flexGrow:1,children:[o.jsxs(a.Box,{display:"flex",flexDirection:"row",flexGrow:1,children:[o.jsx(a.Box,{flexGrow:1,children:o.jsx(we,{property:A,small:!0})}),C&&o.jsx(a.Box,{alignSelf:"center",m:1,children:o.jsx(a.Tooltip,{title:r&&r.path,children:o.jsx(a.Typography,{variant:"caption",className:"mono",children:C.id})})}),!Q&&C&&r&&o.jsx(a.Box,{children:o.jsx(a.Tooltip,{title:`See details for ${C.id}`,children:o.jsx("span",{children:o.jsx(a.IconButton,{onClick:D,size:"large",children:o.jsx(ur,{})})})})}),r&&o.jsx(a.Box,{children:o.jsx(a.Tooltip,{title:"Clear",children:o.jsx("span",{children:o.jsx(a.IconButton,{disabled:n,onClick:n?void 0:I,size:"large",children:o.jsx(Me,{})})})})})]}),$]})})},[I,n,C,m,A,D,B,r]);return o.jsxs(a.FormControl,{error:s,fullWidth:!0,children:[o.jsx(a.Typography,{variant:"label",sx:T=>({elevation:0,width:"100%",padding:T.spacing(1),position:"relative",transition:"background-color 200ms cubic-bezier(0.0, 0, 0.2, 1) 0ms",borderTopLeftRadius:`${T.shape.borderRadius}px`,borderTopRightRadius:`${T.shape.borderRadius}px`,backgroundColor:n?"rgba(0, 0, 0, 0.12)":T.palette.mode==="light"?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)","&::before":{borderBottom:n?T.palette.mode==="light"?"1px dotted rgba(0, 0, 0, 0.42)":"1px dotted rgba(255, 255, 255, 0.7)":T.palette.mode==="light"?"1px solid rgba(0, 0, 0, 0.42)":"1px solid rgba(255, 255, 255, 0.7)",left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:"border-bottom-color 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",pointerEvents:"none"},"&::after":{content:'""',transition:"transform 200ms cubic-bezier(0.0, 0, 0.2, 1) 0ms",left:0,bottom:0,position:"absolute",right:0,transform:"scaleX(0)",borderBottom:n?`2px dotted ${T.palette.primary.main}`:`2px solid ${T.palette.primary.main}`},"&:hover":{cursor:n?void 0:"pointer",backgroundColor:n?"rgba(0, 0, 0, 0.12)":T.palette.mode==="light"?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)"},color:n?T.palette.mode==="light"?"rgba(0, 0, 0, 0.38)":"rgba(255, 255, 255, 0.38)":void 0,fontWeight:T.typography.fontWeightMedium}),children:p&&P(p)}),u&&o.jsx(ye,{property:A}),s&&o.jsx(a.FormHelperText,{children:i})]})}class oe extends d.Component{constructor(r){super(r),this.state={error:null}}static getDerivedStateFromError(r){return{error:r}}componentDidCatch(r,t){console.error(r)}render(){return this.state.error?o.jsxs(a.Box,{display:"flex",flexDirection:"column",m:.5,children:[o.jsxs(a.Box,{display:"flex",alignItems:"center",m:.5,children:[o.jsx(Ar,{color:"error",fontSize:"small"}),o.jsx(a.Box,{marginLeft:1,children:"Error"})]}),o.jsx(a.Typography,{variant:"caption",children:this.state.error?.message??"See the error in the console"})]}):this.props.children}}function Xr({propertyKey:e,value:r,setValue:t,error:i,showError:s,isSubmitting:n,touched:l,tableMode:c,property:A,includeDescription:u,context:f}){const g={id:f.entityId,values:f.values,path:f.path};return o.jsxs(a.FormControl,{fullWidth:!0,error:s,children:[!c&&o.jsx(a.FormHelperText,{filled:!0,children:o.jsx(we,{property:A})}),o.jsx(a.Paper,{sx:y=>({minHeight:"56px",elevation:0,padding:y.spacing(2),[y.breakpoints.up("md")]:{padding:y.spacing(3)}}),variant:"outlined",children:o.jsx(oe,{children:o.jsx(be,{propertyKey:e,value:r,property:A,entity:g,size:"regular"})})}),s&&typeof i=="string"&&o.jsx(a.FormHelperText,{children:i}),u&&o.jsx(ye,{property:A})]})}const ua=function({propertyKey:r,property:t,context:i,includeDescription:s,underlyingValueHasChanged:n,disabled:l,tableMode:c,partOfArray:A,autoFocus:u,shouldAlwaysRerender:f}){const g=R();let y;const w=ke({propertyOrBuilder:t,values:i.values,path:i.path,entityId:i.entityId,fields:g.fields});if(w===null)return o.jsx(o.Fragment,{});if(so(w))y=Xr;else if(w.Field)typeof w.Field=="function"&&(y=w.Field);else{const h=Zo(w);if(!h)throw new Error(`INTERNAL: Could not find field config for property ${r}`);y=h.Field}if(y){const h={propertyKey:r,property:w,includeDescription:s,underlyingValueHasChanged:n,context:i,disabled:l,tableMode:c,partOfArray:A,autoFocus:u,shouldAlwaysRerender:f},p=f||w.Field?Ce.Field:Ce.FastField;return o.jsx(p,{required:w.validation?.required,name:`${r}`,children:v=>o.jsx(fa,{Component:y,componentProps:h,fieldProps:v})})}return o.jsx("div",{children:`Currently the field ${w.dataType} is not supported`})},Je=d.memo(ua,(e,r)=>re(e.context.values,r.context.values)&&(typeof e.property=="function"&&typeof r.property=="function"||re(e.property,r.property))&&e.disabled===r.disabled);function fa({Component:e,componentProps:{propertyKey:r,property:t,includeDescription:i,underlyingValueHasChanged:s,tableMode:n,partOfArray:l,autoFocus:c,context:A,disabled:u,shouldAlwaysRerender:f},fieldProps:g}){const y=t.customProps,w=g.field.value,h=g.meta.initialValue,p=Ce.getIn(g.form.errors,r),v=Ce.getIn(g.form.touched,r),B=p&&(g.form.submitCount>0||t.validation?.unique)&&(!Array.isArray(p)||!!p.filter(x=>!!x).length),C=g.form.isSubmitting,E={propertyKey:r,value:w,initialValue:h,setValue:x=>{g.form.setFieldTouched(r,!0,!1),g.form.setFieldValue(r,x)},error:p,touched:v,showError:B,isSubmitting:C,includeDescription:i??!0,property:t,disabled:u??!1,underlyingValueHasChanged:s??!1,tableMode:n??!1,partOfArray:l??!1,autoFocus:c??!1,customProps:y,context:A,shouldAlwaysRerender:f??!0};return o.jsxs(oe,{children:[o.jsx(e,{...E}),s&&!C&&o.jsx(a.FormHelperText,{children:"This value has been updated elsewhere"})]})}function Rn({propertyKey:e,value:r,showError:t,disabled:i,property:s,setValue:n,tableMode:l,includeDescription:c,underlyingValueHasChanged:A,autoFocus:u,shouldAlwaysRerender:f,context:g}){const y=s.pickOnlySomeKeys||!1,w=(s.expanded===void 0?!0:s.expanded)||u;if(!s.properties)throw Error(`You need to specify a 'properties' prop (or specify a custom field) in your map property ${e}`);let h;y?r?h=Qn(s.properties,...Object.keys(r).filter(C=>C in s.properties)):h={}:h=s.properties,xe({property:s,value:r,setValue:n});const p=d.useCallback(()=>{const C=Object.keys(s.properties).filter(x=>!r||!(x in r)),E=x=>{n({...r,[x.target.value]:null})};return C.length?o.jsx(a.Box,{m:1,children:o.jsxs(a.FormControl,{fullWidth:!0,children:[o.jsx(a.InputLabel,{children:"Add property"}),o.jsx(a.Select,{variant:"standard",value:"",disabled:i,onChange:E,children:C.map(x=>o.jsx(a.MenuItem,{value:x,children:s.properties[x].name||x},x))})]})}):o.jsx(o.Fragment,{})},[i,s.properties,n,r]),v=o.jsxs(o.Fragment,{children:[o.jsx(a.Grid,{container:!0,spacing:2,children:Object.entries(h).filter(([C,E])=>!_o(E)).map(([C,E],x)=>{const k={propertyKey:`${e}.${C}`,disabled:i,property:E,includeDescription:c,underlyingValueHasChanged:A,context:g,tableMode:!1,partOfArray:!1,autoFocus:u&&x===0,shouldAlwaysRerender:E.fromBuilder};return o.jsx(a.Grid,{item:!0,sm:12,xs:12,children:o.jsx(Je,{...k})},`map-${e}-${x}`)})}),y&&p()]}),B=o.jsx(we,{property:s});return o.jsxs(a.FormControl,{fullWidth:!0,error:t,children:[!l&&o.jsx(uo,{expanded:w,title:B,children:v}),l&&v,c&&o.jsx(ye,{property:s})]})}function uo({title:e,children:r,expanded:t=!0,padding:i=1,darken:s=!0}){const[n,l]=d.useState(t);return o.jsxs(a.Accordion,{variant:"outlined",disableGutters:!0,expanded:n,sx:c=>({color:c.palette.text.secondary,backgroundColor:s?void 0:"inherit"}),TransitionProps:{unmountOnExit:!0},onChange:d.useCallback((c,A)=>l(A),[]),children:[o.jsx(a.AccordionSummary,{expandIcon:o.jsx(Ys,{}),sx:c=>({minHeight:"56px",alignItems:"center",borderTopLeftRadius:`${c.shape.borderRadius}px`,borderTopRightRadius:`${c.shape.borderRadius}px`,borderBottomLeftRadius:n?void 0:`${c.shape.borderRadius}px`,borderBottomRightRadius:n?void 0:`${c.shape.borderRadius}px`,"&.Mui-expanded":{borderBottom:`1px solid ${c.palette.divider}`}}),children:e}),o.jsx(a.AccordionDetails,{sx:c=>({padding:typeof i=="string"?i:c.spacing(i)}),children:r})]})}function ei({propertyKey:e,value:r,error:t,showError:i,isSubmitting:s,setValue:n,tableMode:l,property:c,includeDescription:A,underlyingValueHasChanged:u,context:f,disabled:g,shouldAlwaysRerender:y}){if(!c.of)throw Error("RepeatFieldBinding misconfiguration. Property `of` not set");if(!c.resolvedProperties||!Array.isArray(c.resolvedProperties))throw Error("RepeatFieldBinding - Internal error: Expected array in 'property.resolvedProperties'");const w=c.expanded===void 0?!0:c.expanded,h=c.of,[p,v]=d.useState();xe({property:c,value:r,setValue:n});const B=d.useCallback((x,k)=>{const S=c.resolvedProperties[x]??h,m={propertyKey:`${e}[${x}]`,disabled:g,property:S,includeDescription:A,underlyingValueHasChanged:u,context:f,tableMode:!1,partOfArray:!0,autoFocus:k===p,shouldAlwaysRerender:S.fromBuilder};return o.jsx(Je,{...m})},[f,g,A,p,h,c.resolvedProperties,e,u]),C=o.jsx(qo,{value:r,addLabel:c.name?"Add entry to "+c.name:"Add entry",name:e,buildEntry:B,onInternalIdAdded:v,disabled:s||Boolean(c.disabled),includeAddButton:!c.disabled}),E=o.jsx(we,{property:c});return o.jsxs(a.FormControl,{fullWidth:!0,error:i,children:[!l&&o.jsx(uo,{expanded:w,title:E,children:C}),l&&C,A&&o.jsx(ye,{property:c}),i&&typeof t=="string"&&o.jsx(a.FormHelperText,{children:t})]})}function oi({propertyKey:e,value:r,error:t,showError:i,isSubmitting:s,setValue:n,tableMode:l,property:c,includeDescription:A,underlyingValueHasChanged:u,context:f,disabled:g,shouldAlwaysRerender:y}){if(!c.oneOf)throw Error("ArrayOneOfField misconfiguration. Property `oneOf` not set");const w=c.expanded===void 0?!0:c.expanded;xe({property:c,value:r,setValue:n});const[h,p]=d.useState(),v=d.useCallback((E,x)=>o.jsx(ga,{name:`${e}[${E}]`,index:E,value:r[E],typeField:c.oneOf.typeField??Uo,valueField:c.oneOf.valueField??Tr,properties:c.oneOf.properties,autoFocus:x===h,shouldAlwaysRerender:y,context:f},`array_one_of_${E}`),[f,h,c.oneOf,e,r]),B=o.jsx(we,{property:c}),C=o.jsx(qo,{value:r,name:e,addLabel:c.name?"Add entry to "+c.name:"Add entry",buildEntry:v,onInternalIdAdded:p,disabled:s||Boolean(c.disabled),includeAddButton:!c.disabled});return o.jsxs(a.FormControl,{fullWidth:!0,error:i,children:[!l&&o.jsx(uo,{expanded:w,title:B,children:C}),l&&C,A&&o.jsx(ye,{property:c}),i&&typeof t=="string"&&o.jsx(a.FormHelperText,{children:t})]})}function ga({name:e,index:r,value:t,typeField:i,valueField:s,properties:n,autoFocus:l,shouldAlwaysRerender:c,context:A}){const u=t&&t[i],[f,g]=d.useState(u??void 0);d.useEffect(()=>{u!==f&&g(u)},[u]);const y=f?n[f]:void 0,w=Object.entries(n).map(([B,C])=>({id:B,label:C.name??B})),h=`${e}[${i}]`,p=`${e}[${s}]`,v=y?{propertyKey:p,property:y,context:A,autoFocus:l,tableMode:!1,shouldAlwaysRerender:y.fromBuilder}:void 0;return o.jsxs(a.Paper,{sx:B=>({padding:B.spacing(1),mb:1}),elevation:0,children:[o.jsx(Ce.FastField,{required:!0,name:h,children:B=>o.jsxs(a.FormControl,{fullWidth:!0,children:[o.jsx(a.InputLabel,{id:`${e}_${r}_select_label`,children:o.jsx("span",{children:"Type"})}),o.jsx(a.Select,{fullWidth:!0,sx:{marginBottom:2},labelId:`${e}_${r}_select_label`,label:"Type",value:B.field.value!==void 0&&B.field.value!==null?B.field.value:"",onChange:C=>{const E=C.target.value;B.form.setFieldTouched(h),g(E),B.form.setFieldValue(h,E),B.form.setFieldValue(p,null)},renderValue:C=>o.jsx(me,{enumKey:C,enumValues:w,small:!0}),children:w.map(C=>{const E=C.id;return o.jsx(a.MenuItem,{value:E,children:o.jsx(me,{enumKey:E,enumValues:w,small:!0})},`select_${e}_${r}_${E}`)})})]})}),v&&o.jsx(a.FormControl,{fullWidth:!0,children:o.jsx(Je,{...v})},`form_control_${e}_${f}`)]})}const ha=new Wt;bo.use(bo.Plugins.AutoResize,{min:100}),bo.unuse(bo.Plugins.Clear);function ri({propertyKey:e,value:r,setValue:t,error:i,showError:s,disabled:n,autoFocus:l,touched:c,property:A,tableMode:u,includeDescription:f,context:g,shouldAlwaysRerender:y}){const[w,h]=d.useState(r),p=d.useDeferredValue(w),v=d.useDeferredValue(r);return d.useEffect(()=>{h(r)},[r]),d.useEffect(()=>{p!==v&&t(p)},[p,v,t]),o.jsxs(pa,{required:A.validation?.required,error:s,fullWidth:!0,children:[!u&&o.jsx(a.FormHelperText,{filled:!0,children:o.jsx(we,{property:A})}),o.jsx(bo,{value:w??"",readOnly:n,renderHTML:B=>ha.render(B),view:{menu:!0,md:!0,html:!1},onChange:({html:B,text:C})=>{h(C??null)}}),o.jsx(a.Box,{display:"flex",children:o.jsxs(a.Box,{flexGrow:1,children:[s&&typeof i=="string"&&o.jsx(a.FormHelperText,{children:i}),f&&o.jsx(ye,{property:A})]})})]})}const pa=ue.styled(a.FormControl)(({theme:e})=>`
  @font-face {
    font-family: rmel-iconfont;
    src: url(data:application/vnd.ms-fontobject;base64,fBkAAMAYAAABAAIAAAAAAAIABQMAAAAAAAABAJABAAAAAExQAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAB9vj4gAAAAAAAAAAAAAAAAAAAAAAABoAcgBtAGUAbAAtAGkAYwBvAG4AZgBvAG4AdAAAAA4AUgBlAGcAdQBsAGEAcgAAABYAVgBlAHIAcwBpAG8AbgAgADEALgAwAAAAGgByAG0AZQBsAC0AaQBjAG8AbgBmAG8AbgB0AAAAAAAAAQAAAAsAgAADADBHU1VCsP6z7QAAATgAAABCT1MvMj3jT5QAAAF8AAAAVmNtYXBA5I9dAAACPAAAAwhnbHlmMImhbQAABXwAAA9gaGVhZBtQ+k8AAADgAAAANmhoZWEH3gObAAAAvAAAACRobXR4aAAAAAAAAdQAAABobG9jYTX6MgAAAAVEAAAANm1heHABMAB7AAABGAAAACBuYW1lc9ztwgAAFNwAAAKpcG9zdCcpv64AABeIAAABNQABAAADgP+AAFwEAAAAAAAEAAABAAAAAAAAAAAAAAAAAAAAGgABAAAAAQAA4uPbB18PPPUACwQAAAAAANwY2ykAAAAA3BjbKQAA//8EAAMBAAAACAACAAAAAAAAAAEAAAAaAG8ADAAAAAAAAgAAAAoACgAAAP8AAAAAAAAAAQAAAAoAHgAsAAFERkxUAAgABAAAAAAAAAABAAAAAWxpZ2EACAAAAAEAAAABAAQABAAAAAEACAABAAYAAAABAAAAAAABBAABkAAFAAgCiQLMAAAAjwKJAswAAAHrADIBCAAAAgAFAwAAAAAAAAAAAAAAAAAAAAAAAAAAAABQZkVkAEDnbe2iA4D/gABcA4AAgAAAAAEAAAAAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAUAAAADAAAALAAAAAQAAAHMAAEAAAAAAMYAAwABAAAALAADAAoAAAHMAAQAmgAAABYAEAADAAbnbelB7TztRe1h7XXteO2A7Y3tov//AADnbelB7TvtRO1f7W/td+2A7Yztn///AAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAWABYAFgAYABoAHgAqACwALAAuAAAAAQAEAAUAAwAGAAcACAAJAAoACwAMAA0ADgAPABAAEQASABMAAgAUABUAFgAXABgAGQAAAQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAABPAAAAAAAAAAZAADnbQAA520AAAABAADpQQAA6UEAAAAEAADtOwAA7TsAAAAFAADtPAAA7TwAAAADAADtRAAA7UQAAAAGAADtRQAA7UUAAAAHAADtXwAA7V8AAAAIAADtYAAA7WAAAAAJAADtYQAA7WEAAAAKAADtbwAA7W8AAAALAADtcAAA7XAAAAAMAADtcQAA7XEAAAANAADtcgAA7XIAAAAOAADtcwAA7XMAAAAPAADtdAAA7XQAAAAQAADtdQAA7XUAAAARAADtdwAA7XcAAAASAADteAAA7XgAAAATAADtgAAA7YAAAAACAADtjAAA7YwAAAAUAADtjQAA7Y0AAAAVAADtnwAA7Z8AAAAWAADtoAAA7aAAAAAXAADtoQAA7aEAAAAYAADtogAA7aIAAAAZAAAAAABmAMwBHgGEAbwB/gJmAsgC/gM0A3IDogRABKgE7gUuBXAFygYKBmoGpAbEBugHRgewAAAABQAAAAADVgLWAAsAGAAlADQAQAAAEyEyFhQGByEuATQ2Fz4BNyEeARQGIyEiJgM0NjchHgEUBiMhIiY3PgEzITIeARQOASMhIiYnFhQPAQYmNRE0NhfWAlQSGRkS/awSGRnaARgTAWASGRkS/qASGfQZEgJUEhkZEv2sEhnzARgTAWAMFAsLFAz+oBIZOQgIkgseHgsC1RklGAEBGCUZ8hMYAQEYJRkZ/oUTGAEBGCUZGdkSGQsVFxQMGoYGFgaVDAwRASoRDAwAAAAADAAAAAADqwKrAA8AEwAXABsAHwAjACcAMwA3ADsAPwBDAAABIQ4BBwMeARchPgE3ES4BBTMVIxUzFSMnMxUjFTMVKwI1MzUjNTMBISImNDYzITIWFAY3IzUzNSM1MxcjNTM1IzUzA1X9ViQwAQEBMSQCqiQxAQEx/lxWVlZWgFZWVlYqVlZWVgFV/wASGBgSAQASGBgZVlZWVoBWVlZWAqsBMST+ViQxAQExJAGqJDF/VipW1lYqVlYqVv6AGCQZGSQYqlYqVtZWKlYAAwAAAAADKwMAAA8AHwAzAAAlHgEXIT4BNxEuASchDgEHMyEyFhcRDgEHIS4BJxE+ASUnJisBIg8BIyIGFBYzITI2NCYjAQABMCQBViQwAQEwJP6qJDABgAEAExcBARcT/wATFwEBFwEoHgsStBILHmsTFxcTAgARGRkRVSQwAQEwJAGrJDABATAkFxT+qxEZAQEZEQFVFBfVHg0NHhcnFxcnFwADAAAAAAOrAtkAFgAtAD4AAAEVBg8BBiIvASY0PwEnJjQ/ATYyHwEWBTc2NC8BJiIPAQYHFRYfARYyPwE2NCcBJyYGBwMGFh8BFjY3EzYmJwOrAQmwBxEHHgYGk5MGBh4HEQewCf0PkwYGHwYSBrAJAQEJsAcRBx4GBgFCKQkPBOMCBwgoCQ8E4gMHCQGIEA0KsAYGHgcRBpOTBhIGHgYGsAoVkwYRBx4GBrAKDRANCrAGBh4GEgYB2Q8DBwj9jAgQAw4DBwgCcwgPBAACAAAAAAOaAm8AEAAhAAAlJzc2NCYiDwEGFB8BFjI2NCU3JyY0NjIfARYUDwEGIiY0AXOmpg0ZJAzEDQ3EDiEaAQ2mpg0aIQ7EDQ3EDiEa2qamDiEaDcQNIg3EDRohDqamDCQZDcQNIg3EDRkkAAAAAwAAAAADuAKsAAsAFwAjAAABDgEHHgEXPgE3LgEDLgEnPgE3HgEXDgEDDgEHHgEXPgE3LgECAJjrNTXrmJjrNTXrmFZwAgJwVlZwAgJwVjRDAQFDNDRDAQFDAqwCpIaGpAICpIaGpP4OAnBWVnACAnBWVnABPgFDNDRDAQFDNDRDAAAABQAAAAADgAKrAAsAFwAjADAAQAAAEyEyNjQmIyEiBhQWFyE+ATQmJyEOARQWEyEyNjQmIyEiBhQWJx4BFyE+ATQmJyEOASUhHgEXEQ4BByEuATURNDarAQATFxcT/wARGRkRAQATFxcT/wARGRkRAQATFxcT/wARGRkaARkRAQATFxcT/wARGQHUAQARGQEBGRH/ABMXFwEAFycXFycXqwEZIhkBARkiGQFVFycXFycX1RMXAQEXJhcBARcYARcT/gARGQEBGRECABMXAAAAAAMAAAAAA6sCVgAZACYAQAAAASMiBhQWOwEeARcOAQcjIgYUFjsBPgE3LgEFHgEXIT4BNCYnIQ4BFyMuASc+ATczMjY0JisBDgEHHgEXMzI2NCYC1YASGBgSgDdIAQFIN4ASGBgSgFt4AwN4/iUBGBIBABIYGBL/ABIYVYA3SAEBSDeAEhgYEoBbeAMDeFuAEhgYAlUYJBkBSTY2SQEZJBgCeFtbeNMSGAEBGCQYAQEYkgFJNjZJARkkGAJ4W1t4AhgkGQABAAAAAAOsAisAHgAAAS4BJw4BBwYWFxY2Nz4BNzIWFwcGFhczPgE3NS4BBwMSO5ZVh9Q4ChMXFCMJK6FnP28sURMTHu4SGAECMRYBvDQ6AQKJchcqCAYPElZpASslUhYxAgEYEu8dFBMAAAABAAAAAAOyAisAHgAAAQ4BBycmBgcVHgEXMz4BLwE+ATMeARceATc+AScuAQIUVZY7URYxAgEYEu4eFBNSLW8+Z6ErCSQTFxMKOdMCKwE6NFAUFB3vEhgBAjEWUiUrAWlWEg8GCCoXcokAAAADAAAAAAL1Ar8AFAAcACQAAAE+ATcuAScjDgEHER4BFyE+ATc0JiUzHgEUBgcjEyM1Mx4BFAYCkyEpAQJmTu8UGQEBGRQBB0lpAjT+1IgdJycdiJ+fnx0nJwGKF0QkTmYCARoT/d4TGgECYUk1UtkBJjsmAf7viQEmOyYAAQAAAAADEgK/ABwAAAEeARczAyMOARQWFzM+ATQmJyMTMz4BNCYnIw4BAaUBJh0hnDsdJiYd5B0mJh0hnDsdJiYd5B0mAnodJgH+lAEmOicBASc6JgEBbAEmOicBAScABgAAAAADlgLWAAsAFwAjAEEAUgBuAAABIT4BNCYnIQ4BFBYBIQ4BFBYXIT4BNCYDIQ4BFBYXIT4BNCYFIyIGFBY7ARUjIgYUFjsBFSMiBhQWOwEyNjc1LgEDMxUeATI2PQE0JisBIgYUFhcjIgYUFjsBBwYdARQWOwEyNjQmKwE3Nj0BLgEBawIAEhgYEv4AEhkZAhL+ABIZGRICABIYGBL+ABIZGRICABIYGP1YVQkMDAlAFQoLCwoVQAkMDAlVCgsBAQtfFQELEwwMCSsJDAxeVQkMDAk3RwUMCVUKCwsKN0gFAQsCVQEYJBgBARgkGP5VARgkGAEBGCQYAQEBGCQYAQEYJBjVDBIMFgwSDBYMEgwMCYAJDAHWawkMDAmACQwMEgzWDBIMVAYICQkMDBIMVAYICQkMAAAAAAYAAAAAA4sCwAAIABEAGgAmADIAPwAAEw4BFBYyNjQmAw4BFBYyNjQmAw4BFBYyNjQmFyE+ATQmJyEOARQWNyE+ATQmJyEOARQWAx4BFyE+ATQmJyEOAbUbJCQ3JCQcGyQkNyQkHBskJDYlJI8CABIYGBL+ABIYGBICABIYGBL+ABIYGBkBGBICABIYGBL+ABIYAcABJDYkJDYkAQEBJDYkJDYk/gEBJDYkJDYkagEYJBgBARgkGP8BGCQYAQEYJBgBKhIYAQEYJBgBARgAAAACAAAAAANWAlYAFgAtAAAlMjY/ATY9AS4BKwEiBh0BFBYXMwcGFgUyNj8BNj0BNCYrASIGBxUeARczBwYWATIRGwc9CQEYEqsSGBgSViwOIAHMEBsIPAkYEqsSGAEBGBJVLA0gqxEOeRIUwhIYGBKrEhgBWB4zAREOeRIUwhIYGBKrEhgBWB4zAAAAAAMAAAAAA4ACwAAIABkAJQAAJT4BNzUjFR4BAR4BFzMVMzUzPgE0JichDgEDIT4BNCYnIQ4BFBYCACQwAaoBMP75ASQblqqWGyQkG/4qGyQrAqoSGRkS/VYSGRlAATAkKyskMAI/GyQBgIABJDYkAQEk/noBGCQYAQEYJBgAAAAAAgAA//8DKwMBABsAKAAAJT4BNxEuASIGBxEUBgcGLgI1ES4BIgYHER4BBx4BMyEyNjQmIyEiBgIiYnoCAR4tHgFBNSFBNR0BHi0eAQOm1AEYEgIAEhgYEv4AEhitD5NlARcWHh4W/uQ3UwwHDys8IwEgFh4eFv7gdpR2EhkZJBgYAAAAAwAAAAADcALHAAsALQA5AAATIT4BNCYjISIGFBYFISIGFBYXITIWFxYGByM1LgEPAQYUHwEWNjc1Mz4BJy4BBSMiBhQWFzM+ATQmwAJVEhkZEv2rEhgYAgv+BxIYGBICBiAzBgUxKGABGQtMBgZMDBgBVU1iBQhk/m2rEhgYEqsSGBgCcQEYJBgYJBisGCQYAScgKTkCIg8KCkwHEQdMCgoPIgJrTkRV/xgkGAEBGCQYAAAAAgAAAAADlgLAABQAKAAAARQWFzMRHgEyNjcRMz4BNCYnIQ4BAzMVFBYyNjc1MzI2NCYnIQ4BFBYBayQclQEkNiQBlRwkJBz+VhwkwEAkNyQBQBskJBv/ABwkJAKAGyQB/kAbJCQbAcABJDYkAQEk/tDrGyQkG+skNyQBASQ3JAAKAAAAAAN4AvgADwAWABoAIQAlACkALQA0ADgAPwAAASEOAQcRHgEXIT4BNxEuAQEjIiY9ATM1IzUzNSM1NDY7ARMjNTM1IzUzNSM1MxMjNTMVFAY3IzUzNSM1MzIWFQMs/aggKgEBKiACWCAqAQEq/h5xDxaWlpaWFg9x4ZaWlpaWlrxxlhYWlpaWcQ8WAvcBKiD9qCAqAQEqIAJYICr9XhYPcUuWS3EPFv2olkuWS5b9qJZxDxbhlkuWFg8AAAACAAD//wOAAwAADwAgAAAlES4BJyEOAQcRHgEXIT4BJRc3NjIfARYGIyEiJj8BPgEDgAEwJP2qJDABATAkAlYkMP39WYUHFAeVCAwN/gEOCwhqBxRVAlYkMAEBMCT9qiQwAQEw+2yqCAnHCxcXC4kIAQAAAAEAAAAAAzUCNgAQAAABBwYUFjI/ARcWMjY0LwEmIgHZ/hAhLBHX1xEsIRD+EC4CJv4RLCEQ19cQISwR/hAAAAABAAAAAAM1AjYAEgAAAQcnJiciDgEWHwEWMj8BNjQuAQLW1tcQFxEbDQYM/hEsEf4QIS0CJtfXDwESICAM/hAQ/hAtIAEAAAAEAAAAAANrAusAEAAhADMARAAANzMVFBYyNj0BNCYrASIGFBYTIyIGFBY7ATI2PQE0JiIGFQEyNj0BMzI2NCYrASIGHQEUFhM1NCYiBh0BFBY7ATI2NCYjyWgeLB0dFpwWHR1+aBYdHRacFh0dLB4BahYeaBYdHRacFh0dSh4sHR0WnBYdHRaxaBYdHRacFh0dLB4Bnh4sHR0WnBYdHRb9Xx0WaB4sHR0WnBYdAjloFh0dFpwWHR0sHgAAAAQAAAAAA1QC1AARACMANABGAAATDgEHFR4BFzM+ATQmKwE1NCYnPgE9ATMyNjQmJyMOAQcVHgEBIyIGFBYXMz4BNzUuASIGFQMeATsBFRQWMjY3NS4BJyMOAd0VGwEBGxWRFRsbFWEcFBQcYRUbGxWRFRsBARsCK2EVGxsVkRUbAQEbKRySARsVYRwpGwEBGxWRFRsBHwEbFZEVGwEBGykcYRUbwwEbFWEcKRsBARsVkRUb/qscKRsBARsVkRUbGxUBtRQcYRUbGxWRFRsBARsAAAAAAAASAN4AAQAAAAAAAAAVAAAAAQAAAAAAAQANABUAAQAAAAAAAgAHACIAAQAAAAAAAwANACkAAQAAAAAABAANADYAAQAAAAAABQALAEMAAQAAAAAABgANAE4AAQAAAAAACgArAFsAAQAAAAAACwATAIYAAwABBAkAAAAqAJkAAwABBAkAAQAaAMMAAwABBAkAAgAOAN0AAwABBAkAAwAaAOsAAwABBAkABAAaAQUAAwABBAkABQAWAR8AAwABBAkABgAaATUAAwABBAkACgBWAU8AAwABBAkACwAmAaUKQ3JlYXRlZCBieSBpY29uZm9udApybWVsLWljb25mb250UmVndWxhcnJtZWwtaWNvbmZvbnRybWVsLWljb25mb250VmVyc2lvbiAxLjBybWVsLWljb25mb250R2VuZXJhdGVkIGJ5IHN2ZzJ0dGYgZnJvbSBGb250ZWxsbyBwcm9qZWN0Lmh0dHA6Ly9mb250ZWxsby5jb20ACgBDAHIAZQBhAHQAZQBkACAAYgB5ACAAaQBjAG8AbgBmAG8AbgB0AAoAcgBtAGUAbAAtAGkAYwBvAG4AZgBvAG4AdABSAGUAZwB1AGwAYQByAHIAbQBlAGwALQBpAGMAbwBuAGYAbwBuAHQAcgBtAGUAbAAtAGkAYwBvAG4AZgBvAG4AdABWAGUAcgBzAGkAbwBuACAAMQAuADAAcgBtAGUAbAAtAGkAYwBvAG4AZgBvAG4AdABHAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAHMAdgBnADIAdAB0AGYAIABmAHIAbwBtACAARgBvAG4AdABlAGwAbABvACAAcAByAG8AagBlAGMAdAAuAGgAdAB0AHAAOgAvAC8AZgBvAG4AdABlAGwAbABvAC4AYwBvAG0AAAAAAgAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAaAQIBAwEEAQUBBgEHAQgBCQEKAQsBDAENAQ4BDwEQAREBEgETARQBFQEWARcBGAEZARoBGwADdGFiCGtleWJvYXJkBmRlbGV0ZQpjb2RlLWJsb2NrBGNvZGUKdmlzaWJpbGl0eQp2aWV3LXNwbGl0BGxpbmsEcmVkbwR1bmRvBGJvbGQGaXRhbGljDGxpc3Qtb3JkZXJlZA5saXN0LXVub3JkZXJlZAVxdW90ZQ1zdHJpa2V0aHJvdWdoCXVuZGVybGluZQR3cmFwCWZvbnQtc2l6ZQRncmlkBWltYWdlC2V4cGFuZC1sZXNzC2V4cGFuZC1tb3JlD2Z1bGxzY3JlZW4tZXhpdApmdWxsc2NyZWVuAAAAAAA=);
    src: url(data:font/ttf;base64,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) format("truetype")
  }

  .rmel-iconfont {
    font-family: rmel-iconfont !important;
    font-size: 16px;
    font-style: normal;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale
  }

  .rmel-icon-tab:before {
    content: "\\e76d"
  }

  .rmel-icon-keyboard:before {
    content: "\\ed80"
  }

  .rmel-icon-delete:before {
    content: "\\ed3c"
  }

  .rmel-icon-code-block:before {
    content: "\\e941"
  }

  .rmel-icon-code:before {
    content: "\\ed3b"
  }

  .rmel-icon-visibility:before {
    content: "\\ed44"
  }

  .rmel-icon-view-split:before {
    content: "\\ed45"
  }

  .rmel-icon-link:before {
    content: "\\ed5f"
  }

  .rmel-icon-redo:before {
    content: "\\ed60"
  }

  .rmel-icon-undo:before {
    content: "\\ed61"
  }

  .rmel-icon-bold:before {
    content: "\\ed6f"
  }

  .rmel-icon-italic:before {
    content: "\\ed70"
  }

  .rmel-icon-list-ordered:before {
    content: "\\ed71"
  }

  .rmel-icon-list-unordered:before {
    content: "\\ed72"
  }

  .rmel-icon-quote:before {
    content: "\\ed73"
  }

  .rmel-icon-strikethrough:before {
    content: "\\ed74"
  }

  .rmel-icon-underline:before {
    content: "\\ed75"
  }

  .rmel-icon-wrap:before {
    content: "\\ed77"
  }

  .rmel-icon-font-size:before {
    content: "\\ed78"
  }

  .rmel-icon-grid:before {
    content: "\\ed8c"
  }

  .rmel-icon-image:before {
    content: "\\ed8d"
  }

  .rmel-icon-expand-less:before {
    content: "\\ed9f"
  }

  .rmel-icon-expand-more:before {
    content: "\\eda0"
  }

  .rmel-icon-fullscreen-exit:before {
    content: "\\eda1"
  }

  .rmel-icon-fullscreen:before {
    content: "\\eda2"
  }

  .rc-md-editor {
    padding-bottom: 1px;
    position: relative;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    overflow: hidden;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -ms-flex-direction: column;
    flex-direction: column;
            border-radius: 6px;
            background-color: ${ao(e)};
  }

  .rc-md-editor.full {
    width: 100%;
    height: 100% !important;
    position: fixed;
    left: 0;
    top: 0;
    z-index: 1000
  }

  .rc-md-editor .editor-container {
    -webkit-box-flex: 1;
    -webkit-flex: 1;
    -ms-flex: 1;
    flex: 1;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    width: 100%;
    min-height: 0;
    position: relative;
                background-color: ${ao(e)};

  }

  .rc-md-editor .editor-container > .section {
    -webkit-box-flex: 1;
    -webkit-flex-grow: 1;
    -ms-flex-positive: 1;
    flex-grow: 1;
    -webkit-flex-shrink: 1;
    -ms-flex-negative: 1;
    flex-shrink: 1;
    -webkit-flex-basis: 1px;
    -ms-flex-preferred-size: 1px;
    flex-basis: 1px;
    padding: 4px;
    
            border: none
  }

  .rc-md-editor .editor-container > .section.in-visible {
    display: none
  }

  .rc-md-editor .editor-container > .section > .section-container {
    padding: 8x 16px 16px
  }
  
  .rc-md-editor .editor-container > .section:last-child {
    border-radius: unset
  }

  .rc-md-editor .editor-container .sec-md {
    min-height: 0;
    min-width: 0
  }

  .rc-md-editor .editor-container .sec-md .input {
    display: block;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    width: 100%;
    height: 100%;
    overflow-y: scroll;
    border: none;
    resize: none;
    outline: none;
    min-height: 0;
    color: inherit;
    font-size: 14px;
    line-height: 1.7;   
             background-color: ${ao(e)};

  }

  .rc-md-editor .editor-container .sec-html {
    min-height: 0;
    min-width: 0;         
       background-color: ${ao(e)};

  }

  .rc-md-editor .editor-container .sec-html .html-wrap {
    height: 100%;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    overflow: auto
  }

  .custom-html-style {
    color: inherit
  }

  .custom-html-style h1 {
    font-size: 32px;
    padding: 0;
    border: none;
    font-weight: 700;
    margin: 32px 0;
    line-height: 1.2
  }

  .custom-html-style h2 {
    font-size: 24px;
    padding: 0;
    border: none;
    font-weight: 700;
    margin: 24px 0;
    line-height: 1.7
  }

  .custom-html-style h3 {
    font-size: 18px;
    margin: 18px 0;
    padding: 0;
    line-height: 1.7;
    border: none
  }

  .custom-html-style p {
    font-size: 14px;
    line-height: 1.7;
    margin: 8px 0
  }

  .custom-html-style a {
    color: ${a.darken(e.palette.text.secondary,0)}
  }

  .custom-html-style a:hover {
    text-decoration: none
  }

  .custom-html-style strong {
    font-weight: 700
  }

  .custom-html-style ol, .custom-html-style ul {
    font-size: 14px;
    line-height: 28px;
    padding-left: 36px
  }

  .custom-html-style li {
    margin-bottom: 8px;
    line-height: 1.7
  }

  .custom-html-style hr {
    margin-top: 20px;
    margin-bottom: 20px;
    border: 0;
    border-top: 1px solid ${e.palette.divider}
  }

  .custom-html-style pre {
    display: block;
    padding: 20px;
    line-height: 28px;
    word-break: break-word
  }

  .custom-html-style code, .custom-html-style pre {
    background-color: ${a.darken(e.palette.background.default,.1)};
    font-size: 14px;
    border-radius: 0;
    overflow-x: auto
  }

  .custom-html-style code {
    padding: 3px 0;
    margin: 0;
    word-break: normal
  }

  .custom-html-style code:after, .custom-html-style code:before {
    letter-spacing: 0
  }

  .custom-html-style blockquote {
    position: relative;
    margin: 16px 0;
    padding: 5px 8px 5px 30px;
    background: none repeat scroll 0 0 rgb(39 39 41);
    color: inherit;
    border: none;
    border-left: 10px solid #d6dbdf
  }

  .custom-html-style img, .custom-html-style video {
    max-width: 100%
  }

  .custom-html-style table {
    font-size: 14px;
    line-height: 1.7;
    max-width: 100%;
    overflow: auto;
    border: 1px solid ${e.palette.divider};
    border-collapse: collapse;
    border-spacing: 0;
    -webkit-box-sizing: border-box;
    box-sizing: border-box
  }

  .custom-html-style table td, .custom-html-style table th {
    word-break: break-all;
    word-wrap: break-word;
    white-space: normal
  }

  .custom-html-style table tr {
    border: 1px solid ${e.palette.divider}
  }

  .custom-html-style table tr:nth-of-type(2n) {
    background-color: transparent
  }

  .custom-html-style table th {
    text-align: center;
    font-weight: 700;
    border: 1px solid ${e.palette.divider};
    padding: 10px 6px;
    background-color: #f5f7fa;
    word-break: break-word
  }

  .custom-html-style table td {
    border: 1px solid ${e.palette.divider};
    text-align: left;
    padding: 10px 15px;
    word-break: break-word;
    min-width: 60px
  }

  .rc-md-editor .drop-wrap {
    display: block;
    position: absolute;
    left: 0;
    top: 28px;
    z-index: 2;
    min-width: 20px;
    padding: 10px 0;
    text-align: center;
    background-color: ${a.darken(e.palette.background.default,0)};
    border-color: ${e.palette.divider};
    border-style: solid;
    border-width: 1px
  }

  .rc-md-editor .drop-wrap.hidden {
    display: none !important
  }

  .rc-md-editor .rc-md-navigation {
    min-height: 38px;
    padding: 0 8px;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    border-bottom: 1px solid ${e.palette.divider};
    font-size: 16px;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
    -webkit-flex-direction: row;
    -ms-flex-direction: row;
    flex-direction: row;
    -webkit-box-pack: justify;
    -webkit-justify-content: space-between;
    -ms-flex-pack: justify;
    justify-content: space-between;
    
            color: "inherit",
            background-color: ${e.palette.mode==="light","rgb(39 39 41)"};
        
  }

  .rc-md-editor .rc-md-navigation.in-visible {
    display: none
  }

  .rc-md-editor .rc-md-navigation .navigation-nav {
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
    font-size: 14px;
    color: ${a.darken(e.palette.text.secondary,0)};
  }

  .rc-md-editor .rc-md-navigation .button-wrap, .rc-md-editor .rc-md-navigation .navigation-nav {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
    -webkit-flex-direction: row;
    -ms-flex-direction: row;
    flex-direction: row
  }

  .rc-md-editor .rc-md-navigation .button-wrap {
    -webkit-flex-wrap: wrap;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap
  }

  .rc-md-editor .rc-md-navigation .button-wrap .button {
    position: relative;
    min-width: 22px;
    height: 28px;
    margin-left: 3px;
    margin-right: -2px;
    display: inline-block;
    cursor: pointer;
    line-height: 28px;
    text-align: center;
    color: ${e.palette.text.secondary};
  }

  .rc-md-editor .rc-md-navigation .button-wrap .button:hover {
    color: ${a.darken(e.palette.text.secondary,.2)};
  }

  .rc-md-editor .rc-md-navigation .button-wrap .button.disabled {
    color: ${a.darken(e.palette.text.disabled,0)};
    cursor: not-allowed
  }

  .rc-md-editor .rc-md-navigation .button-wrap .button:first-of-type {
    margin-left: 0
  }

  .rc-md-editor .rc-md-navigation .button-wrap .button:last-child {
    margin-right: 0
  }

  .rc-md-editor .rc-md-navigation .button-wrap .rmel-iconfont {
    font-size: 18px
  }

  .rc-md-editor .rc-md-navigation li, .rc-md-editor .rc-md-navigation ul {
    list-style: none;
    margin: 0;
    padding: 0
  }

  .rc-md-editor .rc-md-navigation .h1, .rc-md-editor .rc-md-navigation .h2, .rc-md-editor .rc-md-navigation .h3, .rc-md-editor .rc-md-navigation .h4, .rc-md-editor .rc-md-navigation .h5, .rc-md-editor .rc-md-navigation .h6, .rc-md-editor .rc-md-navigation h1, .rc-md-editor .rc-md-navigation h2, .rc-md-editor .rc-md-navigation h3, .rc-md-editor .rc-md-navigation h4, .rc-md-editor .rc-md-navigation h5, .rc-md-editor .rc-md-navigation h6 {
    font-family: inherit;
    font-weight: 500;
    color: inherit;
    padding: 0;
    margin: 0;
    line-height: 1.1
  }

  .rc-md-editor .rc-md-navigation h1 {
    font-size: 34px
  }

  .rc-md-editor .rc-md-navigation h2 {
    font-size: 30px
  }

  .rc-md-editor .rc-md-navigation h3 {
    font-size: 24px
  }

  .rc-md-editor .rc-md-navigation h4 {
    font-size: 18px
  }

  .rc-md-editor .rc-md-navigation h5 {
    font-size: 14px
  }

  .rc-md-editor .rc-md-navigation h6 {
    font-size: 12px
  }

  .rc-md-editor .tool-bar {
    position: absolute;
    z-index: 1;
    right: 8px;
    top: 8px
  }

  .rc-md-editor .tool-bar .button {
    min-width: 24px;
    height: 28px;
    margin-right: 5px;
    display: inline-block;
    cursor: pointer;
    font-size: 14px;
    line-height: 28px;
    text-align: center;
    color: #999
  }

  .rc-md-editor .tool-bar .button:hover {
    color: inherit
  }

  .rc-md-editor .rc-md-divider {
    display: block;
    width: 1px;
    background-color: ${a.darken(e.palette.background.paper,0)}
  }

  .rc-md-editor .table-list.wrap {
    position: relative;
    margin: 0 10px;
    -webkit-box-sizing: border-box;
    box-sizing: border-box
  }

  .rc-md-editor .table-list.wrap .list-item {
    position: absolute;
    top: 0;
    left: 0;
    display: inline-block;
    width: 20px;
    height: 20px;
    background-color: ${a.darken(e.palette.background.paper,.05)};
    border-radius: 4px
  }

  .rc-md-editor .table-list.wrap .list-item.active {
    background: ${a.lighten(e.palette.background.paper,.2)}
  }

  .rc-md-editor .tab-map-list .list-item {
    width: 120px;
    -webkit-box-sizing: border-box;
    box-sizing: border-box
  }

  .rc-md-editor .tab-map-list .list-item:hover {
    background: ${a.darken(e.palette.background.default,.1)}
  }

  .rc-md-editor .tab-map-list .list-item.active {
    font-weight: 700
  }

  .rc-md-editor .header-list .list-item {
    width: 100px;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    padding: 8px 0
  }

  .rc-md-editor .header-list .list-item:hover {
    background: ${a.darken(e.palette.background.default,.1)}
  }

`);Be.addMethod(Be.array,"uniqueInArray",function(e=t=>t,r){return this.test("uniqueInArray",r,t=>!t||t.length===new Set(t.map(e)).size)});function ti(e,r,t){const i={};return Object.entries(r).forEach(([s,n])=>{i[s]=xo({property:n,customFieldValidator:t,name:s,entityId:e})}),Be.object().shape(i)}function xo(e){const r=e.property;if(Qe(r))throw console.error("Error in property",e),Error("Trying to create a yup mapping from a property builder. Please use resolved properties only");if(r.dataType==="string")return ya(e);if(r.dataType==="number")return wa(e);if(r.dataType==="boolean")return xa(e);if(r.dataType==="map")return ba(e);if(r.dataType==="array")return ma(e);if(r.dataType==="date")return Ca(e);if(r.dataType==="geopoint")return va(e);if(r.dataType==="reference")return Ba(e);throw console.error("Unsupported data type in yup mapping",r),Error("Unsupported data type in yup mapping")}function ba({property:e,entityId:r,customFieldValidator:t,name:i}){const s={};return e.validation,e.properties&&Object.entries(e.properties).forEach(([n,l])=>{s[n]=xo({property:l,parentProperty:e,customFieldValidator:t,name:`${i}[${n}]`,entityId:r})}),Be.object().shape(s)}function ya({property:e,parentProperty:r,customFieldValidator:t,name:i,entityId:s}){let n=Be.string();const l=e.validation;if(e.enumValues&&(l?.required&&(n=n.required(l?.requiredMessage?l.requiredMessage:"Required")),n=n.oneOf(Yo(e.enumValues).map(c=>c.id))),l){if(n=l.required?n.required(l?.requiredMessage?l.requiredMessage:"Required").nullable(!0):n.notRequired().nullable(!0),l.unique&&t&&i&&(n=n.test("unique","This value already exists and should be unique",(c,A)=>t({name:i,property:e,parentProperty:r,value:c,entityId:s}))),(l.min||l.min===0)&&(n=n.min(l.min,`${e.name} must be min ${l.min} characters long`)),(l.max||l.max===0)&&(n=n.max(l.max,`${e.name} must be max ${l.max} characters long`)),l.matches){const c=typeof l.matches=="string"?Yn(l.matches):l.matches;c&&(n=n.matches(c,l.matchesMessage?{message:l.matchesMessage}:void 0))}l.trim&&(n=n.trim()),l.lowercase&&(n=n.lowercase()),l.uppercase&&(n=n.uppercase()),e.email&&(n=n.email(`${e.name} must be an email`)),e.url&&(n=n.url(`${e.name} must be a url`))}else n=n.notRequired().nullable(!0);return n}function wa({property:e,parentProperty:r,customFieldValidator:t,name:i,entityId:s}){const n=e.validation;let l=Be.number().typeError("Must be a number");return n?(l=n.required?l.required(n.requiredMessage?n.requiredMessage:"Required").nullable(!0):l.notRequired().nullable(!0),n.unique&&t&&i&&(l=l.test("unique","This value already exists and should be unique",c=>t({name:i,property:e,parentProperty:r,value:c,entityId:s}))),(n.min||n.min===0)&&(l=l.min(n.min,`${e.name} must be higher or equal to ${n.min}`)),(n.max||n.max===0)&&(l=l.max(n.max,`${e.name} must be lower or equal to ${n.max}`)),(n.lessThan||n.lessThan===0)&&(l=l.lessThan(n.lessThan,`${e.name} must be higher than ${n.lessThan}`)),(n.moreThan||n.moreThan===0)&&(l=l.moreThan(n.moreThan,`${e.name} must be lower than ${n.moreThan}`)),n.positive&&(l=l.positive(`${e.name} must be positive`)),n.negative&&(l=l.negative(`${e.name} must be negative`)),n.integer&&(l=l.integer(`${e.name} must be an integer`))):l=l.notRequired().nullable(!0),l}function va({property:e,parentProperty:r,customFieldValidator:t,name:i,entityId:s}){let n=Be.object();const l=e.validation;return l?.unique&&t&&i&&(n=n.test("unique","This value already exists and should be unique",c=>t({name:i,property:e,parentProperty:r,value:c,entityId:s}))),l?.required?n=n.required(l.requiredMessage).nullable(!0):n=n.notRequired().nullable(!0),n}function Ca({property:e,parentProperty:r,customFieldValidator:t,name:i,entityId:s}){if(e.autoValue)return Be.object().nullable();let n=Be.date();const l=e.validation;return l?(n=l.required?n.required(l?.requiredMessage?l.requiredMessage:"Required"):n.notRequired(),l.unique&&t&&i&&(n=n.test("unique","This value already exists and should be unique",c=>t({name:i,property:e,parentProperty:r,value:c,entityId:s}))),l.min&&(n=n.min(l.min,`${e.name} must be after ${l.min}`)),l.max&&(n=n.max(l.max,`${e.name} must be before ${l.min}`))):n=n.notRequired(),n.transform(c=>c instanceof Date?c:null).nullable()}function Ba({property:e,parentProperty:r,customFieldValidator:t,name:i,entityId:s}){let n=Be.object();const l=e.validation;return l?(n=l.required?n.required(l?.requiredMessage?l.requiredMessage:"Required").nullable(!0):n.notRequired().nullable(!0),l.unique&&t&&i&&(n=n.test("unique","This value already exists and should be unique",c=>t({name:i,property:e,parentProperty:r,value:c,entityId:s})))):n=n.notRequired().nullable(!0),n}function xa({property:e,parentProperty:r,customFieldValidator:t,name:i,entityId:s}){let n=Be.boolean();const l=e.validation;return l?(n=l.required?n.required(l?.requiredMessage?l.requiredMessage:"Required").nullable(!0):n.notRequired().nullable(!0),l.unique&&t&&i&&(n=n.test("unique","This value already exists and should be unique",c=>t({name:i,property:e,parentProperty:r,value:c,entityId:s})))):n=n.notRequired().nullable(!0),n}function Ea(e){return e.validation?.uniqueInArray?!0:e.dataType==="map"&&e.properties?Object.entries(e.properties).filter(([r,t])=>t.validation?.uniqueInArray):!1}function ma({property:e,parentProperty:r,customFieldValidator:t,name:i,entityId:s}){let n=Be.array();if(e.of)if(Array.isArray(e.of)){const c=e.of.map((A,u)=>({[`${i}[${u}]`]:xo({property:A,parentProperty:e,entityId:s})})).reduce((A,u)=>({...A,...u}),{});return Be.array().of(Be.mixed().test("Dynamic object validation","Dynamic object validation error",(A,u)=>c[u.path].validate(A)))}else{n=n.of(xo({property:e.of,parentProperty:e,entityId:s}));const c=Ea(e.of);c&&(typeof c=="boolean"?n=n.uniqueInArray(A=>A,`${e.name} should have unique values within the array`):Array.isArray(c)&&c.forEach(([A,u])=>{n=n.uniqueInArray(f=>f&&f[A],`${e.name}  ${u.name??A}: should have unique values within the array`)}))}const l=e.validation;return l?(n=l.required?n.required(l?.requiredMessage?l.requiredMessage:"Required").nullable(!0):n.notRequired().nullable(!0),(l.min||l.min===0)&&(n=n.min(l.min,`${e.name} should be min ${l.min} entries long`)),l.max&&(n=n.max(l.max,`${e.name} should be max ${l.max} entries long`))):n=n.notRequired().nullable(!0),n}const ka=({containerRef:e})=>{const{isSubmitting:r,isValidating:t,errors:i}=Ce.useFormikContext();return d.useEffect(()=>{const s=Object.keys(i);if(s.length>0&&r&&!t){const n=e?.current?.querySelector(`#form_field_${s[0]}`);if(n&&e?.current){const l=ni(e.current);if(l){const A=n.getBoundingClientRect().top;l.scrollTo({top:l.scrollTop+A-64,behavior:"smooth"})}const c=n.querySelector("input");c&&c.focus()}}},[r,t,i,e]),null},Sa=e=>{const r=e&&e.scrollHeight>e.clientHeight,t=e?window.getComputedStyle(e).overflowY:null,i=t&&t.indexOf("hidden")!==-1;return r&&!i},ni=e=>!e||e===document.body?document.body:Sa(e)?e:ni(e.parentNode),pe=({collection:e,path:r,entityId:t,values:i,previousValues:s,userConfigPersistence:n,fields:l})=>{const c=n?.getCollectionConfig(r),A=_e(c,"properties"),u=Co(e.properties),f=i??u,g=s??i??u,y=Object.entries(e.properties).map(([p,v])=>({[p]:ke({propertyOrBuilder:v,values:f,previousValues:g,path:r,propertyValue:f?Ce.getIn(f,p):void 0,entityId:t,fields:l})})).filter(p=>p!==null).reduce((p,v)=>({...p,...v}),{}),w=Fe(y,A),h=Object.entries(w).filter(([p,v])=>Boolean(v?.dataType)).map(([p,v])=>({[p]:v})).reduce((p,v)=>({...p,...v}),{});return{...e,properties:h,originalCollection:e}};function ke({propertyOrBuilder:e,propertyValue:r,fromBuilder:t=!1,...i}){if(typeof e=="object"&&"resolved"in e)return e;let s=null;if(e)if(Qe(e)){const n=i.path;if(!n)throw Error("Trying to resolve a property builder without specifying the entity path");const l=e({...i,path:n,propertyValue:r,values:i.values??{},previousValues:i.previousValues??i.values??{}});if(!l)return console.debug("Property builder not returning `Property` so it is not rendered",n,i.entityId,e),null;s=ke({...i,propertyOrBuilder:l,fromBuilder:!0})}else{const n=e;if(n.dataType==="map"&&n.properties){const l=Kr({...i,properties:n.properties,propertyValue:r});s={...n,fromBuilder:t,properties:l}}else n.dataType==="array"?s=Ve({property:n,propertyValue:r,fromBuilder:t,...i}):(n.dataType==="string"||n.dataType==="number")&&n.enumValues&&(s=Rr(n,t))}else return null;if(s||(s={...e,resolved:!0,fromBuilder:t}),s.fieldConfig){const n=i.fields;if(!n)throw Error("Trying to resolve a property that inherits from a custom field but no custom fields were provided. Use the property `fields` in your top level component to provide them");const l=n[s.fieldConfig];if(!l)throw Error(`Trying to resolve a property that inherits from a custom field but no custom field with id ${s.fieldConfig} was found. Check the \`fields\` in your top level component`);if(l.defaultProperty){const c=ke({propertyOrBuilder:l.defaultProperty,propertyValue:r,...i});c&&(s=Fe(c,s))}l.Field&&(s.Field=l.Field)}return s}function Ve({property:e,propertyValue:r,...t}){if(e.of){if(Array.isArray(e.of))return{...e,resolved:!0,fromBuilder:t.fromBuilder,resolvedProperties:e.of.map((i,s)=>ke({propertyOrBuilder:i,propertyValue:Array.isArray(r)?r[s]:void 0,...t}))};{const i=e.of,s=Array.isArray(r)?r.map((l,c)=>ke({propertyOrBuilder:i,propertyValue:l,index:c,...t})).filter(l=>Boolean(l)):[],n=ke({propertyOrBuilder:i,propertyValue:void 0,...t});if(!n)throw Error("When using a property builder as the 'of' prop of an ArrayProperty, you must return a valid child property");return{...e,resolved:!0,fromBuilder:t.fromBuilder,of:n,resolvedProperties:s}}}else if(e.oneOf){const i=e.oneOf?.typeField??Uo,s=Array.isArray(r)?r.map((l,c)=>{const A=l&&l[i],u=e.oneOf?.properties[A];return!A||!u?null:ke({propertyOrBuilder:u,propertyValue:r,...t})}).filter(l=>Boolean(l)):[],n=Kr({properties:e.oneOf.properties,propertyValue:void 0,...t});return{...e,resolved:!0,oneOf:{...e.oneOf,properties:n},fromBuilder:t.fromBuilder,resolvedProperties:s}}else{if(e.Field)return{...e,resolved:!0,fromBuilder:t.fromBuilder};throw Error("The array property needs to declare an 'of' or a 'oneOf' property, or provide a custom `Field`")}}function Kr({properties:e,propertyValue:r,...t}){return Object.entries(e).map(([i,s])=>({[i]:ke({propertyOrBuilder:s,propertyValue:r&&typeof r=="object"?r[i]:void 0,...t})})).filter(i=>i!==null).reduce((i,s)=>({...i,...s}),{})}function Rr(e,r){return typeof e.enumValues=="object"?{...e,resolved:!0,enumValues:Eo(e.enumValues)?.filter(t=>t&&t.id&&t.label)??[],fromBuilder:r??!1}:e}function Eo(e){return typeof e=="object"?Object.entries(e).map(([r,t])=>typeof t=="string"?{id:r,label:t}:t):Array.isArray(e)?e:void 0}const ii="CustomIdField",et={input:`${ii}-input`,select:`${ii}-select`},Ia=ue.styled(a.FormControl)(({theme:e})=>({[`& .${et.input}`]:{minHeight:"64px"},[`& .${et.select}`]:{paddingTop:e.spacing(1/2)}}));function Fa({customId:e,entityId:r,status:t,onChange:i,error:s,entity:n}){const l=t==="existing"||!e,c=t!=="existing"&&!e,A=d.useMemo(()=>{if(!(!e||typeof e=="boolean"||e==="optional"))return Eo(e)},[e]),u=Pe(),{copy:f}=gn({onSuccess:h=>u.open({type:"success",message:`Copied ${h}`})}),g=R(),y={sx:{minHeight:"64px"},endAdornment:n?o.jsxs(a.InputAdornment,{position:"end",children:[o.jsx(a.IconButton,{onClick:h=>f(n.id),"aria-label":"copy-id",size:"large",children:o.jsx(a.Tooltip,{title:"Copy",children:o.jsx("svg",{className:"MuiSvgIcon-root MuiSvgIcon-fontSizeSmall",fill:"currentColor",width:"20",height:"20",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})})})}),g?.entityLinkBuilder&&o.jsx("a",{href:g.entityLinkBuilder({entity:n}),rel:"noopener noreferrer",target:"_blank",children:o.jsx(a.IconButton,{onClick:h=>h.stopPropagation(),"aria-label":"go-to-datasource",size:"large",children:o.jsx(a.Tooltip,{title:"Open in the console",children:o.jsx(po,{fontSize:"small"})})})})]}):void 0},w={label:c?"ID is set automatically":"ID",disabled:l,name:"id",type:null,value:(n&&t==="existing"?n.id:r)??"",variant:"filled"};return Ks.createElement(Ia,{fullWidth:!0,error:s,...w,key:"custom-id-field"},A&&o.jsxs(o.Fragment,{children:[o.jsx(a.InputLabel,{id:"id-label",children:w.label}),o.jsx(a.Select,{labelId:"id-label",fullWidth:!0,className:et.select,error:s,...w,onChange:h=>i(h.target.value),children:A.map(h=>o.jsx(a.MenuItem,{value:h.id,children:`${h.id} - ${h.label}`},`custom-id-item-${h.id}`))})]}),!A&&o.jsx(a.TextField,{...w,error:s,InputProps:y,helperText:e==="optional"?"Autogenerated ID, it can be manually changed":t==="new"||t==="copy"?"ID of the new document":"ID of the document",onChange:h=>{let p=h.target.value;return p&&(p=p.trim()),i(p.length?p:void 0)}}),o.jsx(Ce.ErrorMessage,{name:"id",component:"div",children:h=>"You need to specify an ID"}))}const Ta=function({status:r,path:t,collection:i,entity:s,onEntitySave:n,onDiscard:l,onModified:c,onValuesChanged:A}){const u=R(),f=Ee(),g=d.useMemo(()=>pe({collection:i,path:t,values:s?.values,fields:u.fields}),[s?.values,i,t]),y=(r==="new"||r==="copy")&&Boolean(g.customId)&&g.customId!=="optional",w=d.useMemo(()=>r==="new"||r==="copy"?y?void 0:f.generateEntityId(t):s?.id,[]),h=d.useRef(!1),p=d.useMemo(()=>{const G=g.properties;if((r==="existing"||r==="copy")&&s)return s.values??Co(G);if(r==="new")return Co(G);throw console.error({status:r,entity:s}),new Error("Form has not been initialised with the correct parameters")},[r,g,s]),[v,B]=d.useState(w),[C,E]=d.useState(!1),[x,k]=d.useState(),[S,m]=d.useState(s?.values??p),[I,D]=d.useState(S),P=G=>{D(G),A&&A(G)},T=d.useMemo(()=>pe({collection:i,path:t,entityId:v,values:I,previousValues:S,fields:u.fields}),[i,t,v,I,S]),Q=T.callbacks?.onIdUpdate;d.useEffect(()=>{if(Q&&I&&(r==="new"||r==="copy"))try{B(Q({collection:T,path:t,entityId:v,values:I,context:u}))}catch(G){console.error(G)}},[T,u,v,I,t,r]);const $=d.useMemo(()=>S&&r==="existing"?Object.entries(T.properties).map(([G,F])=>{if(_o(F))return{};const L=S[G],W=p[G];return re(L,W)?{}:{[G]:W}}).reduce((G,F)=>({...G,...F}),{}):{},[p,T.properties,S,r]),q=d.useCallback((G,F)=>{if(y&&!v){console.error("Missing custom Id"),E(!0),F.setSubmitting(!1);return}if(k(void 0),E(!1),r==="existing"){if(!s?.id)throw Error("Form misconfiguration when saving, no id for existing entity")}else if(r==="new"||r==="copy"){if(T.customId&&T.customId!=="optional"&&!v)throw Error("Form misconfiguration when saving, entityId should be set")}else throw Error("New FormType added, check EntityForm");n?.({collection:T,path:t,entityId:v,values:G,previousValues:s?.values,closeAfterSave:h.current}).then(L=>{const W=r==="new"?"new_entity_saved":r==="copy"?"entity_copied":r==="existing"?"entity_edited":"unmapped_event";u.onAnalyticsEvent?.(W,{path:t}),m(G),F.resetForm({values:G,submitCount:0,touched:{}})}).catch(L=>{console.error(L),k(L)}).finally(()=>{h.current=!1,F.setSubmitting(!1)})},[r,t,T,s,n,y,v]),Y=d.useCallback(({name:G,value:F,property:L})=>f.checkUniqueField(t,G,F,L,v),[f,t,v]),V=d.useMemo(()=>v?ti(v,T.properties,Y):void 0,[v,T.properties]);return o.jsx(Ce.Formik,{initialValues:p,onSubmit:q,validateOnMount:!0,validationSchema:V,validate:G=>console.debug("Validating",G),onReset:()=>l&&l(),children:G=>o.jsx(o.Fragment,{children:o.jsxs(a.Box,{sx:F=>({paddingLeft:F.spacing(4),paddingRight:F.spacing(4),paddingTop:F.spacing(3),paddingBottom:F.spacing(4),marginBottom:F.spacing(2),[F.breakpoints.down("lg")]:{paddingLeft:F.spacing(2),paddingRight:F.spacing(2),paddingTop:F.spacing(2),paddingBottom:F.spacing(3)},[F.breakpoints.down("md")]:{padding:F.spacing(2)}}),children:[o.jsx(Fa,{customId:T.customId,entityId:v,status:r,onChange:B,error:C,entity:s}),v&&o.jsx(Da,{...G,initialValues:S,onModified:c,onValuesChanged:P,underlyingChanges:$,path:t,entity:s,entityId:v,collection:T,status:r,savingError:x,closeAfterSaveRef:h})]})})})},si=d.memo(Ta,(e,r)=>e.status===r.status&&e.path===r.path&&re(e.entity?.values,r.entity?.values));function Da({initialValues:e,values:r,onModified:t,onValuesChanged:i,underlyingChanges:s,entityId:n,entity:l,touched:c,setFieldValue:A,collection:u,path:f,isSubmitting:g,status:y,handleSubmit:w,savingError:h,dirty:p,errors:v,closeAfterSaveRef:B}){const C=p;d.useEffect(()=>{t&&t(C),i&&i(r)},[C,r]),d.useEffect(()=>{s&&l&&Object.entries(s).forEach(([m,I])=>{const D=r[m];!re(I,D)&&!c[m]&&(console.debug("Updated value from the datasource:",m,I),A(m,I!==void 0?I:null))})},[s,l,r,c,A]);const E={collection:u,entityId:n,values:r,path:f},x=o.jsx(a.Grid,{container:!0,spacing:4,children:Object.entries(u.properties).filter(([m,I])=>!_o(I)).map(([m,I])=>{const D=!!s&&Object.keys(s).includes(m)&&!!c[m],P=g||so(I)||Boolean(I.disabled),T=ot(I),Q={propertyKey:m,disabled:P,property:I,includeDescription:!0,underlyingValueHasChanged:D,context:E,tableMode:!1,partOfArray:!1,autoFocus:!1,shouldAlwaysRerender:T};return o.jsx(a.Grid,{item:!0,xs:12,id:`form_field_${m}`,children:o.jsx(Je,{...Q})},`field_${u.name}_${m}`)})}),k=g||!C&&y==="existing",S=d.createRef();return o.jsxs(Ce.Form,{onSubmit:w,noValidate:!0,children:[o.jsxs(a.Box,{sx:{mt:4},ref:S,children:[x,o.jsx(ka,{containerRef:S})]}),o.jsx(a.Box,{sx:{height:56}}),o.jsxs(We,{position:"absolute",children:[h&&o.jsx(a.Box,{textAlign:"right",children:o.jsx(a.Typography,{color:"error",children:h.message})}),y==="existing"&&o.jsx(a.Button,{variant:"text",color:"primary",disabled:k,type:"reset",children:"Discard"}),o.jsxs(a.Button,{variant:"text",color:"primary",type:"submit",disabled:k,onClick:()=>{B.current=!1},children:[y==="existing"&&"Save",y==="copy"&&"Create copy",y==="new"&&"Create"]}),o.jsxs(a.Button,{variant:"contained",color:"primary",type:"submit",disabled:k,onClick:()=>{B.current=!0},children:[y==="existing"&&"Save and close",y==="copy"&&"Create copy and close",y==="new"&&"Create and close"]})]})]})}const ot=e=>{const r=Boolean(e.Field)||e.fromBuilder;return e.dataType==="map"&&e.properties?r||Object.values(e.properties).some(t=>ot(t)):e.dataType==="array"&&Array.isArray(e.resolvedProperties)?r||e.resolvedProperties.some(t=>t&&ot(t)):r};function Ma({propertyKey:e,value:r,error:t,showError:i,isSubmitting:s,setValue:n,tableMode:l,property:c,includeDescription:A,underlyingValueHasChanged:u,context:f,disabled:g,shouldAlwaysRerender:y}){if(!Array.isArray(c.resolvedProperties))throw Error("ArrayCustomShapedFieldBinding misconfiguration. Property `of` not set");const w=c.expanded===void 0?!0:c.expanded;xe({property:c,value:r,setValue:n});const h=o.jsx(we,{property:c}),p=c.resolvedProperties.map((v,B)=>{const C={propertyKey:`${e}[${B}]`,disabled:g,property:v,includeDescription:A,underlyingValueHasChanged:u,context:f,tableMode:!1,partOfArray:!0,autoFocus:!1,shouldAlwaysRerender:v.fromBuilder};return o.jsx(a.Box,{pb:1,children:o.jsx(Je,{...C})},`custom_shaped_array_${B}`)});return o.jsxs(a.FormControl,{fullWidth:!0,error:i,children:[!l&&o.jsx(uo,{expanded:w,title:h,children:p}),l&&p,A&&o.jsx(ye,{property:c}),i&&typeof t=="string"&&o.jsx(a.FormHelperText,{children:t})]})}const li={text_field:{name:"Text field",description:"Simple short text",dataType:"string",Icon:ys,color:"#2d7ff9",Field:Ao},multiline:{name:"Multiline",description:"Text with multiple lines",dataType:"string",Icon:ws,color:"#2d7ff9",Field:Ao},markdown:{name:"Markdown",description:"Text with advanced markdown syntax",dataType:"string",Icon:Ds,color:"#2d7ff9",Field:ri},url:{name:"Url",description:"Text with URL validation",dataType:"string",Icon:Is,color:"#154fb3",Field:Ao},email:{name:"Email",description:"Text with email validation",dataType:"string",Icon:Ot,color:"#154fb3",Field:Ao},select:{name:"Select/enum",description:"Select one text value from within an enumeration",dataType:"string",Icon:Cs,color:"#4223c9",Field:jr},multi_select:{name:"Multi select",description:"Select multiple text values from within an enumeration",dataType:"array",Icon:ks,color:"#4223c9",Field:_r},number_input:{name:"Number input",description:"Simple number field with validation",dataType:"number",Icon:Ts,color:"#bec920",Field:Ao},number_select:{name:"Number select",description:"Select a number value from within an enumeration",dataType:"number",Icon:$t,color:"#bec920",Field:jr},multi_number_select:{name:"Multiple number select",description:"Select multiple number values from within an enumeration",dataType:"array",Icon:$t,color:"#bec920",Field:_r},file_upload:{name:"File upload",description:"Input for uploading single files",dataType:"string",Icon:xs,color:"#f92d9a",Field:Zr},multi_file_upload:{name:"Multiple file upload",description:"Input for uploading multiple files",dataType:"array",Icon:Es,color:"#f92d9a",Field:Zr},reference:{name:"Reference",description:"The value refers to a different collection",dataType:"reference",Icon:Ss,color:"#ff0042",Field:Kn},multi_references:{name:"Multiple references",description:"Multiple values that refer to a different collection",dataType:"array",Icon:vs,color:"#ff0042",Field:Wn},switch:{name:"Switch",description:"True or false field (or yes or no, 0 or 1...)",dataType:"boolean",Icon:Fs,color:"#20d9d2",Field:Zn},date_time:{name:"Date/time",description:"A date time select field",dataType:"date",Icon:Bs,color:"#8b46ff",Field:Xn},group:{name:"Group",description:"Group of multiple fields",dataType:"map",Icon:Ms,color:"#ff9408",Field:Rn},repeat:{name:"Repeat/list",description:"A field that gets repeated multiple times (e.g. multiple text fields)",dataType:"array",Icon:Gt,color:"#ff9408",Field:ei},custom_array:{name:"Custom array",description:"A field that saved its value as an array of custom objects",dataType:"array",Icon:Gt,color:"#ff9408",Field:Ma},block:{name:"Block",description:"A complex field that allows the user to compose different fields together, with a key->value format",dataType:"array",Icon:ms,color:"#ff9408",Field:oi}};function Zo(e){const r=ai(e);return r?li[r]:void 0}function ai(e){if(e.dataType==="string")return e.multiline?"multiline":e.markdown?"markdown":e.storage?"file_upload":e.url?"url":e.email?"email":e.enumValues?"select":"text_field";if(e.dataType==="number")return e.enumValues?"number_select":"number_input";if(e.dataType==="map"){if(e.properties)return"group"}else if(e.dataType==="array"){const r=e.of,t=e.oneOf;return Array.isArray(r)?"custom_array":Qe(r)?"repeat":r?.dataType==="string"&&r.enumValues?"multi_select":r?.dataType==="number"&&r.enumValues?"multi_number_select":r?.dataType==="string"&&r.storage?"multi_file_upload":r?.dataType==="reference"?"multi_references":t?"block":"repeat"}else{if(e.dataType==="boolean")return"switch";if(e.dataType==="date")return"date_time";if(e.dataType==="reference")return"reference"}console.error("Unsupported field config mapping",e)}function ci(e,r){const t=ke({propertyOrBuilder:e,fields:r});return t?t.dataType==="reference"?!0:t.dataType==="array"?Array.isArray(t.of)?!1:t.of?.dataType==="reference":!1:null}function di(e="inherit",r="inherit"){return o.jsx(hs,{color:e,fontSize:r})}function Ai(e,r,t){const i=e?.Icon??bs;return o.jsx(i,{color:r,fontSize:t})}function Xo(e,r="inherit",t="inherit"){if(Qe(e))return o.jsx(ps,{color:r,fontSize:t});{const i=Zo(e);return Ai(i,r,t)}}function Pa(e,r="inherit"){return o.jsx(a.Box,{sx:{background:e?.color??"#888",height:"32px",width:"32px",padding:.5,borderRadius:"50%",boxShadow:"0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)",color:"white"},children:Ai(e,r,"medium")})}function Qa(e){return Qe(e)?"#888":Zo(e)?.color??"#666"}function rt(e,r){if(typeof e=="object"){if(r in e)return e[r];if(r.includes(".")){const t=r.split("."),i=e[t[0]];if(typeof i=="object"&&i.dataType==="map"&&i.properties)return rt(i.properties,t.slice(1).join("."))}}}function tt(e,r){if(typeof e=="object"){if(r in e)return e[r];if(r.includes(".")){const t=r.split("."),i=e[t[0]];if(i.dataType==="map"&&i.properties)return tt(i.properties,t.slice(1).join("."))}}}const Ko={read:!0,edit:!0,create:!0,delete:!0};function Ro(e,r,t,i){const s=e.permissions;if(s===void 0)return Ko;if(typeof s=="object")return s;if(typeof s=="function")return s({entity:i,user:r.user,authController:r,collection:e,pathSegments:t});throw console.error("Permissions:",s),Error("New type of permission added and not mapped")}function nt(e,r,t,i){return Ro(e,r,t,i).edit??Ko.edit}function er(e,r,t,i){return Ro(e,r,t,i).create??Ko.create}function it(e,r,t,i){return Ro(e,r,t,i).delete??Ko.delete}function st(e){return Xt[e]}function or(e){if(e?.icon&&st(e.icon))return st(e.icon);const r=lt.length;return Xt[lt[bn(e.path)%r]]}const lt=["AcUnit","Adjust","AlignHorizontalCenter","Album","AllInclusive","AllOut","Animation","Assistant","Attractions","Audiotrack","AutoAwesome","AutoAwesomeMosaic","BeachAccess","Bolt","Brightness1","BreakfastDining","BrokenImage","Brightness5","Cable","CalendarViewMonth","CatchingPokemon","Casino","Category","Cloud","ColorLens","CreditCard","Coronavirus","Earbuds","EggAlt","FiberSmartRecord","Flag","Healing","HeatPump","Hive","Hub","LocalFireDepartment","LocalPizza","Memory","Outlet","Pages","PanoramaPhotosphere","SignalCellular0Bar","SportsBaseball","Storm","Stairs"];function La(e,r){if(r!==void 0&&r===1)return e;const t={"(quiz)$":"$1zes","^(ox)$":"$1en","([m|l])ouse$":"$1ice","(matr|vert|ind)ix|ex$":"$1ices","(x|ch|ss|sh)$":"$1es","([^aeiouy]|qu)y$":"$1ies","(hive)$":"$1s","(?:([^f])fe|([lr])f)$":"$1$2ves","(shea|lea|loa|thie)f$":"$1ves",sis$:"ses","([ti])um$":"$1a","(tomat|potat|ech|her|vet)o$":"$1oes","(bu)s$":"$1ses","(alias)$":"$1es","(octop)us$":"$1i","(ax|test)is$":"$1es","(us)$":"$1es","([^s]+)$":"$1s"},i={move:"moves",foot:"feet",goose:"geese",sex:"sexes",child:"children",man:"men",tooth:"teeth",person:"people"};if(["sheep","fish","deer","moose","series","species","money","rice","information","equipment","bison","cod","offspring","pike","salmon","shrimp","swine","trout","aircraft","hovercraft","spacecraft","sugar","tuna","you","wood"].indexOf(e.toLowerCase())>=0)return e;for(const n in i){const l=new RegExp(`${n}$`,"i"),c=i[n];if(l.test(e))return e.replace(l,c)}for(const n in t){const l=new RegExp(n,"i");if(l.test(e))return e.replace(l,t[n])}return e}function Ga(e,r){if(r!==void 0&&r!==1)return e;const t={"(quiz)zes$":"$1","(matr)ices$":"$1ix","(vert|ind)ices$":"$1ex","^(ox)en$":"$1","(alias)es$":"$1","(octop|vir)i$":"$1us","(cris|ax|test)es$":"$1is","(shoe)s$":"$1","(o)es$":"$1","(bus)es$":"$1","([m|l])ice$":"$1ouse","(x|ch|ss|sh)es$":"$1","(m)ovies$":"$1ovie","(s)eries$":"$1eries","([^aeiouy]|qu)ies$":"$1y","([lr])ves$":"$1f","(tive)s$":"$1","(hive)s$":"$1","(li|wi|kni)ves$":"$1fe","(shea|loa|lea|thie)ves$":"$1f","(^analy)ses$":"$1sis","((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$":"$1$2sis","([ti])a$":"$1um","(n)ews$":"$1ews","(h|bl)ouses$":"$1ouse","(corpse)s$":"$1","(us)es$":"$1",s$:""},i={move:"moves",foot:"feet",goose:"geese",sex:"sexes",child:"children",man:"men",tooth:"teeth",person:"people"};if(["sheep","fish","deer","moose","series","species","money","rice","information","equipment","bison","cod","offspring","pike","salmon","shrimp","swine","trout","aircraft","hovercraft","spacecraft","sugar","tuna","you","wood"].indexOf(e.toLowerCase())>=0)return e;for(const n in i){const l=new RegExp(`${i[n]}$`,"i");if(l.test(e))return e.replace(l,n)}for(const n in t){const l=new RegExp(n,"i");if(l.test(e))return e.replace(l,t[n])}return e}function at(e,r,t,i=3){const s=Object.keys(e.properties);let n=t?.filter(l=>s.includes(l));return n&&n.length>0?n:(n=s,n.filter(l=>{const c=e.properties[l];return c&&!Qe(c)&&!ci(c,r)}).slice(0,i))}const rr="EntityPreview",Te={property:`${rr}-property`,valuePreview:`${rr}-valuePreview`,iconCell:`${rr}-iconCell`,titleCell:`${rr}-titleCell`},$a=ue.styled(a.TableContainer)(({theme:e})=>({[`& .${Te.property}`]:{display:"flex"},[`& .${Te.valuePreview}`]:{height:"72px",padding:e.spacing(2,3)},[`& .${Te.iconCell}`]:{paddingTop:e.spacing(1)},[`& .${Te.titleCell}`]:{width:"25%",padding:e.spacing(1)}}));function ct({entity:e,collection:r,path:t}){const i=R(),s=To.useMemo(()=>pe({collection:r,path:t,entityId:e.id,values:e.values,fields:i.fields}),[r,t,e]),n=R(),l=s.properties;return o.jsx($a,{children:o.jsx(a.Table,{"aria-label":"entity table",children:o.jsxs(a.TableBody,{children:[o.jsxs(a.TableRow,{children:[o.jsx(a.TableCell,{align:"right",component:"td",scope:"row",className:Te.titleCell,children:o.jsx(a.Typography,{variant:"caption",color:"textSecondary",children:"Id"})}),o.jsx(a.TableCell,{padding:"none",className:Te.iconCell,children:di("disabled","small")}),o.jsx(a.TableCell,{className:Te.valuePreview,children:o.jsxs(a.Box,{display:"flex",alignItems:"center",children:[e.id,n?.entityLinkBuilder&&o.jsx("a",{href:n.entityLinkBuilder({entity:e}),rel:"noopener noreferrer",target:"_blank",children:o.jsx(a.IconButton,{"aria-label":"go-to-entity-datasource",size:"large",children:o.jsx(po,{fontSize:"small"})})})]})})]}),r&&Object.entries(l).map(([c,A])=>{const u=e.values[c];return o.jsxs(a.TableRow,{children:[o.jsx(a.TableCell,{align:"right",component:"td",scope:"row",className:Te.titleCell,children:o.jsx(a.Typography,{sx:{paddingLeft:2},variant:"caption",color:"textSecondary",children:A.name})}),o.jsx(a.TableCell,{padding:"none",className:Te.iconCell,children:Xo(A,"disabled","small")}),o.jsx(a.TableCell,{className:Te.valuePreview,children:o.jsx(oe,{children:o.jsx(be,{propertyKey:c,value:u,entity:e,property:A,size:"regular"})})})]},"entity_prev"+A.name+c)})]})})})}function Oa(e){return e.dataType==="boolean"?"center":e.dataType==="number"?e.enumValues?"left":"right":e.dataType==="date"?"right":"left"}function ui(e){if(e.columnWidth)return e.columnWidth;if(e.dataType==="string")return e.url?280:e.storage?220:e.enumValues?200:e.multiline||e.markdown?300:(e.email,200);if(e.dataType==="array"){const r=e;return r.of?Array.isArray(e.of)?300:ui(r.of):300}else return e.dataType==="number"?e.enumValues?200:140:e.dataType==="map"?360:e.dataType==="date"?160:e.dataType==="reference"?220:e.dataType==="boolean"?140:200}function fi(e){return`subcollection:${e.alias??e.path}`}function Ya(e){const{disabled:r,value:t,multiline:i,updateValue:s,focused:n}=e,[l,c]=d.useState(t),A=d.useRef(!1),u=d.useCallback(()=>{!t&&!l||l!==t&&s(l)},[l,t]);Nr(l,u,3e3),d.useEffect(()=>{!n&&t!==l&&c(t)},[t,n]);const f=d.createRef();return d.useEffect(()=>{f.current&&n&&!A.current?(A.current=!0,f.current.focus({preventScroll:!0}),f.current.selectionStart=f.current.value.length,f.current.selectionEnd=f.current.value.length):A.current=n},[n,f]),o.jsx(a.TextareaAutosize,{ref:f,disabled:r,style:{padding:0,margin:0,width:"100%",color:"unset",fontWeight:"unset",lineHeight:"unset",fontSize:"unset",fontFamily:"unset",background:"unset",border:"unset",resize:"none",outline:"none"},value:l??"",onChange:g=>{const y=g.target.value;(i||!y.endsWith(`
`))&&c(y)},onBlur:()=>{u()}})}function dt(e){const{name:r,enumValues:t,error:i,internalValue:s,disabled:n,small:l,focused:c,updateValue:A,multiple:u,valueType:f}=e,[g,y]=d.useState(!1),w=d.useCallback(()=>{y(!0)},[]),h=d.useCallback(()=>{y(!1)},[]),p=Array.isArray(s)&&u||!Array.isArray(s)&&!u,v=d.createRef();d.useEffect(()=>{v.current&&c&&v.current?.focus({preventScroll:!0})},[c,v]);const B=d.useCallback(E=>{if(f==="number")if(u){const x=E.target.value.map(k=>parseFloat(k));A(x)}else A(parseFloat(E.target.value));else if(f==="string")E.target.value?A(E.target.value):A(null);else throw Error("Missing mapping in TableSelect")},[u,A,f]),C=E=>u&&Array.isArray(E)?o.jsx(Wo,{value:E,name:r,enumValues:t,size:l?"small":"regular"}):o.jsx(me,{enumKey:E,enumValues:t,small:l});return o.jsx(a.Select,{variant:"standard",inputRef:v,sx:{height:"100%"},open:g,disabled:n,multiple:u,onClose:h,onOpen:w,fullWidth:!0,inputProps:{sx:{height:"100% !important",display:"flex",alignItems:"center",padding:"0px 0 0px",background:"transparent !important"}},disableUnderline:!0,error:!!i,value:p?u?s.map(E=>E.toString()):s:u?[]:"",onChange:B,renderValue:C,children:Yo(t).map(E=>{const x=E.id,k=o.jsx(me,{enumKey:x,enumValues:t,small:!0});return u?o.jsxs(a.MenuItem,{value:x,disabled:Vo(E),dense:!0,children:[o.jsx(a.Checkbox,{checked:Array.isArray(s)&&s.map(S=>S.toString()).includes(x.toString())}),o.jsx(a.ListItemText,{primary:k})]},`select-${r}-${x}`):o.jsx(a.MenuItem,{value:x,disabled:Vo(E),dense:!0,children:k},`select-${r}-${x}`)})},`table_select_${r}`)}function Va(e){const{align:r,value:t,updateValue:i,focused:s,onBlur:n,disabled:l}=e,c=t&&typeof t=="number"?t.toString():"",[A,u]=d.useState(c),f=d.useCallback(()=>{if(A!==c)if(A!=null){const w=parseFloat(A);if(isNaN(w))return;w!=null&&i(w)}else i(null)},[A,t]);Nr(A,f,3e3),d.useEffect(()=>{!s&&c!==A&&u(t!=null?t.toString():null)},[t,s]);const g=d.createRef();d.useEffect(()=>{g.current&&s&&g.current.focus({preventScroll:!0})},[s,g]);const y=/^-?[0-9]+[,.]?[0-9]*$/;return o.jsx(a.Input,{inputRef:g,sx:{width:"100%",fontSize:"unset",fontFamily:"unset",background:"unset",border:"unset",resize:"none",outline:"none",padding:0,margin:0,color:"unset",fontWeight:"unset",lineHeight:"unset",textAlign:"right"},inputProps:{style:{textAlign:r}},disabled:l,disableUnderline:!0,value:A??"",onBlur:n,onChange:w=>{const h=w.target.value.replace(",",".");h.length===0&&u(null),(y.test(h)||h.startsWith("-"))&&u(h)}})}function Wa(e){const{disabled:r,internalValue:t,updateValue:i,focused:s}=e,n=d.createRef();return d.useEffect(()=>{n.current&&s&&n.current.focus({preventScroll:!0})},[s,n]),o.jsx(a.Switch,{inputRef:n,color:"secondary",checked:Boolean(t),disabled:r,onChange:l=>{const c=l.target.checked;i(c)}})}function za(e){const{disabled:r,error:t,mode:i,internalValue:s,updateValue:n}=e,l=i===void 0||i==="date_time"?gr.DateTimePicker:fr.DatePicker;return o.jsx(l,{value:s??null,disabled:r,onChange:c=>{n(c)},renderInput:c=>o.jsx(a.TextField,{...c,fullWidth:!0,variant:"standard",error:Boolean(t),style:{height:"100%"},InputProps:{...c.InputProps,style:{fontSize:14},disableUnderline:!0,endAdornment:o.jsx(a.Box,{sx:{pr:1},children:c.InputProps?.endAdornment})}}),InputAdornmentProps:{style:{fontSize:"small",height:26}}})}function gi(e){const{name:r,internalValue:t,updateValue:i,multiselect:s,path:n,size:l,previewProperties:c,title:A,disabled:u,forceFilter:f}=e,[g,y]=d.useState(!1),w=d.useCallback(()=>y(!0),[]),h=d.useCallback(()=>y(!1),[]),v=he().getCollection(n);if(!v)throw Error(`Couldn't find the corresponding collection view for the path: ${n}`);const B=d.useCallback(D=>{i(D?Bo(D):null)},[i]),C=d.useCallback(D=>{i(D.map(P=>Bo(P)))},[i]),E=t?Array.isArray(t)?t.map(D=>D.id):t.id?[t.id]:[]:[],x=Oo({multiselect:s,path:n,collection:v,onMultipleEntitiesSelected:C,onSingleEntitySelected:B,selectedEntityIds:E,forceFilter:f}),k=d.useCallback(()=>{u||x.open()},[u,x]),S=!t||Array.isArray(t)&&t.length===0,m=()=>t instanceof Ye?o.jsx(io,{onClick:u?void 0:k,size:He(l),reference:t,onHover:g,disabled:!n,previewProperties:c}):o.jsx(fe,{error:"Data is not a reference"}),I=()=>Array.isArray(t)?o.jsx(o.Fragment,{children:t.map((D,P)=>o.jsx(a.Box,{sx:{m:.5,width:"100%"},children:o.jsx(io,{onClick:u?void 0:k,size:"tiny",reference:D,onHover:g,disabled:!n,previewProperties:c})},`preview_array_ref_${r}_${P}`))}):o.jsx(fe,{error:"Data is not an array of references"});return v?o.jsxs(a.Box,{sx:{width:"100%"},onMouseEnter:w,onMouseMove:w,onMouseLeave:h,children:[t&&!s&&m(),t&&s&&I(),S&&o.jsxs(a.Button,{onClick:k,size:"small",variant:"outlined",color:"primary",children:["Edit ",A]})]}):o.jsx(fe,{error:"The specified collection does not exist"})}const Ua=e=>({transition:"background-color 200ms cubic-bezier(0.0, 0, 0.2, 1) 0ms",position:"relative",height:"100%",width:"100%",outline:0,display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:e?"start":"center",alignItems:"center",border:"2px solid",borderColor:"transparent"}),Na=e=>({background:"repeating-linear-gradient( 45deg, rgba(128, 128, 128, 0.2), rgba(128, 128, 128, 0.2) 10px, rgba(128, 128, 128, 0.25) 10px, rgba(128, 128, 128, 0.25) 20px) !important",borderRadius:`${e.shape.borderRadius}px`,border:"2px solid",borderColor:"transparent"}),Ha=e=>({background:"repeating-linear-gradient( 45deg, rgba(128, 128, 128, 0.2), rgba(128, 128, 128, 0.2) 10px, rgba(128, 128, 128, 0.25) 10px, rgba(128, 128, 128, 0.25) 20px) !important",borderColor:e.palette.success.light}),ja=e=>({borderColor:e.palette.error.light});function _a(e){const{propertyKey:r,error:t,value:i,disabled:s,property:n,entity:l,path:c,previewSize:A,updateValue:u}=e,f=ro(),{internalValue:g,setInternalValue:y,onFilesAdded:w,storage:h,onFileUploadComplete:p,storagePathBuilder:v,multipleFilesSupported:B}=Un({entityValues:l.values,entityId:l.id,path:c,property:n,propertyKey:r,storageSource:f,onChange:u,value:i,disabled:s});return o.jsx(Ja,{internalValue:g,setInternalValue:y,name:r,disabled:s,autoFocus:!1,property:n,onChange:u,entity:l,storagePathBuilder:v,storage:h,multipleFilesSupported:B,onFilesAdded:w,onFileUploadComplete:p,previewSize:A})}function Ja({property:e,name:r,internalValue:t,setInternalValue:i,entity:s,onChange:n,multipleFilesSupported:l,previewSize:c,disabled:A,autoFocus:u,storage:f,onFilesAdded:g,onFileUploadComplete:y,storagePathBuilder:w}){const[h,p]=d.useState(!1),v=l&&c==="regular"?"small":c;if(l){const Y=e;if(Array.isArray(Y.of))throw Error("Using array properties instead of single one in `of` in ArrayProperty");if(Y.of){if(Y.of.dataType!=="string")throw Error("Storage field using array must be of data type string")}else throw Error("Storage field using array must be of data type string")}const B=f?.metadata,C=Boolean(t),E=Pe(),{open:x,getRootProps:k,getInputProps:S,isDragActive:m,isDragAccept:I,isDragReject:D}=Vt.useDropzone({accept:f.acceptedFiles?f.acceptedFiles.map(Y=>({[Y]:[]})).reduce((Y,V)=>({...Y,...V}),{}):void 0,disabled:A,maxSize:f.maxSize,noClick:!0,noKeyboard:!0,onDrop:g,onDropRejected:(Y,V)=>{for(const G of Y)for(const F of G.errors)E.open({type:"error",message:`Error uploading file: File is larger than ${f.maxSize} bytes`})}}),{...P}=k(),T=l?"Drag 'n' drop some files here, or click here to edit":"Drag 'n' drop a file here, or click here edit",Q=l?e.of:e,$=d.useMemo(()=>to(v),[v]),q=a.useTheme();return o.jsxs(a.Box,{...P,onMouseEnter:()=>p(!0),onMouseMove:()=>p(!0),onMouseLeave:()=>p(!1),sx:{...Ua(C),...m?Na(q):{},...I?Ha(q):{},...D?ja(q):{}},children:[o.jsx("input",{autoFocus:u,...S()}),t.map((Y,V)=>{let G;return Y.storagePathOrDownloadUrl?G=o.jsx(qa,{property:Q,value:Y.storagePathOrDownloadUrl,entity:s,size:v},`storage_preview_${V}`):Y.file&&(G=o.jsx(_n,{entry:Y,metadata:B,storagePath:w(Y.file),onFileUploadComplete:y,imageSize:$,simple:!0},`storage_progress_${V}`)),G}),!t&&o.jsx(a.Box,{sx:{flexGrow:1,m:2,maxWidth:200},onClick:x,children:o.jsx(a.Typography,{sx:{color:Y=>Y.palette.mode==="light"?"#999":"#444"},variant:"body2",align:"center",children:T})}),h&&o.jsx(a.IconButton,{color:"inherit",size:"small",onClick:x,sx:{position:"absolute",bottom:2,right:2},children:o.jsx(Al,{sx:{width:16,height:16,fill:"#888"}})})]})}function qa({property:e,value:r,size:t,entity:i}){return o.jsx(a.Box,{m:1,position:"relative",children:r&&o.jsx(oe,{children:o.jsx(be,{value:r,property:e,entity:i,size:t})})})}function fo(e){switch(e){case"xl":return 400;case"l":return 280;case"m":return 140;case"s":return 80;case"xs":return 54;default:throw Error("Missing mapping for collection size -> height")}}function Za(e,r,t,i,s,n){if(e&&!t)return s.palette.mode==="dark"?a.lighten(s.palette.background.paper,.03):a.darken(s.palette.background.default,.02);if(n)return s.palette.mode==="dark"?a.lighten(s.palette.background.paper,.035):a.darken(s.palette.background.default,.025);if(r||i)return s.palette.mode==="dark"?a.lighten(s.palette.background.paper,.022):a.darken(s.palette.background.default,.008)}const Xa=qt.styled("div",{})(({theme:e,justifyContent:r,padding:t,border:i,width:s,alignItems:n,backgroundColor:l})=>({width:s??"100%",alignItems:n,backgroundColor:l,padding:t,border:i,justifyContent:r,display:"flex",position:"relative",height:"100%",borderRadius:"4px",overflow:"hidden",contain:"content",transition:"border-color 400ms ease-in-out, background-color 600ms ease"})),Ka=qt.styled("div",{})(({theme:e,justifyContent:r,scrollable:t,faded:i,fullHeight:s})=>({display:"flex",width:"100%",flexDirection:"column",height:s?"100%":void 0,justifyContent:r,overflow:t?"auto":void 0,WebkitMaskImage:i?"linear-gradient(to bottom, black 60%, transparent 100%)":void 0,maskImage:i?"linear-gradient(to bottom, black 60%, transparent 100%)":void 0,alignItems:i||t?"start":void 0})),At=d.memo(function({children:r,focused:t,size:i,selected:s,disabled:n,disabledTooltip:l,saved:c,selectedRow:A,error:u,align:f,allowScroll:g,openPopup:y,removePadding:w,fullHeight:h,onSelect:p,width:v,showExpandIcon:B=!0}){const[C,E]=zt(),x=a.useTheme(),k=d.createRef(),[S,m]=d.useState(!1),I=d.useMemo(()=>fo(i),[i]),[D,P]=d.useState(!1),[T,Q]=d.useState(c),$=!n&&u,q=d.createRef();d.useEffect(()=>{q.current&&t&&q.current.focus({preventScroll:!0})},[t]),d.useEffect(()=>{c&&Q(!0);const M=setTimeout(()=>{Q(!1)},500);return()=>{clearTimeout(M)}},[c]);let Y=x.spacing(0);if(!w)switch(i){case"l":case"xl":Y=x.spacing(2);break;case"m":Y=x.spacing(1);break;case"s":Y=x.spacing(.5);break;default:Y=x.spacing(.25);break}let V;switch(f){case"right":V="flex-end";break;case"center":V="center";break;case"left":default:V="flex-start"}const G=d.useCallback(()=>{if(y){const M=k&&k?.current?.getBoundingClientRect();y(M)}},[k]),F=d.useCallback(M=>{M.detail===3&&G()},[G]),L=d.useCallback(()=>{if(!p)return;const M=k&&k?.current?.getBoundingClientRect();n?p(void 0):!s&&M&&p(M)},[k,p,s,n]),W=d.useCallback(M=>{L(),M.stopPropagation()},[L]);d.useEffect(()=>{if(E){const M=E.height>I;S!==M&&m(M)}},[E,S,I]);const z=!$&&s;let ee;T?ee=`2px solid ${x.palette.success.light}`:z?ee="2px solid #5E9ED6":$?ee=`2px solid ${x.palette.error.light} !important`:ee="2px solid transparent";const j=!n&&g&&S,H=!n&&!g&&S,U=d.useCallback(()=>P(!0),[]),X=d.useCallback(()=>P(!1),[]);return o.jsxs(Xa,{tabIndex:s||n?void 0:0,ref:k,onFocus:W,onClick:F,onMouseEnter:U,onMouseMove:U,onMouseLeave:X,padding:Y,contain:j?"content":"size",border:ee,justifyContent:V,width:v,alignItems:n||!S?"center":void 0,backgroundColor:Za(D,A,n,T??!1,x,z??!1),children:[o.jsxs(oe,{children:[h&&!H&&r,(!h||H)&&o.jsx(Ka,{fullHeight:h??!1,justifyContent:V,scrollable:j??!1,faded:H,children:!h&&o.jsx("div",{ref:C,style:{display:"flex",width:"100%",justifyContent:V,height:h?"100%":void 0},children:r})})]}),n&&D&&l&&o.jsx(a.Box,{sx:{position:"absolute",top:4,right:4,fontSize:"14px"},children:o.jsx(a.Tooltip,{title:l,children:o.jsx(fl,{color:"disabled",fontSize:"inherit"})})}),($||B)&&o.jsxs(a.Box,{sx:{position:"absolute",top:"2px",right:"2px"},children:[s&&!n&&B&&o.jsx(a.IconButton,{ref:q,color:"inherit",size:"small",onClick:G,children:o.jsxs("svg",{className:"MuiSvgIcon-root MuiSvgIcon-fontSizeSmall",fill:"#888",width:"20",height:"20",viewBox:"0 0 24 24",children:[o.jsx("path",{className:"cls-2",d:"M20,5a1,1,0,0,0-1-1L14,4h0a1,1,0,0,0,0,2h2.57L13.29,9.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L18,7.42V10a1,1,0,0,0,1,1h0a1,1,0,0,0,1-1Z"}),o.jsx("path",{className:"cls-2",d:"M10.71,13.29a1,1,0,0,0-1.42,0L6,16.57V14a1,1,0,0,0-1-1H5a1,1,0,0,0-1,1l0,5a1,1,0,0,0,1,1h5a1,1,0,0,0,0-2H7.42l3.29-3.29A1,1,0,0,0,10.71,13.29Z"})]})}),$&&o.jsx(pn,{arrow:!0,placement:"left",title:$.message,children:o.jsx(ul,{fontSize:"inherit",color:"error"})})]})]})},re);function Ra(e){return e.dataType==="string"&&e.storage?!0:e.dataType==="array"?Array.isArray(e.of)?!1:e.of?.dataType==="string"&&e.of?.storage:!1}const ec=d.memo(function({propertyKey:r,columnIndex:t,customFieldValidator:i,value:s,property:n,align:l,width:c,height:A,collection:u,path:f,entity:g,readonly:y}){const w=Ee(),h=R(),{onValueChange:p,size:v,selectedCell:B,focused:C,select:E,setPopupCell:x,selectedEntityIds:k}=mc(),S=k?.includes(g.id)??!1,m=B?.columnIndex===t&&B?.entity.id===g.id,[I,D]=d.useState(s),P=d.useRef(s),[T,Q]=d.useState(),[$,q]=d.useState(!1),Y=d.useCallback(()=>{q(!0),setTimeout(()=>{q(!1)},100)},[]),V=Boolean(n.Field),G=Boolean(n.Preview),F=so(n),L=typeof n.disabled=="object"?n.disabled.disabledMessage:void 0,W=Boolean(n.disabled),z=d.useMemo(()=>xo({property:n,entityId:g.id,customFieldValidator:i,name:r}),[g.id,n,r]);d.useEffect(()=>{re(s,P.current)||(D(s),P.current=s,Y())},[Y,s]);const ee=d.useCallback(se=>{q(!1),z.validate(se).then(()=>{Q(void 0),p&&p({value:se,propertyKey:r,setError:Q,onValueUpdated:Y,entity:g,fullPath:f,collection:u,dataSource:w,context:h})}).catch(_=>{Q(_)})},[g,p,r,z]);d.useEffect(()=>{z.validate(I).catch(se=>{Q(se)})},[I,z]);const j=d.useCallback(se=>{let _;se===void 0?_=null:_=se,P.current=_,D(_),ee(_)},[ee]);xe({property:n,value:I,setValue:j});const H=d.useCallback(se=>{E(se?{columnIndex:t,width:c,height:A,entity:g,cellRect:se,propertyKey:r,collection:u}:void 0)},[u,t,g,A,r,E,c]),U=d.useCallback(se=>{x(se?{columnIndex:t,width:c,height:A,entity:g,cellRect:se,propertyKey:r,collection:u}:void 0)},[u,t,g,A,r,c]);let X,M=!1,K=!1,ae=!1,ie=!1;if(y||F)return o.jsx(At,{size:v,width:c,focused:C,saved:$,selectedRow:S,value:I,align:l??"left",disabledTooltip:L??(F?"Read only":void 0),disabled:!0,children:o.jsx(be,{width:c,height:fo(v),propertyKey:r,property:n,entity:g,value:s,size:He(v)})},`preview_cell_${r}_${g.id}`);if(!V&&(!G||m)){if(Ra(n))X=o.jsx(_a,{error:T,disabled:W,focused:C,property:n,entity:g,path:f,value:I,previewSize:He(v),updateValue:j,propertyKey:r}),K=!0,ie=!0,ae=!0;else if(m&&n.dataType==="number"){const _=n;_.enumValues?(X=o.jsx(dt,{name:r,multiple:!1,disabled:W,focused:C,valueType:"number",small:He(v)!=="regular",enumValues:_.enumValues,error:T,internalValue:I,updateValue:j}),ie=!0):(X=o.jsx(Va,{align:l,error:T,focused:C,disabled:W,value:I,updateValue:j}),M=!0)}else if(m&&n.dataType==="string"){const _=n;if(_.enumValues)X=o.jsx(dt,{name:r,multiple:!1,focused:C,disabled:W,valueType:"string",small:He(v)!=="regular",enumValues:_.enumValues,error:T,internalValue:I,updateValue:j}),ie=!0;else if(!_.storage&&!_.markdown){const Ge=!!_.multiline;X=o.jsx(Ya,{error:T,disabled:W,multiline:Ge,focused:C,value:I,updateValue:j}),M=!0}}else if(n.dataType==="boolean")X=o.jsx(Wa,{error:T,disabled:W,focused:C&&m,internalValue:I,updateValue:j});else if(n.dataType==="date")X=o.jsx(za,{name:r,error:T,disabled:W,mode:n.mode,focused:C,internalValue:I,updateValue:j}),M=!0;else if(n.dataType==="reference")typeof n.path=="string"&&(X=o.jsx(gi,{name:r,internalValue:I,updateValue:j,disabled:W,size:v,path:n.path,multiselect:!1,previewProperties:n.previewProperties,title:n.name,forceFilter:n.forceFilter})),M=!1;else if(n.dataType==="array"){const _=n;if(!_.of&&!_.oneOf)throw Error(`You need to specify an 'of' or 'oneOf' prop (or specify a custom field) in your array property ${r}`);_.of&&!Array.isArray(_.of)&&(_.of.dataType==="string"||_.of.dataType==="number"?m&&_.of.enumValues&&(X=o.jsx(dt,{name:r,multiple:!0,disabled:W,focused:C,small:He(v)!=="regular",valueType:_.of.dataType,enumValues:_.of.enumValues,error:T,internalValue:I,updateValue:j}),M=!0,ie=!0):_.of.dataType==="reference"&&(typeof _.of.path=="string"&&(X=o.jsx(gi,{name:r,disabled:W,internalValue:I,updateValue:j,size:v,multiselect:!0,path:_.of.path,previewProperties:_.of.previewProperties,title:_.of.name,forceFilter:_.of.forceFilter})),M=!1))}}return X||(M=!1,K=m&&!X&&!W&&!F,X=o.jsx(be,{width:c,height:A,entity:g,propertyKey:r,value:I,property:n,size:He(v)})),o.jsx(At,{size:v,width:c,focused:C,onSelect:H,selected:m,selectedRow:S,disabled:W||F,disabledTooltip:L??"Disabled",removePadding:ae,fullHeight:ie,saved:$,error:T,align:l,allowScroll:M,showExpandIcon:K,openPopup:W?void 0:U,value:I,children:X},`table_cell_${g.id}_${r}`)},oc);function oc(e,r){return e.height===r.height&&e.propertyKey===r.propertyKey&&e.align===r.align&&e.width===r.width&&re(e.property,r.property)&&re(e.value,r.value)&&re(e.entity.values,r.entity.values)}function rc({containerRef:e,x:r,y:t,onMove:i}){let s=0,n=0;const l=f=>{if(f.button!==0||!e.current||f.defaultPrevented)return;const{x:g,y}=e.current.getBoundingClientRect();s=f.screenX-g,n=f.screenY-y,document.addEventListener("mousemove",A),document.addEventListener("mouseup",c)},c=f=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",c),f.stopPropagation()},A=f=>{f.target.localName!=="input"&&(i(f.screenX-s,f.screenY-n),f.stopPropagation())},u=()=>{e.current&&(e.current.style.top=`${t}px`,e.current.style.left=`${r}px`)};d.useEffect(()=>{const f=e.current;return f&&f.addEventListener("mousedown",l),u(),()=>{f&&f.removeEventListener("mousedown",l)}})}function tc(){const[e,r]=d.useState({width:0,height:0});return d.useLayoutEffect(()=>{function t(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),e}const nc=({onResize:e})=>{const r=d.useRef(0),t=d.useRef(null),i=d.useRef(e);i.current=e;const s=d.useCallback(l=>{r.current&&cancelAnimationFrame(r.current),r.current=requestAnimationFrame(()=>{i.current(l)})},[]),n=d.useCallback(()=>{const l=t.current;l&&l.contentDocument&&l.contentDocument.defaultView&&l.contentDocument.defaultView.addEventListener("resize",s)},[s]);return d.useEffect(()=>{const l=t.current;return()=>{l&&l.contentDocument&&l.contentDocument.defaultView&&l.contentDocument.defaultView.removeEventListener("resize",s)}},[s]),o.jsx("object",{onLoad:n,ref:t,tabIndex:-1,type:"text/html",data:"about:blank",title:"",style:{position:"absolute",top:0,left:0,height:"100%",width:"100%",pointerEvents:"none",zIndex:-1,opacity:0}})};function We({children:e,position:r="sticky",maxWidth:t,translucent:i=!0}){const s=t?o.jsx(a.Container,{maxWidth:t,children:e}):e;return o.jsx(a.Box,{sx:n=>({background:i?n.palette.mode==="light"?"rgba(255,255,255,0.6)":a.alpha(n.palette.background.paper,.1):void 0,backdropFilter:i?"blur(8px)":void 0,borderTop:`1px solid ${n.palette.divider}`,py:1,px:2,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",position:r,bottom:0,right:0,left:0,textAlign:"right",zIndex:2,"& > *:not(:last-child)":{[n.breakpoints.down("md")]:{mr:n.spacing(1)},mr:n.spacing(2)}}),children:s})}function ic(e){return e.open?o.jsx(sc,{...e}):null}function sc({tableKey:e,entity:r,customFieldValidator:t,propertyKey:i,collection:s,path:n,cellRect:l,open:c,onClose:A,columnIndex:u,onCellValueChange:f}){const g=Ee(),y=R(),[w,h]=d.useState(),[p,v]=d.useState(),[B,C]=d.useState(r?.values),E=s?pe({collection:s,path:n,values:B,entityId:r?.id,fields:y.fields}):void 0,x=tc(),k=d.useRef(null),S=d.useRef(!1);rc({containerRef:k,x:p?.x,y:p?.y,onMove:(V,G)=>Q({x:V,y:G})}),d.useEffect(()=>{S.current=!1},[i,r]);const m=d.useCallback(()=>{if(!l)throw Error("getInitialLocation error");return{x:l.left<x.width-l.right?l.x+l.width/2:l.x-l.width/2,y:l.top<x.height-l.bottom?l.y+l.height/2:l.y-l.height/2}},[l,x.height,x.width]),I=d.useCallback(({x:V,y:G})=>{const F=k.current?.getBoundingClientRect();if(!F)throw Error("normalizePosition called before draggableBoundingRect is set");return{x:Math.max(0,Math.min(V,x.width-F.width)),y:Math.max(0,Math.min(G,x.height-F.height))}},[x]),D=d.useCallback(V=>{const G=k.current?.getBoundingClientRect();if(!l||!G)return;const F=I(V??m());(!p||F.x!==p.x||F.y!==p.y)&&v(F)},[l,m,I,p]);d.useEffect(()=>{S.current=!1},[i]),d.useLayoutEffect(()=>{const V=k.current?.getBoundingClientRect();!l||!V||S.current||(D(),S.current=!0)},[l,D,S.current]),d.useLayoutEffect(()=>{D(p)},[x,l]);const P=d.useMemo(()=>{if(!(!E||!r))return ti(r.id,i&&E.properties[i]?{[i]:E.properties[i]}:{},t)},[n,i,E,r]),T=d.useCallback(()=>D(p),[p,D]),Q=d.useCallback(V=>D(V),[D]),$=async V=>(h(null),s&&r&&f&&i?f({value:V[i],propertyKey:i,entity:r,setError:h,onValueUpdated:()=>{},fullPath:n,collection:s,dataSource:g,context:y}):Promise.resolve());if(!r)return o.jsx(o.Fragment,{});const q=r&&o.jsxs(a.Box,{sx:V=>({overflow:"auto",borderRadius:`${V.shape.borderRadius}px`,backgroundColor:V.palette.background.paper,visibility:c?void 0:"hidden",cursor:"grab"}),children:[o.jsx(Ce.Formik,{initialValues:r?.values??{},validationSchema:P,validateOnMount:!0,validate:V=>console.debug("Validating",V),onSubmit:(V,G)=>{$(V).then(()=>A()).finally(()=>G.setSubmitting(!1))},children:({handleChange:V,values:G,errors:F,touched:L,dirty:W,setFieldValue:z,setFieldTouched:ee,handleSubmit:j,isSubmitting:H})=>{if(re(G,B)||C(G),!r)return o.jsx(fe,{error:"PopupFormField misconfiguration"});if(!E)return o.jsx(o.Fragment,{});const U=H,X={collection:E,entityId:r.id,values:G,path:n},M=i&&E.properties[i],K=i&&M?{propertyKey:i,disabled:H||so(M)||!!M.disabled,property:M,includeDescription:!1,underlyingValueHasChanged:!1,context:X,tableMode:!0,partOfArray:!1,autoFocus:c,shouldAlwaysRerender:!0}:void 0;return o.jsx(a.Box,{sx:{width:520,maxWidth:"100vw",maxHeight:"85vh"},children:o.jsxs(Ce.Form,{onSubmit:j,noValidate:!0,children:[o.jsx(a.Box,{sx:{mb:1,padding:2,display:"flex",flexDirection:"column",position:"relative"},children:K&&o.jsx(Je,{...K})}),o.jsx(We,{children:o.jsx(a.Button,{variant:"contained",color:"primary",type:"submit",disabled:U,children:"Save"})})]})},`popup_form_${e}_${r.id}_${u}`)}}),w&&o.jsx(a.Typography,{color:"error",children:w.message})]}),Y=o.jsxs(a.Box,{sx:V=>({display:"inline-block",position:"fixed",zIndex:1300,boxShadow:"0 0 0 2px rgba(128,128,128,0.2)",backgroundColor:V.palette.background.paper,borderRadius:`${V.shape.borderRadius}px`,visibility:c?void 0:"hidden",cursor:"grab"}),ref:k,children:[o.jsx(nc,{onResize:T}),o.jsxs(a.Box,{sx:{overflow:"hidden"},children:[q,o.jsx(a.Box,{sx:{position:"absolute",top:-14,right:-14,backgroundColor:"#888",borderRadius:"32px"},children:o.jsx(a.IconButton,{size:"small",onClick:V=>{V.stopPropagation(),A()},children:o.jsx(Me,{sx:{color:"white"},fontSize:"small"})})})]})]},`draggable_${i}_${r.id}_${c}`);return o.jsx(a.Portal,{container:document.body,children:Y})}function qe(e){return o.jsx(a.Box,{display:"flex",width:"100vw",maxHeight:"100%",maxWidth:"100%",height:"100vh",children:o.jsx(a.Box,{m:"auto",children:o.jsx(a.CircularProgress,{...e})})})}const lc={"==":"==","!=":"!=",">":">","<":"<",">=":">=","<=":"<=",in:"in","array-contains":"Contains","array-contains-any":"Any"},ut=["array-contains-any","in"];function ac({name:e,value:r,setValue:t,dataType:i,isArray:s,enumValues:n,title:l}){const c=s?["array-contains"]:["==","!=",">","<",">=","<="];n&&(s?c.push("array-contains-any"):c.push("in"));const[A,u]=r||[c[0],void 0],[f,g]=d.useState(A),[y,w]=d.useState(u);function h(v,B){let C=B;const E=ut.includes(f),x=ut.includes(v);E!==x&&(C=x?typeof B=="string"||typeof B=="number"?[B]:[]:""),typeof C=="number"&&isNaN(C)&&(C=void 0),g(v),w(C);const k=C!==null&&Array.isArray(C)?C.length>0:C!==void 0;t(v&&k?[v,C]:void 0)}const p=ut.includes(f);return o.jsxs(a.Box,{display:"flex",width:340,alignItems:"center",children:[o.jsx(a.Box,{width:80,children:o.jsx(a.FormControl,{fullWidth:!0,children:o.jsx(a.Select,{value:f,fullWidth:!0,onChange:v=>{h(v.target.value,y)},children:c.map(v=>o.jsx(a.MenuItem,{value:v,children:lc[v]},`filter_op_${e}_${v}`))})})}),o.jsx(a.Box,{flexGrow:1,ml:1,children:o.jsxs(a.FormControl,{fullWidth:!0,children:[!n&&o.jsx(a.OutlinedInput,{fullWidth:!0,type:i==="number"?"number":void 0,value:y!==void 0?y:"",onChange:v=>{const B=i==="number"?parseFloat(v.target.value):v.target.value;h(f,B)}},`filter_${e}`),n&&o.jsx(a.Select,{fullWidth:!0,multiple:p,value:y!==void 0?y:s?[]:"",onChange:v=>h(f,i==="number"?parseInt(v.target.value):v.target.value),renderValue:p?v=>o.jsx("div",{children:v.map(B=>o.jsx(me,{enumKey:B,enumValues:n,small:!0},`select_value_${e}_${B}`))}):void 0,children:n.map(v=>o.jsx(a.MenuItem,{value:v.id,children:o.jsx(me,{enumKey:v.id,enumValues:n,small:!0})},`select_${e}_${v.id}`))},`filter-select-${p}-${e}`)]})}),y!==void 0&&o.jsx(a.Box,{ml:1,children:o.jsx(a.IconButton,{onClick:v=>h(f,void 0),size:"small",children:o.jsx(Nt,{title:`Clear ${l}`,children:o.jsx(Me,{fontSize:"small"})})})})]})}const hi="BooleanFilterField",ft={formControl:`${hi}-formControl`,label:`${hi}-label`},cc=ue.styled("div")(({theme:e})=>({[`& .${ft.formControl}`]:{width:"200px"},[`& .${ft.label}`]:{width:"100%",height:"100%"}}));function dc({name:e,title:r,value:t,setValue:i}){function s(c){i(c!==void 0?["==",c]:void 0)}const n=t&&t[1],l=!!t;return o.jsx(cc,{children:o.jsx(a.FormControlLabel,{className:ft.formControl,labelPlacement:"end",checked:l&&n,control:o.jsx(a.Checkbox,{indeterminate:!l,onChange:c=>{s(n?!1:l?void 0:!0)}},`filter-${e}`),label:l?n?`${r} is true`:`${r} is false`:"No filter"})})}const Ac={"==":"==","!=":"!=",">":">","<":"<",">=":">=","<=":"<=",in:"in","array-contains":"Contains","array-contains-any":"Any"},pi=["array-contains-any","in"];function uc({name:e,isArray:r,mode:t,value:i,setValue:s,title:n}){const l=r?["array-contains"]:["==","!=",">","<",">=","<="],[c,A]=i||[l[0],void 0],[u,f]=d.useState(c),[g,y]=d.useState(A);function w(p,v){let B=v;const C=pi.includes(u),E=pi.includes(p);C!==E&&(B=E?v?[v]:[]:""),f(p),y(B===null?void 0:B);const x=B!==null&&Array.isArray(B)?B.length>0:B!==void 0;s(p&&x?[p,B]:void 0)}const h=t===void 0||t==="date_time"?gr.DateTimePicker:fr.DatePicker;return o.jsxs(a.Box,{display:"flex",width:340,alignItems:"center",children:[o.jsx(a.Box,{width:80,children:o.jsx(a.FormControl,{fullWidth:!0,children:o.jsx(a.Select,{value:u,fullWidth:!0,onChange:p=>{w(p.target.value,g)},children:l.map(p=>o.jsx(a.MenuItem,{value:p,children:Ac[p]},`filter_op_${e}_${p}`))})})}),o.jsx(a.Box,{flexGrow:1,ml:1,children:o.jsx(h,{InputProps:{},renderInput:p=>o.jsx(a.Input,{startAdornment:o.jsx(Xs,{fontSize:"small"})}),value:g??null,onChange:p=>{w(u,p===null?void 0:p)}})}),g!==void 0&&o.jsx(a.Box,{ml:1,children:o.jsx(a.IconButton,{onClick:p=>w(u,void 0),size:"small",children:o.jsx(Nt,{title:`Clear ${n}`,children:o.jsx(Me,{fontSize:"small"})})})})]})}const fc=d.memo(function({resizeHandleRef:r,columnIndex:t,isResizingIndex:i,sort:s,onColumnSort:n,onFilterUpdate:l,filter:c,column:A,onClickResizeColumn:u}){const f=d.useRef(null),[g,y]=d.useState(!1),[w,h]=d.useState(!1),p=d.useCallback(k=>{h(!0)},[]),v=d.useCallback(()=>{h(!1)},[]),B=d.useCallback(k=>{l(A,k),h(!1)},[A,l]),C=i===t,x=!(i!==t&&i>0)&&(g||C);return o.jsxs(oe,{children:[o.jsxs(a.Grid,{sx:k=>({width:A.width,padding:"0px 12px",color:x?k.palette.text.primary:k.palette.text.secondary,backgroundColor:x?a.darken(k.palette.background.default,.05):k.palette.background.default,transition:"color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",height:"100%",fontSize:"0.750rem",textTransform:"uppercase",fontWeight:600,position:A.frozen?"sticky":"relative",left:A.frozen?0:void 0,zIndex:A.frozen?1:0}),ref:f,wrap:"nowrap",alignItems:"center",onMouseEnter:()=>y(!0),onMouseMove:()=>y(!0),onMouseLeave:()=>y(!1),container:!0,children:[o.jsx(a.Grid,{item:!0,xs:!0,sx:{overflow:"hidden",flexShrink:1},children:o.jsxs(a.Box,{sx:{display:"flex",justifyContent:A.headerAlign,alignItems:"center",flexDirection:"row"},children:[o.jsx(a.Box,{sx:{paddingTop:"4px"},children:A.icon&&A.icon(g||w)}),o.jsx(a.Box,{sx:{margin:"0px 4px",overflow:"hidden",justifyContent:A.align,flexShrink:1},children:A.title})]})}),A.sortable&&(s||x||w)&&o.jsx(a.Grid,{item:!0,children:o.jsx(a.Badge,{color:"secondary",variant:"dot",overlap:"circular",invisible:!s,children:o.jsxs(a.IconButton,{size:"small",sx:k=>({backgroundColor:k.palette.mode==="light"?"#f5f5f5":k.palette.background.default}),onClick:()=>{n(A.key)},children:[!s&&o.jsx(Ut,{fontSize:"small"}),s==="asc"&&o.jsx(Ut,{fontSize:"small"}),s==="desc"&&o.jsx(js,{fontSize:"small"})]})})}),A.filter&&o.jsx(a.Grid,{item:!0,children:o.jsx(a.Badge,{color:"secondary",variant:"dot",overlap:"circular",invisible:!c,children:o.jsx(a.IconButton,{sx:k=>({backgroundColor:k.palette.mode==="light"?"#f5f5f5":k.palette.background.default}),size:"small",onClick:p,children:o.jsx(_s,{fontSize:"small",color:g||w?void 0:"disabled"})})})}),A.resizable&&o.jsx(a.Box,{ref:r,sx:k=>({position:"absolute",height:"100%",width:"4px",top:0,right:0,cursor:"col-resize",backgroundColor:x?k.palette.mode==="dark"?a.lighten(k.palette.background.default,.1):a.darken(k.palette.background.default,.15):void 0}),onMouseDown:u?()=>u(t,A):void 0})]}),A.sortable&&f?.current&&o.jsx(a.Popover,{id:w?`popover_${A.key}`:void 0,open:w,elevation:1,anchorEl:f.current,onClose:v,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:o.jsx(gc,{column:A,filter:c,onHover:g,onFilterUpdate:B})})]})},re);function gc({column:e,onFilterUpdate:r,filter:t,onHover:i}){const s=e.key,[n,l]=d.useState(t),c=f=>{r(n)},A=f=>{r(void 0)},u=!!t;return o.jsxs(o.Fragment,{children:[o.jsx(a.Box,{p:2,sx:{fontSize:"0.750rem",fontWeight:600,textTransform:"uppercase"},children:e.title??s}),o.jsx(a.Divider,{}),e.filter&&o.jsx(a.Box,{p:2,children:hc(s,e.filter,n,l)}),o.jsxs(a.Box,{display:"flex",justifyContent:"flex-end",m:2,children:[o.jsx(a.Box,{mr:1,children:o.jsx(a.Button,{disabled:!u,color:"primary",type:"reset","aria-label":"filter clear",onClick:A,children:"Clear"})}),o.jsx(a.Button,{variant:"outlined",color:"primary",onClick:c,children:"Filter"})]})]})}function hc(e,r,t,i){if(r.dataType==="number"||r.dataType==="string"){const s=r.dataType,n=r.title,l=r.enumValues;return o.jsx(ac,{value:t,setValue:i,name:e,dataType:s,isArray:r.isArray,enumValues:l,title:n})}else if(r.dataType==="boolean"){const s=r.title;return o.jsx(dc,{value:t,setValue:i,name:e,title:s})}else if(r.dataType==="date"){const s=r.title;return o.jsx(uc,{value:t,setValue:i,name:e,mode:r.dateMode,isArray:r.isArray,title:s})}return o.jsx("div",{children:`Currently the field ${r.dataType} is not supported`})}const bi=({columns:e,currentSort:r,onColumnSort:t,onFilterUpdate:i,sortByProperty:s,filter:n,onColumnResize:l,onColumnResizeEnd:c})=>{const A=e.map(()=>d.createRef()),[u,f]=d.useState(-1),g=d.useCallback((E,x,k)=>{const S=e[E],m=100,I=800,D=x>I?I:x<m?m:x,P={width:D,key:S.key,column:{...S,width:D}};k?c(P):l(P)},[e,l,c]),y=d.useCallback(E=>{if(u>=0){const x=A[u].current?.parentElement?.getBoundingClientRect().left;return x?E.clientX-x:void 0}},[A,u]),w=d.useCallback(E=>{document.body.style.cursor=E?"col-resize":"auto"},[]),h=d.useCallback(E=>{E.stopPropagation(),E.preventDefault();const x=y(E);x&&g(u,x,!1)},[g,y,u]),p=d.useCallback(E=>{E.stopPropagation(),E.preventDefault();const x=y(E);x&&g(u,x,!0),f(-1),w(!1)},[g,y,u,w]),v=d.useCallback(()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",p)},[h,p]),B=d.useCallback(()=>{document.addEventListener("mousemove",h),document.addEventListener("mouseup",p)},[h,p]);d.useEffect(()=>(u>=0?B():v(),()=>{v()}),[B,u,v]);const C=d.useCallback(E=>{f(E),w(!0)},[w]);return o.jsx(a.Box,{sx:E=>({position:"sticky",minWidth:"100%",backgroundColor:E.palette.background.default,display:"flex",width:"fit-content",flexDirection:"row",top:0,left:0,zIndex:2,height:50,borderBottom:`1px solid ${E.palette.divider}`}),children:e.map((E,x)=>{const k=e[x],S=k&&n&&n[k.key]?n[k.key]:void 0;return o.jsx(oe,{children:o.jsx(fc,{resizeHandleRef:A[x],columnIndex:x,isResizingIndex:u,onFilterUpdate:i,filter:S,sort:s===k.key?r:void 0,onColumnSort:t,onClickResizeColumn:C,column:k})},"header_"+k.key)})})},pc=a.styled("div",{})(({theme:e,size:r,cursor:t,hovered:i})=>({display:"flex",minWidth:"100%",height:fo(r),cursor:t,flexDirection:"row",fontSize:"0.875rem",borderBottom:`1px solid ${e.palette.divider}`,backgroundColor:i?e.palette.mode==="dark"?a.lighten(e.palette.background.paper,.01):"rgb(252, 252, 253)":void 0})),bc=d.memo(function({rowData:r,rowIndex:t,children:i,onRowClick:s,size:n,style:l,hoverRow:c}){const[A,u]=d.useState(!1),f=d.useCallback(w=>s?s({rowData:r,rowIndex:t,event:w}):void 0,[s,r,t]),g=d.useCallback(()=>u(!0),[]),y=d.useCallback(()=>u(!1),[]);return o.jsx(pc,{onClick:f,size:n,cursor:s?"pointer":void 0,hovered:c&&A,style:{...l,width:"fit-content"},onMouseEnter:g,onMouseMove:g,onMouseLeave:y,children:i})},re),yc=d.memo(function(r){return r.rowData&&r.cellRenderer({cellData:r.cellData,rowData:r.rowData,rowIndex:r.rowIndex,isScrolling:!1,column:r.column,columns:r.columns,columnIndex:r.columnIndex,width:r.column.width})},(e,r)=>re(e,r)),tr=d.createContext({});tr.displayName="VirtualListContext";const wc=d.forwardRef(({children:e,...r},t)=>o.jsx(tr.Consumer,{children:i=>{const s=i.customView;return s?o.jsxs(a.Box,{sx:{display:"flex",height:"100%",flexDirection:"column",overflow:"auto"},children:[o.jsx(bi,{...i}),o.jsx(a.Box,{sx:{flexGrow:1,position:"sticky",left:0},children:s})]}):o.jsxs("div",{ref:t,...r,children:[o.jsx(bi,{...i}),e]})}})),yi=d.memo(function({data:r,onResetPagination:t,onEndReached:i,size:s="m",columns:n,onRowClick:l,onColumnResize:c,filter:A,checkFilterCombination:u,onFilterUpdate:f,sortBy:g,error:y,emptyMessage:w,onSortByUpdate:h,loading:p,cellRenderer:v,hoverRow:B}){const C=g?g[0]:void 0,E=g?g[1]:void 0,[x,k]=d.useState(n),S=d.useRef(null),m=d.useRef(0);d.useEffect(()=>{k(n)},[n]);const[I,D]=zt(),P=d.useCallback(H=>{k(x.map(U=>U.key===H.column.key?H.column:U))},[x]),T=d.useCallback(H=>{k(x.map(U=>U.key===H.column.key?H.column:U)),c&&c(H)},[x,c]),Q=d.useRef();d.useEffect(()=>{Q.current=A},[A]);const $=d.useCallback(()=>{m.current=0,S.current&&S.current.scrollTo(S.current?.scrollLeft,0)},[]),q=d.useCallback(H=>{const U=C===H&&E==="desc",M=C===H&&E==="asc"?"desc":U?void 0:"asc",K=U?void 0:H,ae=Q.current,ie=M&&K?[K,M]:void 0;ae&&u&&!u(ae,ie)&&f&&f(void 0),t&&t(),h&&h(ie),$()},[u,E,f,t,h,$,C]),Y=d.useCallback(()=>{m.current=0,h&&h(void 0)},[h]),V=Math.max((r?.length??0)*fo(s)-D.height,0),G=d.useCallback(H=>{i&&(r?.length??0)>0&&H>m.current+500&&(m.current=H,i())},[r,i]),F=d.useCallback(({scrollOffset:H,scrollUpdateWasRequested:U})=>{!U&&H>=V-500&&G(H)},[V,G]),L=d.useCallback((H,U)=>{m.current=0;const X=Q.current;let M=X?{...X}:{};U?M[H.key]=U:delete M[H.key],!u||u(M,C&&E?[C,E]:void 0)||(M=U?{[H.key]:U}:{}),f&&f(M),H.key!==C&&Y()},[u,E,f,Y,C]),W=d.useCallback(()=>o.jsxs(a.Box,{sx:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[o.jsx(a.Typography,{variant:"h6",children:"Error fetching data from the data source"}),y?.message&&o.jsx(a.Typography,{children:y?.message})]}),[y?.message]),z=d.useCallback(()=>p?o.jsx(qe,{}):o.jsxs(a.Box,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",padding:2,children:[o.jsx(a.Box,{padding:1,children:o.jsx(Ns,{})}),o.jsx(a.Typography,{children:w})]}),[w,p]),ee=!p&&(r?.length??0)===0,j=y?W():ee?z():void 0;return o.jsx(a.Box,{ref:I,sx:{height:"100%",width:"100%"},children:o.jsx(tr.Provider,{value:{data:r,size:s,cellRenderer:v,columns:x,currentSort:E,onRowClick:l,customView:j,onColumnResize:P,onColumnResizeEnd:T,filter:Q.current,onColumnSort:q,onFilterUpdate:L,sortByProperty:C,hoverRow:B??!1},children:o.jsx(vc,{outerRef:S,width:D.width,height:D.height,itemCount:r?.length??0,onScroll:F,itemSize:fo(s)},s)})})},re);function vc({outerRef:e,width:r,height:t,itemCount:i,onScroll:s,itemSize:n}){const l=d.useCallback(({index:c,style:A})=>o.jsx(tr.Consumer,{children:({onRowClick:u,data:f,columns:g,size:y="m",cellRenderer:w,hoverRow:h})=>{const p=f&&f[c];return o.jsx(bc,{rowData:p,rowIndex:c,onRowClick:u,columns:g,hoverRow:h,style:{...A,top:`calc(${A.top}px + 50px)`},size:y,children:g.map((v,B)=>{const C=p&&p[v.key];return o.jsx(yc,{dataKey:v.key,cellRenderer:w,column:v,columns:g,rowData:p,cellData:C,rowIndex:c,columnIndex:B},`cell_${v.key}`)})},`row_${c}`)}}),[]);return o.jsx(Hs.FixedSizeList,{outerRef:e,innerElementType:wc,width:r,height:t,overscanCount:4,itemCount:i,onScroll:s,itemSize:n,children:l})}function gt({entity:e,width:r,frozen:t,isSelected:i,selectionEnabled:s,size:n,toggleEntitySelection:l,onCopyClicked:c,onEditClicked:A,onDeleteClicked:u}){const f=a.useTheme(),g=a.useMediaQuery(f.breakpoints.up("md")),y=Boolean(A),w=Boolean(c),h=Boolean(u),[p,v]=d.useState(null),B=d.useCallback(m=>{v(m.currentTarget),m.stopPropagation()},[v]),C=d.useCallback(()=>{v(null)},[v]),E=d.useCallback(m=>{l&&l(e),m.preventDefault(),m.stopPropagation()},[e,l]),x=d.useCallback(m=>{m.stopPropagation(),u&&u(e),v(null)},[e,u,v]),k=d.useCallback(m=>{m.stopPropagation(),c&&c(e),v(null)},[e,c,v]),S=d.useCallback(m=>{m.stopPropagation(),l&&l(e)},[e,l]);return o.jsxs(a.Box,{style:{width:r},onClick:S,sx:m=>({height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",position:t?"sticky":"initial",left:t?0:"initial",background:(m.palette.mode==="dark",a.alpha(m.palette.background.default,.96)),contain:"strict",zIndex:1}),children:[(y||h||s)&&o.jsxs(a.Box,{sx:{minWidth:138,display:"flex",justifyContent:"center"},children:[y&&o.jsx(a.Tooltip,{title:`Edit ${e.id}`,children:o.jsx(a.IconButton,{onClick:m=>{m.stopPropagation(),A&&A(e)},size:g?"medium":"small",children:o.jsx(ve.KeyboardTab,{})})}),s&&o.jsx(a.Tooltip,{title:`Select ${e.id}`,children:o.jsx(a.Checkbox,{size:g?"medium":"small",checked:i,onChange:E})}),(w||h)&&o.jsx(a.IconButton,{onClick:B,size:g?"medium":"small",children:o.jsx(ve.MoreVert,{})}),(w||h)&&o.jsxs(a.Menu,{anchorEl:p,open:Boolean(p),onClose:C,elevation:1,children:[h&&o.jsxs(a.MenuItem,{onClick:x,children:[o.jsx(a.ListItemIcon,{children:o.jsx(ve.Delete,{})}),o.jsx(a.ListItemText,{primary:"Delete"})]}),w&&o.jsxs(a.MenuItem,{onClick:k,children:[o.jsx(a.ListItemIcon,{children:o.jsx(ve.FileCopy,{})}),o.jsx(a.ListItemText,{primary:"Copy"})]})]})]}),n!=="xs"&&o.jsx(a.Box,{sx:{width:138,textAlign:"center",textOverflow:"ellipsis",overflow:"hidden"},children:e?o.jsxs(a.Typography,{className:"mono",variant:"caption",color:"textSecondary",children:[" ",e.id," "]}):o.jsx(a.Skeleton,{variant:"text"})})]})}function Cc({onTextSearch:e}){const[r,t]=d.useState(""),[i,s]=d.useState(!1),n=d.useDeferredValue(r);d.useEffect(()=>{e(n||void 0)},[n]);const l=d.useCallback(()=>{t(""),e(void 0)},[]);return o.jsx(a.FormControl,{children:o.jsxs(a.Box,{sx:c=>({position:"relative",display:"flex",alignItems:"center",height:40,minWidth:"200px",borderRadius:`${c.shape.borderRadius}px`,backgroundColor:c.palette.mode==="light"?ue.alpha(c.palette.common.black,.05):ue.darken(c.palette.background.default,.2),"&:hover":{backgroundColor:c.palette.mode==="light"?ue.alpha(c.palette.common.black,.1):ue.darken(c.palette.background.default,.3)},marginLeft:c.spacing(1),[c.breakpoints.up("sm")]:{marginLeft:c.spacing(1),width:"auto"}}),children:[o.jsx(a.Box,{sx:c=>({padding:c.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}),children:o.jsx(gl,{htmlColor:"#888"})}),o.jsx(Ht,{placeholder:"Search",value:r,onChange:c=>{t(c.target.value)},onFocus:()=>s(!0),onBlur:()=>s(!1),sx:{color:"inherit",minHeight:"inherit"},inputProps:{sx:c=>({padding:c.spacing(1,1,1,0),paddingLeft:`calc(1em + ${c.spacing(4)})`,transition:c.transitions.create("width"),width:"100%",[c.breakpoints.up("sm")]:{width:i?"20ch":"12ch"}}),"aria-label":"search"},endAdornment:r?o.jsx(a.IconButton,{size:"small",onClick:l,children:o.jsx(Me,{fontSize:"small"})}):o.jsx("div",{style:{width:26}})})]})})}const Bc=ue.styled(Ht)(({theme:e})=>({"label + &":{},"& .MuiInputBase-input":{borderRadius:4,position:"relative",backgroundColor:e.palette.mode==="light"?ue.alpha(e.palette.common.black,.05):ue.darken(e.palette.background.default,.2),fontSize:14,fontWeight:e.typography.fontWeightMedium,padding:"8px 26px 8px 12px",transition:e.transitions.create(["border-color","box-shadow"]),"&:focus":{borderRadius:4}}}));function wi(e){return o.jsx(qs,{input:o.jsx(Bc,{}),renderValue:r=>r.toUpperCase(),...e,MenuProps:{MenuListProps:{disablePadding:!0,style:{borderRadius:4}},elevation:1},children:e.children})}function vi(e){return o.jsx(Zs,{...e,sx:r=>({backgroundColor:r.palette.background.default,fontSize:14,fontWeight:r.typography.fontWeightMedium,paddingTop:r.spacing(1),paddingBottom:r.spacing(1),"&:hover":{backgroundColor:ue.darken(r.palette.background.default,.1)},"&:focus":{backgroundColor:ue.darken(r.palette.background.default,.2),"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:r.palette.text.primary}}}),children:e.children})}function xc(e){const r=a.useTheme(),t=a.useMediaQuery(r.breakpoints.up("md")),i=!e.forceFilter&&e.filterIsSet&&o.jsx(a.Tooltip,{title:"Clear filter",children:o.jsx(a.IconButton,{sx:{height:"fit-content"},"aria-label":"filter clear",onClick:e.clearFilter,size:"medium",children:o.jsx(hl,{})})}),s=o.jsx(wi,{variant:"standard",value:e.size,sx:{width:56,height:40},onChange:n=>e.onSizeChanged(n.target.value),renderValue:n=>n.toUpperCase(),children:["xs","s","m","l","xl"].map(n=>o.jsx(vi,{value:n,children:n.toUpperCase()},`size-select-${n}`))});return o.jsxs(a.Box,{sx:{minHeight:56,overflowX:"auto",[r.breakpoints.down("sm")]:{px:r.spacing(1)},px:r.spacing(2),backgroundColor:r.palette.background.default,borderBottom:`1px solid ${r.palette.divider}`,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[o.jsxs(a.Box,{display:"flex",alignItems:"center",sx:{"& > *":{[r.breakpoints.down("md")]:{marginRight:`${r.spacing(1)} !important`},marginRight:`${r.spacing(2)} !important`}},children:[e.title&&o.jsx(a.Hidden,{lgDown:!0,children:e.title}),s,e.actionsStart,i]}),o.jsxs(a.Box,{sx:{display:"flex",alignItems:"center","& > *":{[r.breakpoints.down("md")]:{marginRight:`${r.spacing(.5)} !important`},marginRight:`${r.spacing(1)} !important`}},children:[t&&o.jsx(a.Box,{width:22,children:e.loading&&o.jsx(a.CircularProgress,{size:16,thickness:8})}),e.onTextSearch&&o.jsx(Cc,{onTextSearch:e.onTextSearch},"search-bar"),e.actions]})]})}const Ec={},Ci=d.createContext(Ec),mc=()=>d.useContext(Ci),ht=d.memo(function({fullPath:r,initialFilter:t,initialSort:i,filterCombinations:s,forceFilter:n,actionsStart:l,actions:c,title:A,tableRowActionsBuilder:u,selectionController:f,highlightedEntities:g,onEntityClick:y,onColumnResize:w,onSizeChanged:h,textSearchEnabled:p=!1,hoverRow:v=!0,inlineEditing:B=!1,tableController:{data:C,dataLoading:E,noMoreToLoad:x,dataLoadingError:k,filterValues:S,setFilterValues:m,sortBy:I,setSortBy:D,searchString:P,setSearchString:T,clearFilter:Q,itemCount:$,setItemCount:q,pageSize:Y,paginationEnabled:V,checkFilterCombination:G},...F}){const L=a.useTheme(),W=a.useMediaQuery(L.breakpoints.up("md")),z=Boolean(n),ee=f?.selectedEntities?.length>0?f?.selectedEntities:g,j=d.useRef(Math.random().toString(36)),H=R(),U=Ee(),X=Oe(),M=d.useMemo(()=>pe({collection:F,path:r,fields:H.fields}),[F,r]),[K,ae]=d.useState(M.defaultSize??"m"),[ie,se]=d.useState(void 0),[_,Ge]=d.useState(void 0),[ar,Xe]=d.useState(!1),go=ee?.map(N=>N.id),cr=!!S&&Object.keys(S).length>0,ze=d.useMemo(()=>{const N=F.subcollections?.map(te=>({id:fi(te),name:te.name,width:200,dependencies:[],Builder:({entity:le})=>o.jsx(a.Button,{color:"primary",variant:"outlined",startIcon:o.jsx(ur,{fontSize:"small"}),onClick:ne=>{ne.stopPropagation(),X.open({path:r,entityId:le.id,selectedSubPath:te.alias??te.path,collection:F,updateUrl:!0})},children:te.name})}))??[];return[...F.additionalFields??F.additionalColumns??[],...N]},[F,r]),mt=d.useCallback(({name:N,value:te,property:le,entityId:ne})=>U.checkUniqueField(r,N,te,le,ne),[r]),kt=()=>{!V||E||x||$!==void 0&&q($+Y)},St=d.useCallback(()=>{q(Y)},[Y]),It=d.useCallback(({rowData:N})=>{if(!B)return y&&y(N)},[y,B]),O=d.useCallback(N=>{h&&h(N),ae(N)},[]),ce=d.useCallback(N=>T(N),[]),$e=d.useMemo(()=>ze?ze.map(N=>({[N.id]:N})).reduce((N,te)=>({...N,...te}),{}):{},[ze]);d.useEffect(()=>{const N=te=>{te.keyCode===27&&Tt()};return document.addEventListener("keydown",N,!1),()=>{document.removeEventListener("keydown",N,!1)}});const Ft=d.useCallback(N=>{se(N),Xe(!0)},[]),Tt=d.useCallback(()=>{se(void 0),Xe(!1)},[]),Dt=d.useCallback(()=>{Ge(void 0),Xe(!0)},[]),dr=Sc(M,!0),Mt=mt,is=d.useCallback(({column:N,columnIndex:te,rowData:le,rowIndex:ne})=>{const Ae=le,Ke=N.key,So=rt(F.properties,Ke);if(!So)return null;const ho=ke({propertyOrBuilder:So,path:r,propertyValue:Ae.values?_e(Ae.values,Ke):void 0,values:Ae.values,entityId:Ae.id,fields:H.fields});return ho?o.jsx(oe,{children:Ae?o.jsx(ec,{readonly:!B,align:N.align??"left",propertyKey:Ke,property:ho,setFocused:Xe,value:Ae?.values?_e(Ae.values,Ke):void 0,collection:F,customFieldValidator:Mt,columnIndex:te,width:N.width,height:fo(K),entity:Ae,path:Ae.path},`property_table_cell_${Ae.id}_${Ke}`):Ie()}):null},[F,Mt,r,B,K,go]),ss=d.useCallback(({column:N,rowData:te,width:le})=>{const ne=te,Ae=$e[N.key],Ke=Ae.dependencies?Object.entries(ne.values).filter(([ho,cs])=>Ae.dependencies.includes(ho)).reduce((ho,cs)=>({...ho,...cs}),{}):ne;Ae.builder&&console.warn("`additionalField.builder` is deprecated. Use `additionalField.Builder` instead.");const So=Ae.builder??Ae.Builder;if(!So)throw new Error("No builder provided for additional field");return o.jsx(At,{width:le,size:K,focused:ar,value:Ke,selected:!1,selectedRow:go?.includes(ne.id)??!1,disabled:!0,align:"left",allowScroll:!1,showExpandIcon:!1,disabledTooltip:"This column can't be edited directly",children:o.jsx(oe,{children:o.jsx(So,{entity:ne,context:H})})},`additional_table_cell_${ne.id}_${N.key}`)},[$e,K,go]),ls=d.useMemo(()=>{const N=Object.entries(M.properties).flatMap(([le,ne])=>ne.dataType==="map"&&ne.spreadChildren&&ne.properties?Object.keys(ne.properties).map(Ae=>`${le}.${Ae}`):[le]).map(le=>{const ne=tt(M.properties,le);if(!ne)throw Error("Internal error: no property found in path "+le);return{key:le,property:ne,align:Oa(ne),icon:Ae=>Xo(ne,Ae?void 0:"disabled","small"),title:ne.name??le,sortable:n?Object.keys(n).includes(le):!0,filter:z?void 0:Ei(ne),width:ui(ne),resizable:!0}}),te=ze?ze.map(le=>({key:le.id,type:"additional",align:"left",sortable:!1,title:le.name,width:le.width??200})):[];return[...N,...te]},[ze,z,n,M.properties]),as=d.useMemo(()=>({key:"id_ewcfedcswdf3",width:W?160:130,title:"ID",resizable:!1,frozen:W,headerAlign:"center"}),[W]),Fd=d.useMemo(()=>[as,...dr.map(N=>ls.find(te=>te.key===N)).filter(N=>!!N)],[ls,dr,as]),Td=d.useCallback(N=>{const te=N.column,le=N.columns,ne=te.key;if(N.columnIndex===0)return u?u({entity:N.rowData,size:K,width:te.width,frozen:te.frozen}):o.jsx(gt,{entity:N.rowData,width:te.width,frozen:te.frozen,size:K});if($e[ne])return ss(N);if(N.columnIndex<le.length+1)return is(N);throw Error("Internal: columns not mapped properly")},[$e,u,K,ss,is]),Dd=d.useCallback(N=>{m({...N,...n})},[n]);return o.jsx(Ci.Provider,{value:{setPopupCell:Ge,select:Ft,onValueChange:Bi,size:K,selectedCell:ie,selectedEntityIds:go,focused:ar},children:o.jsxs(a.Box,{sx:N=>({height:"100%",width:"100%",display:"flex",flexDirection:"column",backgroundColor:N.palette.background.paper}),children:[o.jsx(xc,{forceFilter:z,filterIsSet:cr,onTextSearch:p?ce:void 0,clearFilter:Q,size:K,onSizeChanged:O,title:A,actionsStart:l,actions:c,loading:E}),o.jsx(a.Box,{sx:{flexGrow:1},children:o.jsx(yi,{data:C,columns:Fd,cellRenderer:Td,onRowClick:B?void 0:It,onEndReached:kt,onResetPagination:St,error:k,paginationEnabled:V,onColumnResize:w,size:K,loading:E,filter:S,onFilterUpdate:Dd,sortBy:I,onSortByUpdate:D,hoverRow:v,checkFilterCombination:G})}),o.jsx(ic,{open:Boolean(_),onClose:Dt,cellRect:_?.cellRect,columnIndex:_?.columnIndex,propertyKey:_?.propertyKey,collection:_?.collection,entity:_?.entity,tableKey:j.current,customFieldValidator:Mt,path:r,onCellValueChange:Bi},`popup_form_${_?.columnIndex}_${_?.entity?.id}`)]})})},re),Bi=({fullPath:e,collection:r,dataSource:t,context:i,value:s,propertyKey:n,onValueUpdated:l,setError:c,entity:A})=>{const u=Ce.setIn({...A.values},n,s),f={path:e,entityId:A.id,values:u,previousValues:A.values,collection:r,status:"existing"};return Br({...f,callbacks:r.callbacks,dataSource:t,context:i,onSaveSuccess:()=>l(),onSaveFailure:g=>{console.error("Save failure"),console.error(g),c(g)}})};function kc(e,r){const t=Object.keys(e.properties);e.additionalColumns&&console.warn("`additionalColumns` is deprecated and will be removed in previous versions. Use `additionalFields` instead, with the same structure.");const i=e.additionalFields??e.additionalColumns??[],s=e.subcollections??[],n=[...t,...i.map(l=>l.id)];if(r){const l=s.map(c=>fi(c));n.push(...l.filter(c=>!n.includes(c)))}return xi(e,n)}function Sc(e,r){return d.useMemo(()=>e.propertiesOrder?xi(e,e.propertiesOrder):kc(e,r),[e,r])}function xi(e,r){return r.flatMap(t=>{const i=e.properties[t];return i?i.hideFromCollection?[null]:i.disabled&&typeof i.disabled=="object"&&i.disabled.hidden?[null]:i.dataType==="map"&&i.spreadChildren&&i.properties?Object.keys(i.properties).map(n=>`${t}.${n}`):[t]:e.additionalFields?.find(n=>n.id===t)?[t]:[null]}).filter(t=>t!==null)}const Ei=(e,r=!1)=>{if(e.dataType==="number"||e.dataType==="string"){const t=e.name,i=e.enumValues?Eo(e.enumValues):void 0;return{dataType:e.dataType,isArray:r,title:t,enumValues:i}}else{if(e.dataType==="array"&&e.of)return Array.isArray(e.of)?void 0:Ei(e.of,!0);if(e.dataType==="boolean"){const t=e.name;return{dataType:e.dataType,isArray:r,title:t}}else if(e.dataType==="date"){const t=e.name;return{dataType:e.dataType,isArray:r,title:t,dateMode:e.mode}}}},mi={enter:225,exit:175},Ic=d.forwardRef(function(r,t){const{children:i,onClose:s,open:n,offsetPosition:l}=r,c=a.useTheme();return o.jsx(a.Modal,{BackdropProps:{transitionDuration:mi,sx:{backgroundColor:c.palette.mode==="dark"?"rgba(0, 0, 0, 0.85)":"rgba(0, 0, 0, 0.6)"}},BackdropComponent:a.Backdrop,open:n,onClose:s?()=>s(!1):void 0,ref:t,keepMounted:!0,disableEnforceFocus:!0,disableEscapeKeyDown:!0,sx:{transition:`transform 300ms ${c.transitions.easing.easeOut}`,transform:`translateX(-${l*200}px)`},children:o.jsx(a.Slide,{in:n,timeout:mi,direction:"left",children:o.jsx(a.Paper,{variant:"outlined",square:!0,sx:{height:"100%",WebkitOverflowScrolling:"touch",position:"fixed",outline:0,left:"auto",right:0,overflow:"hidden",borderRadius:"16px 0 0 16px"},children:i})})})});function Fc(e,r){const[t,i]=d.useState(),{navigator:s}=d.useContext(de.UNSAFE_NavigationContext),n=de.useNavigate(),l=()=>{i(void 0)},c=()=>{r(),i(void 0),n(-1)},A=d.useCallback(({action:u,location:f,retry:g})=>{switch(u){case"REPLACE":{g();return}case"POP":i(f)}},[]);return d.useEffect(()=>{if(!e||t||!("block"in s))return;const u=s.block(f=>{const g={...f,retry(){u(),f.retry()}};A(g)});return u},[s,A,e,t]),{navigationWasBlocked:Boolean(t),handleCancel:l,handleOk:c}}function Tc({open:e,handleOk:r,handleCancel:t,body:i,title:s}){return o.jsxs(al,{keepMounted:!1,open:e,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[o.jsx(dl,{children:s??"Unsaved changes"}),o.jsxs(cl,{children:[i&&o.jsx(Jt,{children:i}),o.jsx(Jt,{children:"Are you sure you want to leave this page?"})]}),o.jsxs(We,{children:[o.jsx(_t,{onClick:t,autoFocus:!0,children:" Cancel "}),o.jsx(_t,{onClick:r,children:" Ok "})]})]})}const ki=d.createContext({width:"",blocked:!1,setBlocked:e=>{},setBlockedNavigationMessage:e=>{},close:()=>{}}),nr=()=>d.useContext(ki);function Si(){const r=Qo().sidePanels,t=[...r];return t.push(void 0),o.jsx(o.Fragment,{children:t.map((i,s)=>o.jsx(Dc,{panel:i,offsetPosition:r.length-s-1},`side_dialog_${s}`))})}function Dc({offsetPosition:e,panel:r}){const[t,i]=d.useState(!1),[s,n]=d.useState(!1),[l,c]=d.useState(),A=d.useRef(r?.width),u=A.current,f=Qo(),{navigationWasBlocked:g,handleOk:y,handleCancel:w}=Fc(s&&!t,()=>n(!1));d.useEffect(()=>{r&&(A.current=r.width)},[r]);const h=()=>{n(!1),i(!1),f.close(),r?.onClose?.()},p=()=>{i(!1)},v=B=>{s&&!B?i(!0):(f.close(),r?.onClose?.())};return o.jsxs(ki.Provider,{value:{blocked:s,setBlocked:n,setBlockedNavigationMessage:c,width:u,close:v},children:[o.jsxs(Ic,{open:Boolean(r),onClose:v,offsetPosition:e,children:[r&&o.jsx(a.Box,{sx:{display:"flex",flexDirection:"column",height:"100%",transition:"width 250ms ease-in-out",width:r.width,maxWidth:"100vw"},children:o.jsx(oe,{children:r.component})}),!r&&o.jsx("div",{style:{width:u}})]}),o.jsx(Tc,{open:g||t,handleOk:t?h:y,handleCancel:t?p:w,body:l})]})}function Mc({entityOrEntitiesToDelete:e,collection:r,onClose:t,open:i,callbacks:s,onEntityDelete:n,onMultipleEntitiesDelete:l,path:c,...A}){const u=Ee(),f=Pe(),[g,y]=d.useState(!1),[w,h]=d.useState(),[p,v]=d.useState(),B=R();d.useEffect(()=>{if(e){const Q=Array.isArray(e)&&e.length===1?e[0]:e;h(Q),v(Array.isArray(Q))}},[e]);const C=d.useMemo(()=>pe({collection:r,path:c,fields:B.fields}),[r,c]),E=d.useCallback(()=>{t()},[t]),x=d.useCallback(Q=>{console.debug("Deleted",Q)},[]),k=d.useCallback((Q,$)=>{f.open({type:"error",message:"Error deleting: "+$?.message}),console.error("Error deleting entity"),console.error($)},[C.name]),S=d.useCallback((Q,$)=>{f.open({type:"error",message:"Error before deleting: "+$?.message}),console.error($)},[C.name]),m=d.useCallback((Q,$)=>{f.open({type:"error",message:"Error after deleting: "+$?.message}),console.error($)},[C.name]),I=d.useCallback(Q=>un({dataSource:u,entity:Q,collection:C,callbacks:s,onDeleteSuccess:x,onDeleteFailure:k,onPreDeleteHookError:S,onDeleteSuccessHookError:m,context:B}),[u,C,s,x,k,S,m,B]),D=d.useCallback(async()=>{w&&(y(!0),p?Promise.all(w.map(I)).then(Q=>{y(!1),l&&w&&l(c,w),Q.every(Boolean)?f.open({type:"success",message:`${C.name}: multiple deleted`}):Q.some(Boolean)?f.open({type:"warning",message:`${C.name}: Some of the entities have been deleted, but not all`}):f.open({type:"error",message:`${C.name}: Error deleting entities`}),t()}):I(w).then(Q=>{y(!1),Q&&(n&&w&&n(c,w),f.open({type:"success",message:`${C.singularName??C.name} deleted`}),t())}))},[w,p,I,l,c,t,f,C.name,n]);let P;if(w&&p)P=o.jsx("div",{children:"Multiple entities"});else{const Q=w;P=Q?o.jsx(ct,{entity:Q,collection:r,path:c}):o.jsx(o.Fragment,{})}const T=p?`${C.name}: Confirm multiple delete?`:`Would you like to delete this ${C.name}?`;return o.jsxs(a.Dialog,{maxWidth:"md","aria-labelledby":"delete-dialog",open:i,onBackdropClick:t,...A,children:[o.jsx(a.DialogTitle,{id:"delete-dialog-title",children:T}),!p&&o.jsx(a.DialogContent,{dividers:!0,children:P}),o.jsxs(We,{children:[g&&o.jsx(a.CircularProgress,{size:16,thickness:8}),o.jsx(a.Button,{onClick:E,disabled:g,color:"primary",children:"Cancel"}),o.jsx(a.Button,{autoFocus:!0,disabled:g,onClick:D,variant:"contained",color:"primary",children:"Ok"})]})]})}function Pc(e,r,t,i,s){const n=t.properties,l=Lc(n,i,s),c=Qc(e,r,n,l),A=Ti(l.map(f=>f.label)),u=c.map(f=>Ti(f));Gc([A,...u],`${t.name}.csv`,"text/csv")}function Qc(e,r,t,i){const s=e.map(n=>({id:n.id,...Fi(n.values,t)}));return r&&r.forEach((n,l)=>{s[l]={...s[l],...n}}),s&&s.map(n=>i.map(l=>_e(n,l.key)))}function Lc(e,r,t){const i=[{label:"id",key:"id"},...Object.entries(e).map(([s,n])=>Ii(n,s,"")).flat()];return t?.additionalFields&&i.push(...t.additionalFields.map(s=>({label:s.key,key:s.key}))),i}function Ii(e,r,t=""){const i=t?`${t}.${r}`:r;return e.dataType==="map"&&e.properties?Object.entries(e.properties).map(([s,n])=>Ii(n,s,i)).flat():[{label:i,key:i}]}function pt(e,r){let t;if(r.dataType==="map"&&r.properties)t=Fi(e,r.properties);else if(r.dataType==="array")r.of&&Array.isArray(e)?Array.isArray(r.of)?t=r.of.map((i,s)=>pt(e[s],i)):r.of.dataType==="map"?t=e.map(i=>JSON.stringify(i)):t=e.map(i=>pt(i,r.of)):t=e;else if(r.dataType==="reference"){const i=e||void 0;t=i?i.pathWithId:null}else r.dataType==="date"?t=e?e.getTime():null:t=e;return t}function Fi(e,r){const t=Object.entries(r).map(([i,s])=>{const n=e&&e[i],l=pt(n,s);return l===void 0?{}:{[i]:l}}).reduce((i,s)=>({...i,...s}),{});return{...e,...t}}function Ti(e){return e.map(r=>r==null?"":'"'+String(r).replaceAll('"','""')+'"').join(",")+`\r
`}function Gc(e,r,t){const i=new Blob(e,{type:t}),s=URL.createObjectURL(i),n=document.createElement("a");n.href=s,n.setAttribute("download",r),n.click()}const bt=200;function $c({collection:e,path:r,exportConfig:t}){const i=R(),s=Ee(),l=he().resolveAliasesFrom(r),c=d.useMemo(()=>pe({collection:e,path:l,fields:i.fields}),[e,l]),A=d.useRef(),u=d.useRef(),[f,g]=d.useState(!1),[y,w]=d.useState(),[h,p]=d.useState(!1),[v,B]=d.useState(!1),[C,E]=d.useState(!1),x=d.useCallback(()=>{E(!0)},[E]),k=d.useCallback(()=>{E(!1)},[E]),S=d.useCallback((T,Q,$,q,Y)=>{if(!T)throw Error("Trying to perform export without loading data first");Pc(T,Q,$,q,Y)},[]),m=d.useCallback(async T=>{if(!t?.additionalFields)return;const Q=t.additionalFields;return await Promise.all(T.map(async q=>(await Promise.all(Q.map(async Y=>({[Y.key]:await Y.builder({entity:q,context:i})})))).reduce((Y,V)=>({...Y,...V}),{})))},[t?.additionalFields]),I=d.useCallback(async T=>{T.length>=bt&&p(!0);const Q=A.current&&T.length>A.current.length&&v;A.current=T;const $=await m(T);u.current=$,w(void 0),Q&&(S(T,$,c,l,t),k())},[c,S,t,m,v,k,l]);d.useEffect(()=>{C&&(g(!0),s.fetchCollection({path:l,collection:c,limit:v?void 0:bt}).then(I).catch(w).finally(()=>g(!1)))},[c,s,v,C,l,I]);const D=h&&!v,P=d.useCallback(()=>{D?B(!0):(S(A.current,u.current,c,l,t),k())},[D,S,c,l,t,k]);return o.jsxs(o.Fragment,{children:[o.jsx(a.Tooltip,{title:"Export",children:o.jsx(a.IconButton,{color:"primary",onClick:x,children:o.jsx(Rs,{})})}),o.jsxs(a.Dialog,{keepMounted:!1,open:C,onClose:k,children:[o.jsx(a.DialogTitle,{children:"Export data"}),o.jsx(a.DialogContent,{children:o.jsxs(a.DialogContentText,{children:[o.jsx("div",{children:"Download the the content of this table as a CSV"}),o.jsx("br",{}),D&&o.jsxs(a.Alert,{elevation:1,variant:"filled",severity:"warning",children:[o.jsxs("div",{children:["This collections has a large number of documents (more than ",bt,")."]}),o.jsx("div",{children:"Would you like to proceed?"})]})]})}),o.jsxs(We,{children:[f&&o.jsx(a.CircularProgress,{size:16,thickness:8}),o.jsx(a.Button,{color:"primary",onClick:k,children:"Cancel"}),o.jsx(a.Button,{color:"primary",variant:"contained",disabled:f,onClick:P,children:"Download"})]})]})]})}function Oc({collection:e,onNewClick:r,exportable:t,onMultipleDeleteClick:i,selectionEnabled:s,path:n,selectionController:l,loadedEntities:c}){const A=R(),u=Ue(),f=a.useTheme(),g=a.useMediaQuery(f.breakpoints.up("md")),y=l.selectedEntities,w=er(e,u,Le(n),null)&&r&&(g?o.jsxs(a.Button,{onClick:r,startIcon:o.jsx(ve.Add,{}),size:"large",variant:"contained",color:"primary",children:["Add ",e.singularName??e.name]}):o.jsx(a.Button,{onClick:r,size:"medium",variant:"contained",color:"primary",children:o.jsx(ve.Add,{})})),h=it(e,u,Le(n),null);let p;if(s){const E=g?o.jsxs(a.Button,{disabled:!y?.length||!h,startIcon:o.jsx(ve.Delete,{}),onClick:i,color:"primary",sx:{minWidth:68},children:["(",y?.length,")"]}):o.jsx(a.IconButton,{color:"primary",disabled:!y?.length||!h,onClick:i,size:"large",children:o.jsx(ve.Delete,{})});p=o.jsx(a.Tooltip,{title:h?"Delete":"You have selected at least one entity you cannot delete",children:o.jsx("span",{children:E})})}const v={path:n,collection:e,selectionController:l,context:A,loadedEntities:c},B=e.Actions?Array.isArray(e.Actions)?o.jsx(o.Fragment,{children:e.Actions.map((E,x)=>o.jsx(E,{...v},`actions_${x}`))}):o.jsx(e.Actions,{...v}):void 0,C=t&&o.jsx($c,{collection:e,exportConfig:typeof e.exportable=="object"?e.exportable:void 0,path:n});return o.jsxs(o.Fragment,{children:[B,p,C,w]})}function Yc({data:e,entitiesDisplayedFirst:r}){if(!r)return e;const t=new Set(r.map(i=>i.id));return[...r,...e.filter(i=>!t.has(i.id))]}function Vc(e,r,t=5e3){const[i,s]=d.useState(e),n=d.useRef(i.length??0),l=d.useRef(!1),c=d.useRef(r),A=!re(c.current,r),u=e.length>=n.current||A;return d.useEffect(()=>{const f=()=>{re(i,e)||(c.current=r,n.current=e.length,s(e)),l.current=!1};l.current=!0;let g;return u?f():g=setTimeout(f,t),()=>{clearTimeout(g),l.current&&u&&f()}},[e,t,r,u]),u?e:i}const Wc=50;function Di({fullPath:e,collection:r,entitiesDisplayedFirst:t,isFilterCombinationValid:i}){const{filterCombinations:s,initialFilter:n,initialSort:l,forceFilter:c}=r,A=r.pagination===void 0||Boolean(r.pagination),u=typeof r.pagination=="number"?r.pagination:Wc,[f,g]=d.useState(),[y,w]=d.useState(A?u:void 0),h=d.useCallback((T,Q)=>i(T,Q,s),[s]),p=d.useMemo(()=>{if(l&&c&&!h(c,l)){console.warn("Initial sort is not compatible with the force filter. Ignoring initial sort");return}return l},[l,c]),[v,B]=d.useState(c??n??void 0),[C,E]=d.useState(p),x=d.useCallback(()=>B(c??void 0),[c]),{data:k,dataLoading:S,noMoreToLoad:m,dataLoadingError:I}=An({path:e,collection:r,filterValues:v,sortBy:C,searchString:f,itemCount:y}),D=Yc({data:k,entitiesDisplayedFirst:t});return{data:Vc(D,{filterValues:v,sortBy:C,searchString:f}),dataLoading:S,noMoreToLoad:m,dataLoadingError:I,filterValues:v,setFilterValues:B,sortBy:C,setSortBy:E,searchString:f,setSearchString:g,clearFilter:x,itemCount:y,setItemCount:w,paginationEnabled:A,pageSize:u,checkFilterCombination:h}}function Mi(e,r,t){const i=r?r[0]:void 0,s=r?r[1]:void 0,n=Object.values(e);if(i&&n.map(A=>A[0]).includes("=="))return!1;const l=Object.keys(e),c=l.length;return c===1&&(!i||i===l[0])?!0:!t&&c>1?!1:!!t&&t.filter(A=>!i||i in A).find(A=>Object.entries(e).every(([u,f])=>A[u]!==void 0&&(!s||A[u]===s)))!==void 0}const yt=d.memo(function({fullPath:r,isSubCollection:t,...i}){const s=Oe(),n=Ue(),l=dn(),c=R(),A=d.useMemo(()=>{const M=l?.getCollectionConfig(r);return M?Fe(i,M):i},[i,r,l]),u=a.useTheme(),[f,g]=d.useState(void 0),[y,w]=d.useState(void 0),h=d.useCallback(()=>{const M=f;setTimeout(()=>{M===f&&g(void 0)},2400)},[f]),p=d.useCallback(M=>nt(A,n,Le(r),M??null)?A.inlineEditing===void 0||A.inlineEditing:!1,[A,n,r]),v=A.exportable===void 0||A.exportable,B=A.selectionEnabled===void 0||A.selectionEnabled,C=!p(),[E,x]=d.useState(null),k=wt(),S=A.selectionController??k,{selectedEntities:m,toggleEntitySelection:I,isEntitySelected:D,setSelectedEntities:P}=S;d.useEffect(()=>{w(void 0)},[m]);const T=Di({fullPath:r,collection:A,entitiesDisplayedFirst:[],isFilterCombinationValid:Mi}),Q=d.useCallback(M=>(g(M),c.onAnalyticsEvent?.("edit_entity_clicked",{path:M.path,entityId:M.id}),s.open({entityId:M.id,path:r,collection:A,updateUrl:!0,onClose:h})),[r,A,s]),$=d.useCallback(()=>{c.onAnalyticsEvent?.("new_entity_click",{path:r}),s.open({path:r,collection:A,updateUrl:!0,onClose:h})},[r,A,s]),q=d.useCallback(M=>{c.onAnalyticsEvent?.("single_delete_dialog_open",{path:r}),w(M)},[c,r]),Y=d.useCallback(()=>{c.onAnalyticsEvent?.("multiple_delete_dialog_open",{path:r}),w(m)},[c,r,m]),V=d.useCallback((M,K)=>{c.onAnalyticsEvent?.("single_entity_deleted",{path:r}),P(ae=>ae.filter(ie=>ie.id!==K.id))},[c,r,P]),G=d.useCallback((M,K)=>{c.onAnalyticsEvent?.("multiple_entities_deleted",{path:r}),P([]),w(void 0)},[P]),F=d.useCallback((M,K)=>{if(l){const ae=l.getCollectionConfig(M),ie=Fe(ae,K);l.onCollectionModified(M,ie)}},[l]),L=d.useCallback(({width:M,key:K})=>{if(!A.properties[K])return;const ae={columnWidth:M},ie={properties:{[K]:ae}};F(r,ie)},[A,F,r]),W=d.useCallback(M=>{l&&F(r,{defaultSize:M})},[F,r,l]),z=E!=null,ee=d.useMemo(()=>o.jsx(a.Box,{sx:{display:"flex",flexDirection:"row",contain:"content","& > *:not(:last-child)":{[u.breakpoints.down("md")]:{mr:u.spacing(1)},mr:u.spacing(2)}},children:o.jsxs(a.Box,{children:[o.jsx(a.Typography,{variant:"h6",sx:{lineHeight:"1.15",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:"164px",cursor:A.description?"pointer":"inherit"},onClick:A.description?M=>{x(M.currentTarget),M.stopPropagation()}:void 0,children:`${A.name}`}),o.jsx(zc,{fullPath:r}),A.description&&o.jsx(a.Popover,{id:"info-dialog",open:z,anchorEl:E,elevation:1,onClose:()=>{x(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:o.jsx(a.Box,{m:2,children:o.jsx(Ho,{source:A.description})})})]})}),[u,A.description,A.name,r,z,E]),j=er(A,n,Le(r),null),H=d.useCallback(M=>{g(M),c.onAnalyticsEvent?.("copy_entity_click",{path:M.path,entityId:M.id}),s.open({entityId:M.id,path:r,copy:!0,collection:A,updateUrl:!0,onClose:h})},[s,A,r,h]),U=d.useCallback(M=>{g(M),c.onAnalyticsEvent?.("entity_click",{path:M.path,entityId:M.id}),s.open({entityId:M.id,path:r,collection:A,updateUrl:!0,onClose:h})},[s,A,r,h]),X=d.useCallback(({entity:M,size:K,width:ae,frozen:ie})=>{const se=D(M),_=it(A,n,Le(r),M);return o.jsx(gt,{entity:M,width:ae,frozen:ie,isSelected:se,selectionEnabled:B,size:K,toggleEntitySelection:I,onEditClicked:U,onCopyClicked:j?H:void 0,onDeleteClicked:_?q:void 0})},[D,A,n,r,B,I,U,j,H]);return o.jsxs(a.Box,{sx:{overflow:"hidden",height:"100%",width:"100%"},children:[o.jsx(ht,{fullPath:r,tableController:T,onSizeChanged:W,onEntityClick:Q,onColumnResize:L,tableRowActionsBuilder:X,title:ee,selectionController:S,highlightedEntities:f?[f]:[],...A,actions:o.jsx(Oc,{collection:A,exportable:v,onMultipleDeleteClick:Y,onNewClick:$,path:r,loadedEntities:T.data,selectionController:k,selectionEnabled:B}),hoverRow:C,inlineEditing:p()},`collection_table_${r}`),y&&o.jsx(Mc,{entityOrEntitiesToDelete:y,path:r,collection:A,callbacks:A.callbacks,open:Boolean(y),onEntityDelete:V,onMultipleEntitiesDelete:G,onClose:()=>w(void 0)})]})},re);function wt(){const[e,r]=d.useState([]),t=d.useCallback(s=>{let n;e.map(l=>l.id).includes(s.id)?n=e.filter(l=>l.id!==s.id):n=[...e,s],r(n)},[e]),i=d.useCallback(s=>e.map(n=>n.id).includes(s.id),[e]);return{selectedEntities:e,setSelectedEntities:r,isEntitySelected:i,toggleEntitySelection:t}}function zc({fullPath:e}){const r=Ee(),t=he(),[i,s]=d.useState(void 0),[n,l]=d.useState(void 0);return d.useEffect(()=>{r.countEntities(t.resolveAliasesFrom(e)).then(s).catch(l)},[e,r,t]),n?null:o.jsx(a.Typography,{sx:{display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:"160px",textAlign:"left"},variant:"caption",color:"textSecondary",children:i!==void 0?`${i} entities`:Ie()})}function Pi({onSingleEntitySelected:e,onMultipleEntitiesSelected:r,onClose:t,multiselect:i,collection:s,path:n,selectedEntityIds:l,forceFilter:c}){const A=nr(),u=Oe(),f=he(),g=R(),y=f.resolveAliasesFrom(n),w=Ee(),[h,p]=d.useState([]),v=wt();d.useEffect(()=>{let I=!1;return l&&s?Promise.all(l.map(D=>w.fetchEntity({path:y,entityId:D,collection:s}))).then(D=>{if(!I){const P=D.filter(T=>T!==void 0);v.setSelectedEntities(P),p(P)}}):(v.setSelectedEntities([]),p([])),()=>{I=!0}},[w,y,l,s,v.setSelectedEntities]);const B=d.useCallback(()=>{g.onAnalyticsEvent?.("reference_selection_clear",{path:y}),v.setSelectedEntities([]),!i&&e?e(null):r&&r([])},[i,r,e]),C=d.useCallback(I=>{let D;const P=v.selectedEntities;g.onAnalyticsEvent?.("reference_selection_toggle",{path:y,entityId:I.id}),P&&(P.map(T=>T.id).indexOf(I.id)>-1?D=P.filter(T=>T.id!==I.id):D=[...P,I],v.setSelectedEntities(D),r&&r(D))},[r,v.selectedEntities]),E=d.useCallback(I=>{!i&&e?(g.onAnalyticsEvent?.("reference_selected_single",{path:y,entityId:I.id}),e(I),A.close(!1)):C(I)},[A,i,e,C]),x=d.useCallback(()=>{g.onAnalyticsEvent?.("reference_selection_new_entity",{path:y}),u.open({path:y,collection:s,updateUrl:!0,onUpdate:({entity:I})=>{p([I,...h]),E(I)},closeOnSave:!0})},[u,y,s,h,E]),k=d.useCallback(({entity:I,size:D,width:P,frozen:T})=>{const Q=v.selectedEntities,$=Q&&Q.map(q=>q.id).indexOf(I.id)>-1;return o.jsx(gt,{width:P,frozen:T,entity:I,size:D,isSelected:$,selectionEnabled:i,toggleEntitySelection:C})},[i,v.selectedEntities,C]),S=d.useCallback(I=>{I.stopPropagation(),A.close(!1),t&&t()},[t,A]);if(!s)return o.jsx(fe,{error:"Could not find collection with id "+s});const m=Di({fullPath:y,collection:s,entitiesDisplayedFirst:h,isFilterCombinationValid:Mi});return o.jsxs(a.Box,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[o.jsx(a.Box,{sx:{flexGrow:1},children:h&&o.jsx(ht,{fullPath:y,onEntityClick:E,forceFilter:c,tableController:m,tableRowActionsBuilder:k,title:o.jsx(a.Typography,{variant:"h6",children:s.singularName?`Select ${s.singularName}`:`Select from ${s.name}`}),...s,inlineEditing:!1,selectionController:v,actions:o.jsx(Uc,{collection:s,path:y,onNewClick:x,onClear:B})})}),o.jsx(We,{translucent:!1,children:o.jsx(a.Button,{onClick:S,color:"primary",variant:"outlined",children:"Done"})})]})}function Uc({collection:e,path:r,onClear:t,onNewClick:i}){const s=Ue(),n=a.useTheme(),l=a.useMediaQuery(n.breakpoints.up("md")),c=er(e,s,Le(r),null)&&i&&(l?o.jsxs(a.Button,{onClick:i,startIcon:o.jsx(ve.Add,{}),size:"large",variant:"contained",color:"primary",children:["Add ",e.singularName??e.name]}):o.jsx(a.Button,{onClick:i,size:"medium",variant:"contained",color:"primary",children:o.jsx(ve.Add,{})}));return o.jsxs(o.Fragment,{children:[o.jsx(a.Button,{onClick:t,color:"primary",children:"Clear"}),c]})}function vt(e){return Array.isArray(e)?e:e?[e]:[]}function Ct({children:e,group:r}){return o.jsxs(a.Box,{mt:6,mb:6,children:[o.jsx(a.Typography,{color:"textSecondary",className:"weight-500",children:r?.toUpperCase()??"Ungrouped views".toUpperCase()}),o.jsx(a.Divider,{}),o.jsx(a.Box,{mt:2,children:e})]})}function Qi({view:e,path:r,collection:t,url:i,name:s,description:n,onClick:l}){const c=or(t??e),A=de.useNavigate(),u=R();let f;if(u.plugins&&t){const g={path:r,collection:t,context:u};f=o.jsx(o.Fragment,{children:u.plugins.map((y,w)=>y.homePage?.CollectionActions?o.jsx(y.homePage.CollectionActions,{...g},`actions_${w}`):null)})}return o.jsx(a.Paper,{variant:"outlined",children:o.jsxs(a.CardActionArea,{component:"div",sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",minHeight:248},onClick:()=>{l?.(),A(i)},children:[o.jsxs(a.CardContent,{sx:{flexGrow:1,width:"100%"},children:[o.jsxs(a.Box,{sx:{height:40,display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"},children:[o.jsx(c,{color:"disabled"}),o.jsx("div",{onClick:g=>{g.preventDefault(),g.stopPropagation()},children:f})]}),o.jsx(a.Typography,{gutterBottom:!0,variant:"h5",component:"h2",children:s}),n&&o.jsx(a.Typography,{variant:"body2",color:"textSecondary",component:"div",children:o.jsx(Ho,{source:n})})]}),o.jsx(a.CardActions,{style:{alignSelf:"flex-end"},children:o.jsx(a.Box,{p:1,children:o.jsx(Us,{color:"primary"})})})]})})}function Li({additionalChildren:e}){const r=R(),t=he();if(!t.topLevelNavigation)throw Error("Navigation not ready in FireCMSHomePage");const{navigationEntries:i,groups:s}=t.topLevelNavigation,n=[...s];(i.filter(c=>!c.group).length>0||i.length===0)&&n.push(void 0);let l;if(r.plugins){const c={context:r};l=o.jsx(o.Fragment,{children:r.plugins.filter(A=>A.homePage?.includeSection).map((A,u)=>{const f=A.homePage.includeSection(c);return o.jsx(Ct,{group:f.title,children:f.children},`plugin_section_${A.name}`)})})}return o.jsxs(a.Container,{children:[n.map((c,A)=>{const u=[],f={group:c,context:r};return r.plugins&&r.plugins.forEach(g=>{g.homePage?.AdditionalCards&&u.push(...vt(g.homePage?.AdditionalCards))}),o.jsx(Ct,{group:c,children:o.jsxs(a.Grid,{container:!0,spacing:2,children:[i.filter(g=>g.group===c||!g.group&&c===void 0).map(g=>o.jsx(a.Grid,{item:!0,xs:12,sm:6,lg:4,children:o.jsx(Qi,{...g,onClick:()=>{const y=g.type==="collection"?"home_navigate_to_collection":g.type==="view"?"home_navigate_to_view":"unmapped_event";r.onAnalyticsEvent?.(y,{path:g.path})}})},`nav_${g.group}_${g.name}`)),u&&u.map((g,y)=>o.jsx(a.Grid,{item:!0,xs:12,sm:6,lg:4,children:o.jsx(g,{...f})},`nav_${c}_"add_${y}`))]})},`plugin_section_${c}`)}),l,e]})}function Nc({children:e,title:r,path:t}){const i=$o();return d.useEffect(()=>{i.set({breadcrumbs:[{title:r,url:t}]})},[t,r]),o.jsx(o.Fragment,{children:e})}function Gi(){return o.jsx(a.Box,{display:"flex",width:"100%",height:"100%",children:o.jsxs(a.Box,{m:"auto",display:"flex",alignItems:"center",flexDirection:"column",children:[o.jsx(a.Typography,{variant:"h4",align:"center",gutterBottom:!0,children:"Page not found"}),o.jsx(a.Typography,{align:"center",gutterBottom:!0,children:"This page does not exist or you may not have access to it"}),o.jsx(a.Button,{component:de.Link,to:"/",children:"Back to home"})]})})}function Hc({open:e,onAccept:r,onCancel:t,title:i,loading:s,body:n}){return o.jsxs(a.Dialog,{open:e,onClose:t,children:[o.jsx(a.DialogTitle,{children:i}),n&&o.jsx(a.DialogContent,{children:o.jsx(a.DialogContentText,{children:n})}),o.jsxs(We,{children:[o.jsx(a.Button,{onClick:t,autoFocus:!0,children:"Cancel"}),o.jsx(Js.LoadingButton,{variant:"contained",color:"primary",type:"submit",loading:s,onClick:r,children:"Ok"})]})]})}function Bt({width:e,height:r,style:t}){return o.jsxs("svg",{width:e??"100%",height:r??"100%",viewBox:"0 0 599 599",version:"1.1",style:t,xmlns:"http://www.w3.org/2000/svg",children:[o.jsxs("defs",{children:[o.jsxs("radialGradient",{cx:"28.6213569%",cy:"43.1133328%",fx:"28.6213569%",fy:"43.1133328%",r:"71.5003456%",gradientTransform:"translate(0.286214,0.431133),rotate(3.343450),scale(1.000000,0.996175),translate(-0.286214,-0.431133)",id:"radialGradient-1",children:[o.jsx("stop",{stopColor:"#FF5B79",offset:"0%"}),o.jsx("stop",{stopColor:"#FA5574",offset:"28.0930803%"}),o.jsx("stop",{stopColor:"#EC4C51",offset:"44.7242531%"}),o.jsx("stop",{stopColor:"#9543C1",offset:"71.4578165%"}),o.jsx("stop",{stopColor:"#3857B3",offset:"100%"})]}),o.jsxs("radialGradient",{cx:"53.6205516%",cy:"47.2473036%",fx:"53.6205516%",fy:"47.2473036%",r:"50.8229649%",gradientTransform:"translate(0.536206,0.472473),rotate(90.000000),scale(1.000000,1.206631),translate(-0.536206,-0.472473)",id:"radialGradient-2",children:[o.jsx("stop",{stopColor:"#68294F",stopOpacity:"0",offset:"0%"}),o.jsx("stop",{stopColor:"#5E2548",stopOpacity:"0.04641108",offset:"75.3503173%"}),o.jsx("stop",{stopColor:"#0D060B",stopOpacity:"0.437431709",offset:"100%"})]}),o.jsxs("radialGradient",{cx:"53.8605015%",cy:"48.1990423%",fx:"53.8605015%",fy:"48.1990423%",r:"59.9151549%",gradientTransform:"translate(0.538605,0.481990),rotate(180.000000),scale(1.000000,0.925027),translate(-0.538605,-0.481990)",id:"radialGradient-3",children:[o.jsx("stop",{stopColor:"#68294F",stopOpacity:"0",offset:"0%"}),o.jsx("stop",{stopColor:"#5E2548",stopOpacity:"0.04641108",offset:"84.0867343%"}),o.jsx("stop",{stopColor:"#FF0000",stopOpacity:"0.567324765",offset:"100%"})]})]}),o.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:o.jsxs("g",{id:"firecms_logo",children:[o.jsx("circle",{fill:"url(#radialGradient-1)",cx:"299.5",cy:"299.5",r:"299.5"}),o.jsx("circle",{fill:"url(#radialGradient-2)",cx:"299.5",cy:"299.5",r:"299.5"}),o.jsx("circle",{fill:"url(#radialGradient-3)",cx:"299.5",cy:"299.5",r:"299.5"})]})})]})}function ir({children:e,maxWidth:r,fullScreen:t=!1,fadeTimeout:i=800}){return o.jsx(a.Fade,{in:!0,timeout:i,mountOnEnter:!0,unmountOnExit:!0,children:o.jsxs(a.Box,{sx:{display:"flex",flexDirection:"column",alignItems:"center",height:t?"100vh":"100%",justifyContent:r?void 0:"center",maxHeight:"100%",gap:2,p:2},children:[r&&o.jsx(a.Box,{sx:{width:"100%",margin:"auto",maxWidth:r},children:e}),!r&&e]})})}const jc=d.memo(function({path:r,entityId:t,selectedSubPath:i,copy:s,collection:n,onValuesAreModified:l,formWidth:c,onUpdate:A,onClose:u}){const f=a.useTheme(),g=a.useMediaQuery(f.breakpoints.up("lg")),y=d.useRef(!g),w=typeof c=="number"?`${c}px`:c??Po,h=Ee(),p=nr(),v=Oe(),B=Pe(),C=R(),E=Ue(),[x,k]=d.useState(s?"copy":t?"existing":"new"),[S,m]=d.useState(t),I=d.useRef(void 0),D=I.current,P=(n.subcollections??[]).filter(O=>!O.hideFromNavigation),T=P?.length??0,Q=n.views,$=Q?.length??0,q=$>0||T>0,Y=zr(n),V=!i&&g&&Y,[G,F]=d.useState(V?0:-1),L=G===-1||g,{entity:W,dataLoading:z,dataLoadingError:ee}=Lo({path:r,entityId:S,collection:n,useCache:!1}),[j,H]=d.useState(W),[U,X]=d.useState(void 0);d.useEffect(()=>{W&&H(W)},[W]),d.useEffect(()=>{if(x==="new")X(!1);else{const O=j?nt(n,E,Le(r),j??null):!1;j&&X(!O)}},[E,j,x]),d.useEffect(()=>{if(!i)F(-1);else{if(Q){const O=Q.map(ce=>ce.path).findIndex(ce=>ce===i);O!==-1&&F(O)}if(P){const O=P.map(ce=>ce.path).findIndex(ce=>ce===i);O!==-1&&F(O+$)}}},[i,$,Q,P]),d.useEffect(()=>{y.current!==g&&(!i&&g&&Y?v.replace({path:r,entityId:t,selectedSubPath:Y.path,updateUrl:!0}):G===0&&!g&&Y&&v.replace({path:r,entityId:t,selectedSubPath:void 0,updateUrl:!0}),y.current=g)},[g,G,Y,y.current,i]);const M=d.useCallback(O=>{B.open({type:"error",message:"Error before saving: "+O?.message}),console.error(O)},[B]),K=d.useCallback(O=>{B.open({type:"error",message:"Error after saving (entity is saved): "+O?.message}),console.error(O)},[B]),ae=(O,ce)=>{B.open({type:"success",message:`${n.singularName??n.name}: Saved correctly`}),m(O.id),H(O),k("existing"),l(!1),A&&A({entity:O}),ce&&(p.setBlocked(!1),p.close(!0),u?.())},ie=d.useCallback(O=>{B.open({type:"error",message:"Error saving: "+O?.message}),console.error("Error saving entity",r,t),console.error(O)},[t,r,B]),se=d.useCallback(async({collection:O,path:ce,entityId:$e,values:Ft,previousValues:Tt,closeAfterSave:Dt})=>{if(x)return Br({path:ce,entityId:$e,values:Ft,previousValues:Tt,collection:O,status:x,dataSource:h,context:C,onSaveSuccess:dr=>ae(dr,Dt),onSaveFailure:ie,onPreSaveHookError:M,onSaveSuccessHookError:K})},[x,n,h,C,ae,ie,M,K]),_=Q&&Q.map((O,ce)=>o.jsx(a.Box,{sx:{width:Mo,height:"100%",overflow:"auto",borderLeft:`1px solid ${f.palette.divider}`,[f.breakpoints.down("lg")]:{borderLeft:"inherit",width:oo}},role:"tabpanel",flexGrow:1,hidden:G!==ce,children:o.jsx(oe,{children:O.builder({collection:n,entity:j,modifiedValues:D??j?.values})})},`custom_view_${O.path}_${ce}`)),Ge=z&&!j||(!j||U===void 0)&&(x==="existing"||x==="copy"),ar=P&&P.map((O,ce)=>{const $e=j?`${r}/${j?.id}/${ge(O.alias??O.path)}`:void 0;return o.jsxs(a.Box,{sx:{width:Mo,height:"100%",overflow:"auto",borderLeft:`1px solid ${f.palette.divider}`,[f.breakpoints.down("lg")]:{borderLeft:"inherit",width:oo}},role:"tabpanel",flexGrow:1,hidden:G!==ce+$,children:[Ge&&o.jsx(qe,{}),!Ge&&(j&&$e?o.jsx(yt,{fullPath:$e,isSubCollection:!0,...O}):o.jsx(a.Box,{sx:{width:"100%",height:"100%",p:3},display:"flex",alignItems:"center",justifyContent:"center",children:o.jsx(a.Typography,{variant:"label",children:"You need to save your entity before adding additional collections"})}))]},`subcol_${O.name}_${ce}`)}),Xe=d.useCallback(O=>{if(O!==-1){if(Q&&O<$)return Q[O].path;if(P)return P[O-$].path;throw Error("Something is wrong in getSelectedSubPath")}},[Q,$,P]),go=d.useCallback(()=>{l(!1)},[]),cr=d.useCallback(O=>{F(O),t&&v.replace({path:r,entityId:t,selectedSubPath:Xe(O),updateUrl:!0})},[t,v,r,Xe]),ze=d.useCallback(O=>{I.current=O},[]),mt=U===void 0?null:U?o.jsx(ct,{entity:j,path:r,collection:n}):o.jsx(si,{status:x,path:r,collection:n,onEntitySave:se,onDiscard:go,onValuesChanged:ze,onModified:l,entity:j},`form_${r}_${j?.id??"new"}`),kt=P&&P.map(O=>o.jsx(a.Tab,{sx:{fontSize:"0.875rem",minWidth:"140px"},wrapped:!0,label:O.name},`entity_detail_collection_tab_${O.name}`)),St=Q&&Q.map(O=>o.jsx(a.Tab,{sx:{fontSize:"0.875rem",minWidth:"140px"},wrapped:!0,label:O.name},`entity_detail_custom_tab_${O.name}`)),It=o.jsxs(a.Box,{sx:{paddingLeft:2,paddingRight:2,paddingTop:1,display:"flex",alignItems:"end",backgroundColor:f.palette.mode==="light"?f.palette.background.default:f.palette.background.paper},children:[o.jsx(a.Box,{sx:{pb:1,alignSelf:"center"},children:o.jsx(a.IconButton,{onClick:()=>(u?.(),p.close(!1)),size:"large",children:o.jsx(gs,{})})}),o.jsx(a.Box,{flexGrow:1}),Ge&&o.jsx(a.Box,{sx:{alignSelf:"center"},children:o.jsx(a.CircularProgress,{size:16,thickness:8})}),o.jsxs(a.Tabs,{value:G+1,indicatorColor:"secondary",textColor:"inherit",onChange:(O,ce)=>{cr(ce-1)},sx:{paddingLeft:f.spacing(1),paddingRight:f.spacing(1),paddingTop:f.spacing(0)},variant:"scrollable",scrollButtons:"auto",children:[o.jsx(a.Tab,{label:n.singularName??n.name,disabled:!q,onClick:()=>{cr(-1)},sx:{display:q?void 0:"none",fontSize:"0.875rem",minWidth:"140px"},wrapped:!0}),St,kt]})]});return o.jsx(a.Box,{sx:{display:"flex",flexDirection:"column",height:"100%",width:"100%",transition:"width 250ms ease-in-out"},children:o.jsxs(o.Fragment,{children:[It,o.jsx(a.Divider,{}),o.jsxs(a.Box,{sx:{flexGrow:1,height:"100%",width:`calc(${Mo} + ${w})`,maxWidth:"100%",[f.breakpoints.down("sm")]:{width:oo},display:"flex",overflow:"auto",flexDirection:"row"},children:[o.jsx(a.Box,{sx:{position:"relative"},children:o.jsxs(a.Box,{role:"tabpanel",hidden:!L,sx:{width:w,maxWidth:"100%",height:"100%",overflow:"auto",[f.breakpoints.down("sm")]:{maxWidth:oo,width:oo}},children:[o.jsx(a.Box,{sx:O=>({width:"100%",marginTop:O.spacing(3),paddingLeft:O.spacing(4),paddingRight:O.spacing(4),paddingTop:O.spacing(3),[O.breakpoints.down("lg")]:{marginTop:O.spacing(2),paddingLeft:O.spacing(2),paddingRight:O.spacing(2),paddingTop:O.spacing(2)},[O.breakpoints.down("md")]:{marginTop:O.spacing(1),paddingLeft:O.spacing(2),paddingRight:O.spacing(2),paddingTop:O.spacing(2)}}),children:o.jsx(a.Typography,{sx:{marginTop:4,marginBottom:4},variant:"h4",children:n.singularName??n.name+" entry"})}),Ge?o.jsx(qe,{}):mt]})}),_,ar]})]})})},re);function _c(e){const{blocked:r,setBlocked:t,setBlockedNavigationMessage:i}=nr(),s=he(),n=d.useMemo(()=>{if(!e)return;let c=e.collection;if(!c&&(c=e?s.getCollection(e.path,e.entityId):void 0,!c))throw console.error("ERROR: No collection found in path ",e.path,"Entity id: ",e.entityId),Error("ERROR: No collection found in path "+e.path);return c},[s,e]);d.useEffect(()=>{function c(A){r&&n&&(A.preventDefault(),A.returnValue=`You have unsaved changes in this ${n.name}. Are you sure you want to leave this page?`)}return typeof window<"u"&&window.addEventListener("beforeunload",c),()=>{typeof window<"u"&&window.removeEventListener("beforeunload",c)}},[r,n]);const l=d.useCallback(c=>{t(c),i(c?o.jsxs(o.Fragment,{children:[" You have unsaved changes in this ",o.jsx("b",{children:n?.name}),"."]}):void 0)},[n?.name,t,i]);return!e||!n?o.jsx("div",{style:{width:Po}}):o.jsx(o.Fragment,{children:o.jsx(oe,{children:o.jsx(jc,{...e,formWidth:e.width,collection:n,onValuesAreModified:l})})})}const $i="new";function Jc(e,r){if(r)return oo;const t=!e.selectedSubPath,i=typeof e.width=="number"?`${e.width}px`:e.width;return t?i??Po:`calc(${Mo} + ${i??Po})`}const qc=(e,r)=>{const t=de.useLocation(),i=d.useRef(!1),s=a.useTheme(),n=a.useMediaQuery(s.breakpoints.up("lg")),l=a.useMediaQuery(s.breakpoints.down("sm"));d.useEffect(()=>{if(!e.loading&&!i.current){if(e.isUrlCollectionPath(t.pathname)){const f=t.hash===`#${$i}`,g=e.urlPathToDataPath(t.pathname),y=Zc(g,e.collections,f);r.replace(y.map(w=>xt(w,e,l)))}i.current=!0}},[t,e,r,l]);const c=d.useCallback(()=>{r.close()},[r]),A=d.useCallback(f=>{if(f.copy&&!f.entityId)throw Error("If you want to copy an entity you need to provide an entityId");const g=n&&f.collection?zr(f.collection):void 0;r.open(xt({selectedSubPath:g?.path,...f},e,l))},[n,r,e,l]),u=d.useCallback(f=>{if(f.copy&&!f.entityId)throw Error("If you want to copy an entity you need to provide an entityId");r.replace(xt(f,e,l))},[e,r,l]);return{close:c,open:A,replace:u}};function Zc(e,r,t){const i=wr({path:e,collections:r}),s=[];let n="";for(let l=0;l<i.length;l++){const c=i[l];if(c.type==="collection"&&(n=c.path),l>0){const A=i[l-1];if(c.type==="entity")s.push({path:c.path,entityId:c.entityId,copy:!1});else if(c.type==="custom_view"){if(A.type==="entity"){const u=s[s.length-1];u&&(u.selectedSubPath=c.view.path)}}else if(c.type==="collection"&&A.type==="entity"){const u=s[s.length-1];u&&(u.selectedSubPath=c.collection.alias??c.collection.path)}}}return t&&s.push({path:n,copy:!1}),s}const xt=(e,r,t)=>{const i=ge(e.path),s=e.entityId?r.buildUrlCollectionPath(`${i}/${e.entityId}/${e.selectedSubPath||""}`):r.buildUrlCollectionPath(`${i}#${$i}`);return{key:`${e.path}/${e.entityId}`,component:o.jsx(_c,{...e}),urlPath:s,parentUrlPath:r.buildUrlCollectionPath(i),width:Jc(e,t),onClose:e.onClose}};function Xc({basePath:e,baseCollectionPath:r,authController:t,collections:i,views:s,collectionOverrideHandler:n,userConfigPersistence:l,plugins:c,dataSource:A}){const u=de.useLocation(),[f,g]=d.useState(),[y,w]=d.useState(),[h,p]=d.useState(!1),[v,B]=d.useState(void 0),[C,E]=d.useState(!0),[x,k]=d.useState(void 0),S=ge(e),m=ge(r),I=S?`/${S}`:"/",D=S?`/${S}/${m}`:`/${m}`,P=d.useCallback(z=>S?`/${S}/${sr(z)}`:`/${sr(z)}`,[S]),T=d.useCallback(z=>`${ge(r)}/${sr(z)}`,[r]),Q=d.useCallback((z,ee)=>{const j=[...(z??[]).map(U=>U.hideFromNavigation?void 0:{url:T(U.alias??U.path),type:"collection",name:U.name.trim(),path:U.alias??U.path,collection:U,description:U.description?.trim(),group:U.group?.trim()}).filter(Boolean),...(ee??[]).map(U=>U.hideFromNavigation?void 0:{url:P(Array.isArray(U.path)?U.path[0]:U.path),name:U.name.trim(),type:"view",view:U,description:U.description?.trim(),group:U.group?.trim()}).filter(Boolean)],H=Object.values(j).map(U=>U.group).filter(Boolean).filter((U,X,M)=>M.indexOf(U)===X);return{navigationEntries:j,groups:H}},[P,T]),$=d.useCallback(async()=>{try{const[z=[],ee=[]]=await Promise.all([Kc(i,t,A,c),Rc(s,t,A)]);g(z),w(ee),B(Q(z??[],ee))}catch(z){console.error(z),k(z)}E(!1),p(!0)},[i,t.user,A,c,s,Q]);d.useEffect(()=>{$()},[$]);const q=d.useCallback((z,ee,j=!1)=>{if(!f)return;const H=Do(ge(z),f),U=j?l?.getCollectionConfig(z):void 0,X=H?Fe(H,U):void 0;let M=X;const K=n&&n({entityId:ee,path:ge(z)});if(K&&(M=K),X){const ae=X.subcollections,ie=X.callbacks,se=X.permissions;M={...M,subcollections:M?.subcollections??ae,callbacks:M?.callbacks??ie,permissions:M?.permissions??se}}if(M)return{...X,...M}},[e,r,f,n]),Y=d.useCallback(z=>ge(z+"/").startsWith(ge(D)+"/"),[D]),V=d.useCallback(z=>{if(z.startsWith(D))return z.replace(D,"");throw Error("Expected path starting with "+D)},[D]),G=d.useCallback(({path:z})=>`s/edit/${sr(z)}`,[]),F=d.useCallback(z=>{if(!f)throw Error("Collections have not been initialised yet");return br(z,f)},[f]),L=u.state,W=L&&L.base_location?L.base_location:u;return{collections:f??[],views:y??[],loading:!h||C,navigationLoadingError:x,homeUrl:I,basePath:e,baseCollectionPath:r,initialised:h,getCollection:q,isUrlCollectionPath:Y,urlPathToDataPath:V,buildUrlCollectionPath:T,buildUrlEditCollectionPath:G,buildCMSUrlPath:P,resolveAliasesFrom:F,topLevelNavigation:v,baseLocation:W,refreshNavigation:$}}function sr(e){return encodeURIComponent(ge(e)).replaceAll("%2F","/").replaceAll("%23","#")}async function Kc(e,r,t,i){let s=[];return typeof e=="function"?s=await e({user:r.user,authController:r,dataSource:t}):Array.isArray(e)&&(s=e),i&&i.forEach(n=>{n.collections?.injectCollections&&(s=n.collections?.injectCollections(s??[]))}),s}async function Rc(e,r,t){let i=[];return typeof e=="function"?i=await e({user:r.user,authController:r,dataSource:t}):Array.isArray(e)&&(i=e),i}function ed(){const e=de.useLocation(),r=de.useNavigate(),[t,i]=d.useState([]),s=d.useRef(t),n=d.useRef({}),l=d.useRef(0),c=g=>{s.current=g,i(g)};d.useEffect(()=>{const w=(e.state?.panels??[]).map(h=>n.current[h]).filter(h=>Boolean(h));re(s.current.map(h=>h.key),w.map(h=>h.key))||c(w)},[e]);const A=d.useCallback(()=>{if(t.length===0)return;const g=t[t.length-1],y=[...t.slice(0,-1)];if(c(y),l.current>0)g.urlPath&&r(-1),l.current--;else if(g.parentUrlPath){const w=e.state?.base_location??e;r(g.parentUrlPath,{replace:!0,state:{base_location:w,panels:y.map(h=>h.key)}})}},[t,r,e]),u=d.useCallback(g=>{const y=Array.isArray(g)?g:[g];y.forEach(p=>{n.current[p.key]=p}),l.current=l.current+y.length;const w=e.state?.base_location??e,h=[...t,...y];c(h),y.forEach(p=>{p.urlPath&&r(p.urlPath,{state:{base_location:w,panels:h.map(v=>v.key)}})})},[e,r,t]),f=d.useCallback(g=>{const y=Array.isArray(g)?g:[g];y.forEach(p=>{n.current[p.key]=p});const w=e.state?.base_location??e,h=[...t.slice(0,-y.length),...y];c(h),y.forEach(p=>{p.urlPath&&r(p.urlPath,{replace:!0,state:{base_location:w,panels:h.map(v=>v.key)}})})},[e,r,t]);return{sidePanels:t,close:A,open:u,replace:f}}const od="/c";function Oi(e){const r=Go(),{children:t,collections:i,views:s,entityLinkBuilder:n,userConfigPersistence:l,dateTimeFormat:c,locale:A,authController:u,collectionOverrideHandler:f,storageSource:g,dataSource:y,basePath:w,baseCollectionPath:h,plugins:p,onAnalyticsEvent:v,fields:B}=e,C=w??"/",E=h??od,x=A?Zt[A]:void 0,k=Xc({basePath:C,baseCollectionPath:E,authController:u,collections:i,views:s,collectionOverrideHandler:f,userConfigPersistence:l,dataSource:y,plugins:p}),S=ed(),m=qc(k,S);Pe();const I=u.initialLoading||k.loading||(p?.some(P=>P.loading)??!1);if(k.navigationLoadingError)return o.jsx(ir,{maxWidth:300,fullScreen:!0,children:o.jsx(fe,{title:"Error loading navigation",error:k.navigationLoadingError})});if(u.authError)return o.jsx(ir,{maxWidth:300,fullScreen:!0,children:o.jsx(fe,{title:"Error loading auth",error:u.authError})});const D={entityLinkBuilder:n,dateTimeFormat:c,locale:A,plugins:p,onAnalyticsEvent:v,fields:B};return o.jsx(pr.Provider,{value:r,children:o.jsx(vr.Provider,{value:D,children:o.jsx(cn.Provider,{value:l,children:o.jsx(an.Provider,{value:g,children:o.jsx(rn.Provider,{value:y,children:o.jsx(nn.Provider,{value:u,children:o.jsx(sn.Provider,{value:S,children:o.jsx(ln.Provider,{value:m,children:o.jsx(tn.Provider,{value:k,children:o.jsx(bl,{children:o.jsx(As.LocalizationProvider,{dateAdapter:ds.AdapterDateFns,utils:us,locale:x,children:o.jsx(rd,{loading:I,children:t})})})})})})})})})})})})}function rd({loading:e,children:r}){const t=R();let i=r({context:t,loading:e});const s=t.plugins;return!e&&s&&s.forEach(n=>{n.wrapperComponent&&(i=o.jsx(n.wrapperComponent.Component,{...n.wrapperComponent.props,context:t,children:i}))}),o.jsx(o.Fragment,{children:i})}function Yi({drawerOpen:e,closeDrawer:r}){const t=R(),i=he(),[s,n]=d.useState(!1),l=s&&!e,c=d.useCallback(()=>n(!0),[]),A=d.useCallback(()=>n(!1),[]);if(!i.topLevelNavigation)throw Error("Navigation not ready in Drawer");const{navigationEntries:u,groups:f}=i.topLevelNavigation,g=Object.values(u).filter(h=>!h.group),y=d.useCallback(h=>e?o.jsx(a.Box,{pt:2,pl:2,pr:2,pb:.5,sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:o.jsx(a.Typography,{variant:"caption",color:"textSecondary",className:"weight-500",sx:{flexGrow:1},children:h?h.toUpperCase():"Ungrouped views".toUpperCase()})}):o.jsx(a.Box,{sx:{height:16}}),[e]),w=h=>{const p=h.type==="collection"?"drawer_navigate_to_collection":h.type==="view"?"drawer_navigate_to_view":"unmapped_event";t.onAnalyticsEvent?.(p,{url:h.url})};return o.jsxs(a.List,{onMouseEnter:c,onMouseMove:c,onMouseLeave:A,children:[f.map(h=>o.jsxs(d.Fragment,{children:[y(h),Object.values(u).filter(p=>p.group===h).map((p,v)=>o.jsx(Et,{Icon:or(p.collection??p.view),tooltipsOpen:l,drawerOpen:e,onClick:()=>w(p),url:p.url,name:p.name},`navigation_${v}`))]},`drawer_group_${h}`)),g.length>0&&y(),g.map((h,p)=>o.jsx(Et,{Icon:or(h.collection??h.view),tooltipsOpen:l,onClick:()=>w(h),drawerOpen:e,url:h.url,name:h.name},`navigation_${p}`))]})}function Et({name:e,Icon:r,drawerOpen:t,tooltipsOpen:i,url:s,onClick:n}){const l=a.useTheme(),c=o.jsx(r,{fontSize:"medium",sx:u=>({color:u.palette.mode==="dark"?Io.grey[500]:Io.grey[700]})}),A=o.jsxs(a.ListItem,{button:!0,component:de.NavLink,onClick:n,style:({isActive:u})=>({fontWeight:u?"600":"500",background:u?l.palette.mode==="light"?a.darken(l.palette.background.default,.1):a.lighten(l.palette.background.default,.08):"inherit",minHeight:"48px",borderRadius:"0 16px 16px 0"}),sx:u=>({pl:3,alignItems:"center"}),to:s,children:[c,o.jsx(a.Typography,{variant:"subtitle2",sx:{opacity:t?1:0,fontWeight:"inherit",ml:3,p:.5},children:e.toUpperCase()})]});return t?A:o.jsx(a.Tooltip,{open:i,placement:"right",title:e,children:A})}const td=function({title:r,toolbarExtraWidget:t,drawerOpen:i}){const s=$o(),{breadcrumbs:n}=s,l=Ue(),{mode:c,toggleMode:A}=Go(),u=a.useTheme(),f=a.useMediaQuery(u.breakpoints.up("md")),g=l.user?.displayName?l.user.displayName[0].toUpperCase():l.user?.email?l.user.email[0].toUpperCase():"A";return o.jsx(a.Box,{sx:{position:"fixed",marginLeft:u.spacing(8),width:`calc(100% - ${u.spacing(8)})`,zIndex:f?u.zIndex.drawer+1:void 0,transition:u.transitions.create(["width","margin"],{easing:u.transitions.easing.sharp,duration:u.transitions.duration.leavingScreen}),...i&&f&&{marginLeft:`calc(${mo}px - 8px)`,width:`calc(100% - ${mo}px)`,transition:u.transitions.create(["width","margin"],{easing:u.transitions.easing.sharp,duration:u.transitions.duration.enteringScreen})}},children:o.jsx(a.Slide,{direction:"down",in:!0,mountOnEnter:!0,unmountOnExit:!0,children:o.jsxs(a.Toolbar,{sx:{gap:1},children:[o.jsx(a.Hidden,{lgDown:!0,children:o.jsx(a.Box,{mr:2,children:o.jsx(a.Link,{underline:"none",color:"inherit",component:de.Link,to:".",children:o.jsx(a.Typography,{variant:"h6",noWrap:!0,className:"weight-500",children:r})},"breadcrumb-home")})}),f&&o.jsx(a.Box,{children:o.jsx(a.Breadcrumbs,{separator:o.jsx(il,{htmlColor:"rgb(0,0,0,0.87)",fontSize:"small"}),"aria-label":"breadcrumb",children:n.map((y,w)=>o.jsx(a.Link,{underline:"none",color:"inherit",component:de.Link,to:y.url,children:o.jsx(a.Chip,{sx:h=>({backgroundColor:h.palette.grey[200],height:h.spacing(3),color:h.palette.grey[800],fontWeight:h.typography.fontWeightMedium,"&:hover, &:focus":{cursor:"pointer",backgroundColor:h.palette.grey[300]},"&:active":{boxShadow:h.shadows[1],backgroundColor:h.palette.grey[400]}}),label:y.title})},`breadcrumb-${w}`))})}),o.jsx(a.Box,{flexGrow:1}),t&&o.jsx(oe,{children:t}),o.jsx(a.Box,{p:1,children:o.jsx(a.IconButton,{color:"inherit","aria-label":"Open drawer",edge:"start",onClick:()=>A(),size:"large",children:c==="dark"?o.jsx(nl,{}):o.jsx(tl,{})})}),o.jsx(a.Box,{p:1,children:l.user&&l.user.photoURL?o.jsx(a.Avatar,{src:l.user.photoURL}):o.jsx(a.Avatar,{children:g})}),o.jsx(a.Button,{variant:"text",color:"inherit",onClick:l.signOut,children:"Log Out"})]})})})},mo=280,Vi=d.memo(function(r){const{children:t,name:i,logo:s,drawerUrl:n,drawerUrlLabel:l,toolbarExtraWidget:c,Drawer:A}=r,u=a.useTheme(),f=a.useMediaQuery(u.breakpoints.up("md")),g=he(),y=nd(),[w,h]=d.useState(!1),p=A||Yi,v=d.useCallback(()=>{h(!1)},[]);return o.jsxs(a.Box,{sx:{display:"flex",height:"100vh",width:"100vw",pt:"env(safe-area-inset-top)",pl:"env(safe-area-inset-left)",pr:"env(safe-area-inset-right)",pb:"env(safe-area-inset-bottom)"},children:[o.jsx(td,{title:i,drawerOpen:w,toolbarExtraWidget:c}),o.jsx(sd,{open:w,logo:s,drawerUrl:n,drawerUrlLabel:l,setDrawerOpen:h,children:o.jsx("nav",{children:g.loading?o.jsx(qe,{}):o.jsx(p,{drawerOpen:w,closeDrawer:v})})}),o.jsxs(a.Box,{component:"main",sx:{display:"flex",flexDirection:"column",flexGrow:1,width:"100%",height:"100%",overflow:"auto"},children:[o.jsx(id,{}),o.jsx(a.Box,{ref:y,sx:{flexGrow:1,m:f?2:1,borderRadius:"12px",border:`1px solid ${u.palette.divider}`,height:"100%",overflow:"auto"},children:o.jsx(oe,{children:t})})]})]})},re);function nd(){const e=d.useRef({}),r=de.useLocation(),t=d.createRef(),i=()=>{!t.current||!r.key||(e.current[r.key]=t.current.scrollTop)};return d.useEffect(()=>{const s=t.current;if(s)return s.addEventListener("scroll",i,{passive:!0}),()=>{s&&s.removeEventListener("scroll",i)}},[t,r]),d.useEffect(()=>{!t.current||!e.current||!e.current[r.key]||t.current.scrollTo({top:e.current[r.key],behavior:"auto"})},[r]),t}const id=ue.styled("div")(({theme:e})=>({display:"flex",flexDirection:"column",...e.mixins.toolbar}));function sd(e){const r=R(),t=a.useTheme(),i=a.useMediaQuery(t.breakpoints.up("md")),{open:s,logo:n,setDrawerOpen:l,drawerUrl:c="https://firecms.co/?utm_source=drawer",drawerUrlLabel:A="firecms.co",...u}=e;let f;n?f=o.jsx("img",{style:{maxWidth:"100%",maxHeight:"100%"},src:n,alt:"Logo"}):f=o.jsx(Bt,{});const g=o.jsx(jt,{color:"inherit","aria-label":"Open drawer",edge:"start",onClick:()=>l(!0),size:"large",sx:{position:"absolute",top:8,left:24},children:o.jsx(el,{})});return o.jsxs(o.Fragment,{children:[!i&&g,o.jsxs(a.Drawer,{...u,variant:i?"permanent":"temporary",open:s,onClose:i?void 0:()=>l(!1),sx:{width:mo,flexShrink:0,height:"100%",whiteSpace:"nowrap",boxSizing:"border-box",border:"none",...s&&{...Wi(t),"& .MuiDrawer-paper":Wi(t)},...!s&&{...zi(t,i),"& .MuiDrawer-paper":zi(t,i)}},children:[o.jsx(jt,{onClick:()=>l(!1),sx:{position:"absolute",right:16,top:16,opacity:s?1:0,transition:t.transitions.create("opacity",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})},children:t.direction==="rtl"?o.jsx(rl,{}):o.jsx(ol,{})}),o.jsx(a.Toolbar,{sx:{position:"absolute",left:s?"-100%":0,opacity:s?0:1,transition:t.transitions.create(["left","opacity"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})},children:s?g:o.jsx(a.Tooltip,{title:"Open menu",placement:"right",children:g})}),o.jsx(a.Link,{color:"inherit",component:de.NavLink,to:".",sx:y=>({transition:y.transitions.create(["padding"],{easing:y.transitions.easing.sharp,duration:y.transitions.duration.enteringScreen}),p:y.spacing(s?4:9,s?12:2,0,s?3:2)}),children:o.jsx(a.Tooltip,{title:"Home",placement:"right",children:o.jsx("div",{onClick:()=>{r.onAnalyticsEvent?.("drawer_navigate_to_home")},children:f})})},"breadcrumb-home"),e.children,o.jsxs(a.Link,{sx:y=>({width:mo,position:"fixed",bottom:0,left:s?0:"-100%",opacity:s?1:0,transition:y.transitions.create(["left","opacity"],{easing:y.transitions.easing.sharp,duration:y.transitions.duration.enteringScreen}),px:"24px",py:1,display:"flex",alignItems:"center",fontWeight:y.typography.fontWeightMedium,background:y.palette.mode==="light"?"rgba(255,255,255,0.6)":a.alpha(y.palette.background.paper,.1),backdropFilter:"blur(8px)"}),href:c,onMouseDown:y=>{y.preventDefault()},target:"_blank",children:[o.jsx(po,{style:{marginRight:"24px"},fontSize:"small"}),A]})]})]})}const Wi=e=>({willChange:"width",pb:"32px",width:mo,border:"none",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),backgroundColor:e.palette.background.default,overflowX:"hidden"}),zi=(e,r)=>({willChange:"width",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),border:"none",overflowX:"hidden",backgroundColor:e.palette.background.default,width:r?`calc(${e.spacing(9)})`:"0px"}),Ui=({mode:e,primaryColor:r,secondaryColor:t,fontFamily:i,headersFontFamily:s})=>({...a.createTheme({palette:{mode:e,background:{default:e==="dark"?"#202024":"#f8f8fa",paper:e==="dark"?"#121215":"#ffffff"},primary:{main:r||"#0070f4"},secondary:{main:t||Io.pink[400]},error:{main:Io.red.A400}},shape:{borderRadius:6},typography:{fontFamily:i||"'Rubik', 'Roboto', 'Helvetica', 'Arial', sans-serif",fontWeightMedium:500,h6:{fontFamily:i||"'Rubik', 'Roboto', 'Helvetica', 'Arial', sans-serif",fontSize:"1.15rem",fontWeight:500},h5:{fontFamily:i||"'Rubik', 'Roboto', 'Helvetica', 'Arial', sans-serif",fontSize:"1.55rem"},h4:{fontFamily:i||"'Rubik', 'Roboto', 'Helvetica', 'Arial', sans-serif",fontSize:"2rem",fontWeight:500},h3:{fontFamily:i||"'Rubik', 'Roboto', 'Helvetica', 'Arial', sans-serif",fontWeight:600},h2:{fontFamily:s||"'IBM Plex Mono', 'Space Mono', 'Rubik', 'Roboto', 'Helvetica', 'Arial', sans-serif",fontWeight:600},h1:{fontFamily:s||"'IBM Plex Mono', 'Space Mono', 'Rubik', 'Roboto', 'Helvetica', 'Arial', sans-serif",fontWeight:600},label:{display:"block",color:"#838383",fontWeight:500,fontSize:"0.875rem",lineHeight:1.43}},components:{MuiSkeleton:{styleOverrides:{root:{borderRadius:6}}},MuiButton:{styleOverrides:{root:{borderRadius:6}}},MuiTableRow:{styleOverrides:{root:{"&:last-child td":{borderBottom:0}}}},MuiTypography:{styleOverrides:{root:{"&.mono":{fontFamily:"'IBM Plex Mono', 'Space Mono', monospace, 'Lucida Console'"},"&.weight-500":{fontWeight:500}}}},MuiInputBase:{styleOverrides:{root:{"&.mono":{fontFamily:"'IBM Plex Mono', 'Space Mono', 'Lucida Console', monospace"},"& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button":{display:"none"},"& input[type=number]":{MozAppearance:"textfield"}}}},MuiDialog:{styleOverrides:{paper:{borderRadius:6}}},MuiCardActionArea:{styleOverrides:{root:{borderRadius:6}}}}})}),Ni=d.memo(function({HomePage:r=Li,customRoutes:t}){const i=de.useLocation(),s=he(),l=R().plugins??[];if(!s)return o.jsx(o.Fragment,{});const c=i.state,A=c&&c.base_location?c.base_location:i,u=[];s.views&&s.views.forEach(h=>{Array.isArray(h.path)?u.push(...h.path.map(p=>Hi(p,h))):u.push(Hi(h.path,h))});const g=[...s.collections??[]].sort((h,p)=>p.path.length-h.path.length).map(h=>{const p=s.buildUrlCollectionPath(h.alias??h.path),v=[];return l&&l.forEach(B=>{B.collections?.CollectionActions&&v.push(...vt(B.collections?.CollectionActions))}),v.push(...vt(h.Actions)),o.jsx(de.Route,{path:p+"/*",element:o.jsx(lr,{path:p,title:h.name,type:"collection",children:o.jsx(yt,{isSubCollection:!1,fullPath:h.alias??h.path,...h,Actions:v},`collection_view_${h.alias??h.path}`)})},`navigation_${h.alias??h.path}`)}),y=o.jsx(de.Route,{path:"/",element:o.jsx(lr,{path:s.homeUrl,title:"Home",type:"home",children:o.jsx(r,{})},"navigation_home")}),w=o.jsx(de.Route,{path:"*",element:o.jsx(Gi,{})});return o.jsxs(de.Routes,{location:A,children:[g,u,y,w,t]})}),Hi=(e,r)=>o.jsx(de.Route,{path:e,element:o.jsx(lr,{path:e,title:r.name,type:"view",children:r.view},`navigation_${e}`)},"navigation_view_"+e),lr=d.memo(function({children:r,title:t,path:i,type:s}){const n=$o();return d.useEffect(()=>{n.set({breadcrumbs:[{title:t,url:i}]})},[i,t]),o.jsx(o.Fragment,{children:r})},re);function ld(e){return e}function ad(e){return e}function cd(e){return e}function dd(e){return e}function Ad(e){return e}function ud(e){return e}function fd(e){return e}function gd(e){return e}function hd(e){return e}function ji(){const e=a.useMediaQuery("(prefers-color-scheme: dark)"),t=(localStorage.getItem("prefers-dark-mode")!=null?localStorage.getItem("prefers-dark-mode")==="true":null)??e,[i,s]=d.useState(t?"dark":"light");d.useEffect(()=>{s(t?"dark":"light"),c(t?"dark":"light")},[t]);const n=d.useCallback(()=>{s("dark"),c("dark")},[e]),l=d.useCallback(()=>{s("light"),c("light")},[]),c=d.useCallback(u=>{document.body.style.setProperty("color-scheme",u)},[document]),A=d.useCallback(()=>{i==="light"?(e?localStorage.removeItem("prefers-dark-mode"):localStorage.setItem("prefers-dark-mode","true"),n()):(e?localStorage.setItem("prefers-dark-mode","false"):localStorage.removeItem("prefers-dark-mode"),l())},[i,e]);return{mode:i,setMode:s,toggleMode:A}}function _i(){const[e,r]=d.useState({}),t=d.useCallback(n=>{const l=localStorage.getItem(n);return l?JSON.parse(l):{}},[]),i=d.useCallback(n=>{const l=`collection_config::${Ur(n)}`;return e[l]?e[l]:t(l)},[e,t]);return{onCollectionModified:d.useCallback((n,l)=>{const c=`collection_config::${Ur(n)}`;localStorage.setItem(c,JSON.stringify(l)),r(A=>{const u=A[c],f=Fe(u??t(n),l);return Fe(A,f)})},[t]),getCollectionConfig:i}}const Ji=({children:e,maxSnack:r=3,autoHideDuration:t=3500})=>o.jsx(Pt.SnackbarProvider,{maxSnack:r,autoHideDuration:t,children:e}),qi=({firebaseApp:e,signInOptions:r})=>{const[t,i]=d.useState(void 0),[s,n]=d.useState(),[l,c]=d.useState(),[A,u]=d.useState(!0),[f,g]=d.useState(!0),[y,w]=d.useState(!1),[h,p]=d.useState(),[v,B]=d.useState();d.useEffect(()=>{if(e)try{const F=Z.getAuth(e);return n(void 0),i(F.currentUser),Z.onAuthStateChanged(F,E,L=>c(L))}catch(F){return n(F),()=>{}}},[e]);const C=d.useCallback(()=>{w(!0),i(null)},[]),E=d.useCallback(async F=>{i(F),u(!1),g(!1)},[]),x=d.useCallback(()=>{const F=Z.getAuth(e);Z.signOut(F).then(L=>{i(null),c(null)}),w(!1)},[e]),k=d.useCallback(F=>r.find(L=>{if(L===null)throw Error("useFirebaseAuthController");if(typeof L=="object"&&L.provider===F)return L}),[r]),S=d.useCallback(()=>{const F=new Z.GoogleAuthProvider,L=k("google.com");L?.scopes&&L.scopes.forEach(z=>F.addScope(z)),L?.customParameters&&F.setCustomParameters(L.customParameters);const W=Z.getAuth();Z.signInWithPopup(W,F).catch(c)},[k]),m=d.useCallback((F,L)=>{g(!0),Z.signInWithPopup(F,L).catch(c).then(()=>g(!1))},[]),I=d.useCallback(()=>{const F=Z.getAuth();g(!0),Z.signInAnonymously(F).catch(c).then(()=>g(!1))},[]),D=d.useCallback((F,L)=>{const W=Z.getAuth();return g(!0),Z.signInWithPhoneNumber(W,F,L).catch(c).then(z=>{g(!1),p(z??void 0)})},[]),P=d.useCallback(()=>{const F=new Z.OAuthProvider("apple.com"),L=k("apple.com");L?.scopes&&L.scopes.forEach(z=>F.addScope(z)),L?.customParameters&&F.setCustomParameters(L.customParameters);const W=Z.getAuth();m(W,F)},[m,k]),T=d.useCallback(()=>{const F=new Z.FacebookAuthProvider,L=k("facebook.com");L?.scopes&&L.scopes.forEach(z=>F.addScope(z)),L?.customParameters&&F.setCustomParameters(L.customParameters);const W=Z.getAuth();m(W,F)},[m,k]),Q=d.useCallback(()=>{const F=new Z.GithubAuthProvider,L=k("github.com");L?.scopes&&L.scopes.forEach(z=>F.addScope(z)),L?.customParameters&&F.setCustomParameters(L.customParameters);const W=Z.getAuth();m(W,F)},[m,k]),$=d.useCallback(()=>{const F=new Z.OAuthProvider("microsoft.com"),L=k("microsoft.com");L?.scopes&&L.scopes.forEach(z=>F.addScope(z)),L?.customParameters&&F.setCustomParameters(L.customParameters);const W=Z.getAuth();m(W,F)},[m,k]),q=d.useCallback(()=>{const F=new Z.TwitterAuthProvider,L=k("twitter.com");L?.customParameters&&F.setCustomParameters(L.customParameters);const W=Z.getAuth();m(W,F)},[m,k]),Y=d.useCallback((F,L)=>{const W=Z.getAuth();g(!0),Z.signInWithEmailAndPassword(W,F,L).catch(c).then(()=>g(!1))},[]),V=d.useCallback((F,L)=>{const W=Z.getAuth();g(!0),Z.createUserWithEmailAndPassword(W,F,L).catch(c).then(()=>g(!1))},[]),G=d.useCallback(F=>{const L=Z.getAuth();return g(!0),Z.fetchSignInMethodsForEmail(L,F).then(W=>(g(!1),W))},[]);return{user:t??null,authError:s,authProviderError:l,authLoading:f,initialLoading:A,confirmationResult:h,signOut:x,loginSkipped:y,skipLogin:C,googleLogin:S,anonymousLogin:I,appleLogin:P,facebookLogin:T,githubLogin:Q,microsoftLogin:$,twitterLogin:q,emailPasswordLogin:Y,phoneLogin:D,fetchSignInMethodsForEmail:G,createUserWithEmailAndPassword:V,extra:v,setExtra:B}};function pd(e){if(!e)return e;const r=e.toDate();return r.setHours(0,0,0,0),J.Timestamp.fromDate(r)}function Zi({firebaseApp:e,textSearchController:r,fields:t}){const i=d.useCallback((c,A,u)=>{const f=Ze(c.data()),g=c.data()?u.properties?Gn(f,u.properties):c.data():void 0;return{id:c.id,path:Xi(c.ref.path),values:g}},[]),s=d.useCallback((c,A,u,f,g,y)=>{if(!e)throw Error("useFirestoreDataSource Firebase not initialised");const w=J.getFirestore(e),h=J.collection(w,c),p=[];return A&&Object.entries(A).filter(([v,B])=>!!B).forEach(([v,B])=>{const[C,E]=B;p.push(J.where(v,C,ko(E,w)))}),A&&u&&f&&Object.entries(A).forEach(([v,B])=>{v!==u&&p.push(J.orderBy(v,"asc"))}),u&&f&&p.push(J.orderBy(u,f)),g&&p.push(J.startAfter(g)),y&&p.push(J.limit(y)),J.query(h,...p)},[e]),n=d.useCallback((c,A,u)=>{if(!e)throw Error("useFirestoreDataSource Firebase not initialised");const f=J.getFirestore(e);return J.getDoc(J.doc(f,c,A)).then(g=>{if(!g.exists())return;const y=pe({collection:u,path:c,entityId:g.id,values:Ze(g.data()),fields:t});return i(g,c,y)})},[e]),l=d.useCallback(async(c,A,u)=>{if(!r)throw Error("Trying to make text search without specifying a FirestoreTextSearchController");const f=await r({path:c,searchString:A});if(f===void 0)throw Error("The current path is not supported by the specified FirestoreTextSearchController");const g=f.map(async y=>{try{return await n(c,y,u)}catch(w){console.error(w);return}});return Promise.all(g).then(y=>y.filter(w=>w!==void 0&&w.values))},[n]);return{fetchCollection:d.useCallback(({path:c,collection:A,filter:u,limit:f,startAfter:g,searchString:y,orderBy:w,order:h})=>{if(y)return l(c,y,A);console.debug("Fetching collection",c,f,u,g,w,h);const p=s(c,u,w,h,g,f);return J.getDocs(p).then(v=>v.docs.map(B=>{const C=pe({collection:A,path:c,values:Ze(B.data()),fields:t});return i(B,c,C)}))},[s,l]),listenCollection:d.useCallback(({path:c,collection:A,filter:u,limit:f,startAfter:g,searchString:y,orderBy:w,order:h,onUpdate:p,onError:v})=>{console.debug("Listening collection",c,f,u,g,w,h);const B=s(c,u,w,h,g,f);if(y)return l(c,y,A).then(p).catch(E=>{v&&v(E)}),()=>{};const C=pe({collection:A,path:c,fields:t});return J.onSnapshot(B,{next:E=>{p(E.docs.map(x=>i(x,c,C)))},error:v})},[s,l]),fetchEntity:d.useCallback(({path:c,entityId:A,collection:u})=>n(c,A,u),[n]),listenEntity:d.useCallback(({path:c,entityId:A,collection:u,onUpdate:f,onError:g})=>{if(!e)throw Error("useFirestoreDataSource Firebase not initialised");const y=J.getFirestore(e);return J.onSnapshot(J.doc(y,c,A),{next:w=>{const h=pe({collection:u,path:c,entityId:w.id,fields:t});f(i(w,c,h))},error:g})},[e]),saveEntity:d.useCallback(({path:c,entityId:A,values:u,collection:f,status:g})=>{if(!e)throw Error("useFirestoreDataSource Firebase not initialised");const y=J.getFirestore(e),h=pe({collection:f,path:c,entityId:A,fields:t}).properties,p=J.collection(y,c),v=ko(u,y),B=Ln({inputValues:v,properties:h,status:g,timestampNowValue:J.serverTimestamp(),setDateToMidnight:pd});console.debug("Saving entity",c,A,B);let C;return A?C=J.doc(p,A):C=J.doc(p),J.setDoc(C,B,{merge:!0}).then(()=>({id:C.id,path:c,values:Ze(B)}))},[e]),deleteEntity:d.useCallback(({entity:c})=>{if(!e)throw Error("useFirestoreDataSource Firebase not initialised");const A=J.getFirestore(e);return J.deleteDoc(J.doc(A,c.path,c.id))},[e]),checkUniqueField:d.useCallback((c,A,u,f,g)=>{if(!e)throw Error("useFirestoreDataSource Firebase not initialised");const y=J.getFirestore(e);if(console.debug("Check unique field entity",c,A,u,g),f.dataType==="array"&&console.error("checkUniqueField received an array"),u==null)return Promise.resolve(!0);const w=J.query(J.collection(y,c),J.where(A,"==",u));return J.getDocs(w).then(h=>h.docs.filter(p=>p.id!==g).length===0)},[e]),generateEntityId:d.useCallback(c=>{if(!e)throw Error("useFirestoreDataSource Firebase not initialised");const A=J.getFirestore(e);return J.doc(J.collection(A,c)).id},[e]),countEntities:d.useCallback(async c=>{if(!e)throw Error("useFirestoreDataSource Firebase not initialised");const A=J.getFirestore(e),u=J.collection(A,c);return(await J.getCountFromServer(u)).data().count},[e])}}function Ze(e){if(e===null)return e;if(J.serverTimestamp().isEqual(e))return null;if(e instanceof J.Timestamp||typeof e.toDate=="function")return e.toDate();if(e instanceof Date)return e;if(e instanceof yo)return new yo(e.latitude,e.longitude);if(e instanceof J.DocumentReference)return new Ye(e.id,Xi(e.path));if(Array.isArray(e))return e.map(Ze);if(typeof e=="object"){const r={};for(const t of Object.keys(e))r[t]=Ze(e[t]);return r}return e}function ko(e,r){return Array.isArray(e)?e.map(t=>ko(t,r)):e instanceof Ye?J.doc(r,e.path,e.id):e instanceof yo?new J.GeoPoint(e.latitude,e.longitude):e instanceof Date?J.Timestamp.fromDate(e):e&&typeof e=="object"?Object.entries(e).map(([t,i])=>({[t]:ko(i,r)})).reduce((t,i)=>({...t,...i}),{}):e}function Xi(e){let r=e.lastIndexOf("/");return r=r===-1?e.length:r,e.substring(0,r)}function Ki({firebaseApp:e}){const[r,t]=d.useState();d.useEffect(()=>{e&&t(eo.getStorage(e))},[e]);const i={};return{uploadFile({file:s,fileName:n,path:l,metadata:c}){if(!r)throw Error("useFirebaseStorageSource Firebase not initialised");const A=n??s.name;return console.debug("Uploading file",A,s,l,c),eo.uploadBytes(eo.ref(r,`${l}/${A}`),s,c).then(u=>({path:u.ref.fullPath}))},async getDownloadURL(s){if(!r)throw Error("useFirebaseStorageSource Firebase not initialised");if(i[s])return i[s];const n=eo.ref(r,s),[l,c]=await Promise.all([eo.getDownloadURL(n),eo.getMetadata(n)]),A={url:l,metadata:c};return i[s]=A,A}}}function Ri({authController:e,authentication:r,storageSource:t,dataSource:i}){const s=Boolean(r),[n,l]=d.useState(s),[c,A]=d.useState(!1),[u,f]=d.useState(!s),g=u&&(!s||Boolean(e.user)||Boolean(e.loginSkipped))&&!c;d.useEffect(()=>{e.loginSkipped&&f(!0)},[e.loginSkipped]);const y=d.useRef(),w=d.useCallback(async()=>{if(e.initialLoading)return;if(!e.user){y.current=void 0,l(!1),f(!1);return}const h=e.user;if(r instanceof Function&&h&&!re(y.current,h)){l(!0);try{await r({user:h,authController:e,dataSource:i,storageSource:t})||(e.signOut(),A(!0))}catch(p){A(p),e.signOut()}l(!1),f(!0),y.current=h}else l(!1);!e.initialLoading&&!h&&f(!0)},[e,r,i,t]);return d.useEffect(()=>{w()},[w]),{canAccessMainView:g,authLoading:s&&n,notAllowedError:c,authVerified:u}}const bd=`It seems like the provided Firebase config is not correct. If you 
are using the credentials provided automatically by Firebase 
Hosting, make sure you link your Firebase app to Firebase Hosting. 
`;function es({firebaseConfig:e,onFirebaseInit:r,name:t}){const[i,s]=d.useState(),[n,l]=d.useState(!1),[c,A]=d.useState(),u=d.useCallback(f=>{try{const g=Ws.initializeApp(f,t??"[DEFAULT]");A(void 0),l(!1),r&&r(f),s(g)}catch(g){console.error("Error initialising Firebase",g),A(bd+`
`+(g.message??JSON.stringify(g)))}},[t,r]);return d.useEffect(()=>{l(!0),e?u(e):process.env.NODE_ENV==="production"?fetch("/__/firebase/init.json").then(async f=>{if(console.debug("Firebase init response",f.status),f&&f.status<300){const g=await f.json();u(g)}}).catch(f=>{l(!1),A("Could not load Firebase configuration from Firebase hosting. If the app is not deployed in Firebase hosting, you need to specify the configuration manually"+f.toString())}):(l(!1),A("You need to deploy the app to Firebase hosting or specify a Firebase configuration object"))},[e,u]),{firebaseApp:i,firebaseConfigLoading:n,configError:c}}const yd=e=>o.jsx(o.Fragment,{children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",width:32,height:32,children:[o.jsxs("linearGradient",{id:"95yY7w43Oj6n2vH63j6HJb",x1:"29.401",x2:"29.401",y1:"4.064",y2:"106.734",gradientTransform:"matrix(1 0 0 -1 0 66)",gradientUnits:"userSpaceOnUse",children:[o.jsx("stop",{offset:"0",stopColor:"#ff5840"}),o.jsx("stop",{offset:".007",stopColor:"#ff5840"}),o.jsx("stop",{offset:".989",stopColor:"#fa528c"}),o.jsx("stop",{offset:"1",stopColor:"#fa528c"})]}),o.jsx("path",{fill:"url(#95yY7w43Oj6n2vH63j6HJb)",d:"M47.46,15.5l-1.37,1.48c-1.34,1.44-3.5,1.67-5.15,0.6c-2.71-1.75-6.43-3.13-11-2.37 c-4.94,0.83-9.17,3.85-11.64, 7.97l-8.03-6.08C14.99,9.82,23.2,5,32.5,5c5,0,9.94,1.56,14.27,4.46 C48.81,10.83,49.13,13.71,47.46,15.5z"}),o.jsxs("linearGradient",{id:"95yY7w43Oj6n2vH63j6HJc",x1:"12.148",x2:"12.148",y1:".872",y2:"47.812",gradientTransform:"matrix(1 0 0 -1 0 66)",gradientUnits:"userSpaceOnUse",children:[o.jsx("stop",{offset:"0",stopColor:"#feaa53"}),o.jsx("stop",{offset:".612",stopColor:"#ffcd49"}),o.jsx("stop",{offset:"1",stopColor:"#ffde44"})]}),o.jsx("path",{fill:"url(#95yY7w43Oj6n2vH63j6HJc)",d:"M16.01,30.91c-0.09,2.47,0.37,4.83,1.27,6.96l-8.21,6.05c-1.35-2.51-2.3-5.28-2.75-8.22 c-1.06-6.88,0.54-13.38, 3.95-18.6l8.03,6.08C16.93,25.47,16.1,28.11,16.01,30.91z"}),o.jsxs("linearGradient",{id:"95yY7w43Oj6n2vH63j6HJd",x1:"29.76",x2:"29.76",y1:"32.149",y2:"-6.939",gradientTransform:"matrix(1 0 0 -1 0 66)",gradientUnits:"userSpaceOnUse",children:[o.jsx("stop",{offset:"0",stopColor:"#42d778"}),o.jsx("stop",{offset:".428",stopColor:"#3dca76"}),o.jsx("stop",{offset:"1",stopColor:"#34b171"})]}),o.jsx("path",{fill:"url(#95yY7w43Oj6n2vH63j6HJd)",d:"M50.45,51.28c-4.55,4.07-10.61,6.57-17.36,6.71C22.91,58.2,13.66,52.53,9.07,43.92l8.21-6.05 C19.78,43.81, 25.67,48,32.5,48c3.94,0,7.52-1.28,10.33-3.44L50.45,51.28z"}),o.jsxs("linearGradient",{id:"95yY7w43Oj6n2vH63j6HJe",x1:"46",x2:"46",y1:"3.638",y2:"35.593",gradientTransform:"matrix(1 0 0 -1 0 66)",gradientUnits:"userSpaceOnUse",children:[o.jsx("stop",{offset:"0",stopColor:"#155cde"}),o.jsx("stop",{offset:".278",stopColor:"#1f7fe5"}),o.jsx("stop",{offset:".569",stopColor:"#279ceb"}),o.jsx("stop",{offset:".82",stopColor:"#2cafef"}),o.jsx("stop",{offset:"1",stopColor:"#2eb5f0"})]}),o.jsx("path",{fill:"url(#95yY7w43Oj6n2vH63j6HJe)",d:`M59,31.97c0.01,7.73-3.26,14.58-8.55,19.31l-7.62-6.72c2.1-1.61,3.77-3.71,4.84-6.15
        c0.29-0.66-0.2-1.41-0.92-1.41H37c-2.21,0-4-1.79-4-4v-2c0-2.21,1.79-4,4-4h17C56.75,27,59,29.22,59,31.97z`})]})}),wd=e=>o.jsx("svg",{width:32,height:32,viewBox:"0 0 56 56",style:{transform:"scale(2.8)"},version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("g",{stroke:e==="light"?"#424245":"white",strokeWidth:"0.5",fillRule:"evenodd",children:o.jsx("path",{d:"M28.2226562,20.3846154 C29.0546875,20.3846154 30.0976562,19.8048315 30.71875,19.0317864 C31.28125,18.3312142 31.6914062,17.352829 31.6914062,16.3744437 C31.6914062,16.2415766 31.6796875,16.1087095 31.65625,16 C30.7304687,16.0362365 29.6171875,16.640178 28.9492187,17.4494596 C28.421875,18.06548 27.9414062,19.0317864 27.9414062,20.0222505 C27.9414062,20.1671964 27.9648438,20.3121424 27.9765625,20.3604577 C28.0351562,20.3725366 28.1289062,20.3846154 28.2226562,20.3846154 Z M25.2929688,35 C26.4296875,35 26.9335938,34.214876 28.3515625,34.214876 C29.7929688,34.214876 30.109375,34.9758423 31.375,34.9758423 C32.6171875,34.9758423 33.4492188,33.792117 34.234375,32.6325493 C35.1132812,31.3038779 35.4765625,29.9993643 35.5,29.9389701 C35.4179688,29.9148125 33.0390625,28.9122695 33.0390625,26.0979021 C33.0390625,23.6579784 34.9140625,22.5588048 35.0195312,22.474253 C33.7773438,20.6382708 31.890625,20.5899555 31.375,20.5899555 C29.9804688,20.5899555 28.84375,21.4596313 28.1289062,21.4596313 C27.3554688,21.4596313 26.3359375,20.6382708 25.1289062,20.6382708 C22.8320312,20.6382708 20.5,22.5950413 20.5,26.2911634 C20.5,28.5861411 21.3671875,31.013986 22.4335938,32.5842339 C23.3476562,33.9129053 24.1445312,35 25.2929688,35 Z",fill:e==="light"?"#424245":"white",fillRule:"nonzero"})})}),vd=e=>o.jsx("svg",{fill:e==="light"?"#1c1e21":"white",role:"img",viewBox:"0 0 24 24",width:28,height:28,xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})}),Cd=e=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:28,viewBox:"0 0 90 90",children:o.jsx("g",{children:o.jsx("path",{d:"M90,15.001C90,7.119,82.884,0,75,0H15C7.116,0,0,7.119,0,15.001v59.998   C0,82.881,7.116,90,15.001,90H45V56H34V41h11v-5.844C45,25.077,52.568,16,61.875,16H74v15H61.875C60.548,31,59,32.611,59,35.024V41   h15v15H59v34h16c7.884,0,15-7.119,15-15.001V15.001z",fill:e==="light"?"#39569c":"white"})})}),Bd=e=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:28,viewBox:"0 0 480 480",children:o.jsx("g",{children:o.jsx("path",{d:"M0.176,224L0.001,67.963l192-26.072V224H0.176z M224.001,37.241L479.937,0v224H224.001V37.241z M479.999,256l-0.062,224   l-255.936-36.008V256H479.999z M192.001,439.918L0.157,413.621L0.147,256h191.854V439.918z",fill:e==="light"?"#00a2ed":"white"})})}),xd=e=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:28,viewBox:"0 0 24 24",children:o.jsx("path",{fill:e==="light"?"#00acee":"white",d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})}),os="recaptcha-container";function Ed(){return d.useEffect(()=>{if(!window||window?.recaptchaVerifier)return;const e=Z.getAuth();window.recaptchaVerifier=new Z.RecaptchaVerifier(os,{size:"invisible"},e)},[]),null}function rs({allowSkipLogin:e,logo:r,signInOptions:t,firebaseApp:i,authController:s,noUserComponent:n,disableSignupScreen:l=!1,disabled:c=!1,additionalComponent:A,notAllowedError:u}){const f=Go(),[g,y]=d.useState(!1),[w,h]=d.useState(!1),p=t.map(x=>typeof x=="object"?x.provider:x),v=d.useCallback(()=>{const x=Z.getAuth(),k=new Z.RecaptchaVerifier("recaptcha",{size:"invisible"},x),S=Z.getMultiFactorResolver(x,s.authProviderError);if(S.hints[0].factorId===Z.PhoneMultiFactorGenerator.FACTOR_ID){const m={multiFactorHint:S.hints[0],session:S.session};new Z.PhoneAuthProvider(x).verifyPhoneNumber(m,k).then(function(D){const P=String(window.prompt("Please enter the verification code that was sent to your mobile device.")),T=Z.PhoneAuthProvider.credential(D,P),Q=Z.PhoneMultiFactorGenerator.assertion(T);return S.resolveSignIn(Q)})}else console.warn("Unsupported second factor.")},[s.authProviderError]);function B(){let x;if(s.user!=null)return x;const k=["auth/popup-closed-by-user","auth/cancelled-popup-request"];return s.authProviderError&&(s.authProviderError.code==="auth/operation-not-allowed"||s.authProviderError.code==="auth/configuration-not-found"?x=o.jsxs("div",{children:[o.jsx(a.Box,{p:1,children:o.jsx(fe,{error:"You need to enable Firebase auth and the corresponding login provider in your Firebase project"})}),i&&o.jsx(a.Box,{p:1,children:o.jsx("a",{href:`https://console.firebase.google.com/project/${i.options.projectId}/authentication/providers`,rel:"noopener noreferrer",target:"_blank",children:o.jsx(a.Button,{variant:"text",color:"primary",children:"Open Firebase configuration"})})})]}):k.includes(s.authProviderError.code)||(s.authProviderError.code==="auth/multi-factor-auth-required"&&v(),x=o.jsx(a.Box,{p:1,children:o.jsx(fe,{error:s.authProviderError})}))),x}let C;r?C=o.jsx("img",{src:r,style:{height:"100%",width:"100%",objectFit:"cover"},alt:"Logo"}):C=o.jsx(Bt,{});let E;return u&&(typeof u=="string"?E=u:u instanceof Error?E=u.message:E="It looks like you don't have access to the CMS, based on the specified Authenticator configuration"),o.jsx(a.Fade,{in:!0,timeout:800,mountOnEnter:!0,unmountOnExit:!0,children:o.jsxs(a.Box,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",p:2},children:[o.jsx("div",{id:"recaptcha"}),o.jsxs(a.Box,{sx:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",maxWidth:380},children:[o.jsx(a.Box,{m:1,sx:{padding:1,width:260,height:260},children:C}),E&&o.jsx(a.Box,{p:2,children:o.jsx(fe,{error:E})}),B(),!g&&!w&&o.jsxs(o.Fragment,{children:[ts(s,p,f.mode,c),p.includes("password")&&o.jsx(De,{disabled:c,text:"Email/password",icon:o.jsx(Ot,{fontSize:"large"}),onClick:()=>y(!0)}),p.includes("phone")&&o.jsx(De,{disabled:c,text:"Phone number",icon:o.jsx(ve.Phone,{fontSize:"large"}),onClick:()=>h(!0)}),p.includes("anonymous")&&o.jsx(De,{disabled:c,text:"Log in anonymously",icon:o.jsx(Vs,{fontSize:"large"}),onClick:s.anonymousLogin}),e&&o.jsx(a.Box,{m:1,children:o.jsx(a.Button,{disabled:c,onClick:s.skipLogin,children:"Skip login"})})]}),g&&o.jsx(kd,{authController:s,onClose:()=>y(!1),mode:f.mode,noUserComponent:n,disableSignupScreen:l}),w&&o.jsx(md,{authController:s,onClose:()=>h(!1)}),!g&&!w&&A]})]})})}function De({icon:e,onClick:r,text:t,disabled:i}){return o.jsx(a.Box,{m:.5,width:"100%",children:o.jsx(a.Button,{fullWidth:!0,variant:"outlined",disabled:i,onClick:r,children:o.jsxs(a.Box,{sx:{p:"1",display:"flex",width:"240px",height:"32px",alignItems:"center",justifyItems:"center"},children:[o.jsx(a.Box,{sx:{display:"flex",flexDirection:"column",width:"32px",alignItems:"center",justifyItems:"center"},children:e}),o.jsx(a.Box,{sx:{flexGrow:1,pl:2,textAlign:"center"},children:t})]})})})}function md({onClose:e,authController:r}){Ed();const[t,i]=d.useState(),[s,n]=d.useState(),[l,c]=d.useState(!1),A=async u=>{u.preventDefault(),s&&r.confirmationResult?(c(!1),r.confirmationResult.confirm(s).catch(f=>{f.code==="auth/invalid-verification-code"&&c(!0)})):t&&r.phoneLogin(t,window.recaptchaVerifier)};return o.jsxs("form",{onSubmit:A,children:[l&&o.jsx(a.Box,{p:2,children:o.jsx(fe,{error:"Invalid confirmation code"})}),o.jsx("div",{id:os}),o.jsxs(a.Grid,{container:!0,spacing:1,children:[o.jsx(a.Grid,{item:!0,xs:12,children:o.jsx(a.IconButton,{onClick:e,children:o.jsx(hr,{sx:{width:20,height:20}})})}),o.jsx(a.Grid,{item:!0,xs:12,sx:{p:1,display:"flex"},children:o.jsx(a.Typography,{align:"center",variant:"subtitle2",children:"Please enter your phone number"})}),o.jsx(a.Grid,{item:!0,xs:12,children:o.jsx(a.TextField,{placeholder:"",fullWidth:!0,value:t,disabled:Boolean(t&&(r.authLoading||r.confirmationResult)),type:"phone",required:!0,onChange:u=>i(u.target.value)})}),Boolean(t&&r.confirmationResult)&&o.jsxs(o.Fragment,{children:[o.jsx(a.Grid,{item:!0,xs:12,sx:{mt:2,p:1,display:"flex"},children:o.jsx(a.Typography,{align:"center",variant:"subtitle2",children:"Please enter the confirmation code"})}),o.jsx(a.Grid,{item:!0,xs:12,children:o.jsx(a.TextField,{placeholder:"",fullWidth:!0,value:s,type:"text",required:!0,onChange:u=>n(u.target.value)})})]}),o.jsx(a.Grid,{item:!0,xs:12,children:o.jsxs(a.Box,{sx:{display:"flex",justifyContent:"end",alignItems:"center",width:"100%"},children:[r.authLoading&&o.jsx(a.CircularProgress,{sx:{p:1},size:16,thickness:8}),o.jsx(a.Button,{type:"submit",children:"Ok"})]})})]})]})}function kd({onClose:e,authController:r,mode:t,noUserComponent:i,disableSignupScreen:s}){const n=d.useRef(null),[l,c]=d.useState(),[A,u]=d.useState(),[f,g]=d.useState(),y=A===void 0,w=A&&A.includes("password"),h=A&&!A.includes("password")&&A.length>0,p=A&&!A.includes("password");d.useEffect(()=>{(w||p)&&n.current&&n.current.focus()},[w,p]),d.useEffect(()=>{if(!document)return;const m=I=>{I.keyCode===27&&e()};return document.addEventListener("keydown",m,!1),()=>{document.removeEventListener("keydown",m,!1)}},[e]);function v(){l&&r.fetchSignInMethodsForEmail(l).then(m=>{u(m)})}function B(){l&&f&&r.emailPasswordLogin(l,f)}function C(){l&&f&&r.createUserWithEmailAndPassword(l,f)}const E=()=>{y?e():u(void 0)},x=m=>{m.preventDefault(),y?v():w?B():p&&C()},k=p?"No user found with that email. Pick a password to create a new account":w?"Please enter your password":"Please enter your email",S=p?"Create account":w?"Login":"Ok";return h?o.jsxs(a.Grid,{container:!0,spacing:1,children:[o.jsx(a.Grid,{item:!0,xs:12,children:o.jsx(a.IconButton,{onClick:E,children:o.jsx(hr,{sx:{width:20,height:20}})})}),o.jsxs(a.Grid,{item:!0,xs:12,sx:{p:1},children:[o.jsx(a.Typography,{align:"center",variant:"subtitle2",children:"You already have an account"}),o.jsxs(a.Typography,{align:"center",variant:"body2",children:["You can use one of these methods to login with ",l]})]}),o.jsx(a.Grid,{item:!0,xs:12,children:A&&ts(r,A,t,!1)})]}):o.jsx(a.Slide,{direction:"up",in:!0,mountOnEnter:!0,unmountOnExit:!0,children:o.jsx("form",{onSubmit:x,children:o.jsxs(a.Grid,{container:!0,spacing:1,children:[o.jsx(a.Grid,{item:!0,xs:12,children:o.jsx(a.IconButton,{onClick:E,children:o.jsx(hr,{sx:{width:20,height:20}})})}),o.jsx(a.Grid,{item:!0,xs:12,sx:{p:1,display:p&&s?"none":"flex"},children:o.jsx(a.Typography,{align:"center",variant:"subtitle2",children:k})}),o.jsx(a.Grid,{item:!0,xs:12,sx:{display:y?"inherit":"none"},children:o.jsx(a.TextField,{placeholder:"Email",fullWidth:!0,autoFocus:!0,value:l??"",disabled:r.authLoading,type:"email",onChange:m=>c(m.target.value)})}),o.jsx(a.Grid,{item:!0,xs:12,children:p&&i}),o.jsx(a.Grid,{item:!0,xs:12,sx:{display:w||p&&!s?"inherit":"none"},children:o.jsx(a.TextField,{placeholder:"Password",fullWidth:!0,value:f??"",disabled:r.authLoading,inputRef:n,type:"password",onChange:m=>g(m.target.value)})}),o.jsx(a.Grid,{item:!0,xs:12,children:o.jsxs(a.Box,{sx:{display:p&&s?"none":"flex",justifyContent:"end",alignItems:"center",width:"100%"},children:[r.authLoading&&o.jsx(a.CircularProgress,{sx:{p:1},size:16,thickness:8}),o.jsx(a.Button,{type:"submit",children:S})]})})]})})})}function ts(e,r,t,i){return o.jsxs(o.Fragment,{children:[r.includes("google.com")&&o.jsx(De,{disabled:i,text:"Sign in with Google",icon:yd(),onClick:e.googleLogin}),r.includes("microsoft.com")&&o.jsx(De,{disabled:i,text:"Sign in with Microsoft",icon:Bd(t),onClick:e.microsoftLogin}),r.includes("apple.com")&&o.jsx(De,{disabled:i,text:"Sign in with Apple",icon:wd(t),onClick:e.appleLogin}),r.includes("github.com")&&o.jsx(De,{disabled:i,text:"Sign in with Github",icon:vd(t),onClick:e.githubLogin}),r.includes("facebook.com")&&o.jsx(De,{disabled:i,text:"Sign in with Facebook",icon:Cd(t),onClick:e.facebookLogin}),r.includes("twitter.com")&&o.jsx(De,{disabled:i,text:"Sign in with Twitter",icon:xd(t),onClick:e.twitterLogin})]})}const ns=[Z.GoogleAuthProvider.PROVIDER_ID];function Sd({name:e,logo:r,logoDark:t,toolbarExtraWidget:i,authentication:s,collectionOverrideHandler:n,collections:l,views:c,textSearchController:A,allowSkipLogin:u,signInOptions:f=ns,firebaseConfig:g,onFirebaseInit:y,primaryColor:w,secondaryColor:h,fontFamily:p,dateTimeFormat:v,locale:B,HomePage:C,basePath:E,baseCollectionPath:x,LoginView:k,onAnalyticsEvent:S,fields:m}){hn(e,r);const{firebaseApp:I,firebaseConfigLoading:D,configError:P}=es({onFirebaseInit:y,firebaseConfig:g}),T=qi({firebaseApp:I,signInOptions:f}),Q=_i(),$=Zi({firebaseApp:I,textSearchController:A,fields:m}),q=Ki({firebaseApp:I}),{authLoading:Y,canAccessMainView:V,notAllowedError:G}=Ri({authController:T,authentication:s,dataSource:$,storageSource:q}),F=ji(),L=d.useMemo(()=>Ui({mode:F.mode,primaryColor:w,secondaryColor:h,fontFamily:p}),[p,F.mode,w,h]);return P?o.jsx(ir,{fullScreen:!0,children:P}):D||!I?o.jsxs(o.Fragment,{children:[o.jsx(a.CssBaseline,{}),o.jsx(qe,{})]}):o.jsx(de.BrowserRouter,{basename:E,children:o.jsx(Ji,{children:o.jsx(Rt,{value:F,children:o.jsx(Oi,{collections:l,views:c,authController:T,userConfigPersistence:Q,collectionOverrideHandler:n,dateTimeFormat:v,dataSource:$,storageSource:q,entityLinkBuilder:({entity:W})=>`https://console.firebase.google.com/project/${I.options.projectId}/firestore/data/${W.path}/${W.id}`,locale:B,basePath:E,baseCollectionPath:x,onAnalyticsEvent:S,fields:m,children:({context:W,loading:z})=>{let ee;if(z||Y)ee=o.jsx(qe,{});else{const j=F.mode==="dark"&&t?t:r;if(V)ee=o.jsxs(Vi,{name:e,logo:j,toolbarExtraWidget:i,children:[o.jsx(Ni,{HomePage:C}),o.jsx(Si,{})]});else{const H=k??rs;ee=o.jsx(H,{logo:j,allowSkipLogin:u,signInOptions:f??ns,firebaseApp:I,authController:T,notAllowedError:G})}}return o.jsxs(a.ThemeProvider,{theme:L,children:[o.jsx(a.CssBaseline,{}),ee]})}})})})})}function Id(e,r){return console.debug("Performing Algolia query",e,r),e.search(r).then(({hits:t})=>t.map(i=>i.objectID)).catch(t=>(console.log(t),[]))}b.ArrayContainer=qo,b.ArrayEnumPreview=Wo,b.ArrayEnumSelectBinding=_r,b.ArrayOfMapsPreview=vn,b.ArrayOfReferencesFieldBinding=Wn,b.ArrayOfReferencesPreview=En,b.ArrayOfStorageComponentsPreview=xn,b.ArrayOfStringsPreview=wn,b.ArrayOneOfPreview=kn,b.ArrayPropertyEnumPreview=Ir,b.ArrayPropertyPreview=Fr,b.AsyncPreviewComponent=Yl,b.BlockFieldBinding=oi,b.BooleanPreview=Mn,b.BreadcrumbUpdater=Nc,b.COLLECTION_PATH_SEPARATOR=$n,b.CenteredView=ir,b.CircularProgressCenter=qe,b.ColorChip=mr,b.CustomDialogActions=We,b.DEFAULT_FIELD_CONFIGS=li,b.DatePreview=Sn,b.DateTimeFieldBinding=Xn,b.DebouncedTextField=ta,b.DeleteConfirmationDialog=Hc,b.Drawer=Yi,b.DrawerNavigationItem=Et,b.EmptyValue=no,b.EntityCollectionTable=ht,b.EntityCollectionView=yt,b.EntityForm=si,b.EntityPreview=ct,b.EntityReference=Ye,b.EnumValuesChip=me,b.ErrorBoundary=oe,b.ErrorView=fe,b.ExpandablePanel=uo,b.FieldDescription=ye,b.FilledMenuItem=vi,b.FilledSelect=wi,b.FireCMS=Oi,b.FireCMSContextInstance=vr,b.FireCMSHomePage=Li,b.FireCMSLogo=Bt,b.FirebaseCMSApp=Sd,b.FirebaseLoginView=rs,b.GeoPoint=yo,b.ImagePreview=In,b.LabelWithIcon=we,b.LoginButton=De,b.MapFieldBinding=Rn,b.MapPropertyPreview=mn,b.Markdown=Ho,b.MarkdownFieldBinding=ri,b.ModeControllerProvider=Rt,b.NavigationCollectionCard=Qi,b.NavigationGroup=Ct,b.NavigationRoutes=Ni,b.NotFoundPage=Gi,b.NumberPropertyPreview=Cn,b.PropertyFieldBinding=Je,b.PropertyPreview=be,b.ReadOnlyFieldBinding=Xr,b.ReferenceFieldBinding=Kn,b.ReferencePreview=io,b.ReferenceSelectionView=Pi,b.RepeatFieldBinding=ei,b.RouteWrapper=lr,b.Scaffold=Vi,b.SelectFieldBinding=jr,b.SideDialogs=Si,b.SkeletonPropertyComponent=je,b.SnackbarProvider=Ji,b.StorageThumbnail=Fn,b.StorageThumbnailInternal=Dn,b.StorageUploadFieldBinding=Zr,b.StringPropertyPreview=kr,b.SwitchControl=na,b.SwitchFieldBinding=Zn,b.TextFieldBinding=Ao,b.UrlComponentPreview=No,b.VirtualTable=yi,b.addInitialSlash=wl,b.buildAdditionalFieldDelegate=gd,b.buildCollection=ld,b.buildEntityCallbacks=fd,b.buildEnumValueConfig=ud,b.buildEnumValues=Ad,b.buildFieldConfig=hd,b.buildProperties=cd,b.buildPropertiesOrBuilder=dd,b.buildProperty=ad,b.canCreateEntity=er,b.canDeleteEntity=it,b.canEditEntity=nt,b.cmsToFirestoreModel=ko,b.collectionIconKeys=lt,b.createCMSDefaultTheme=Ui,b.deleteEntityWithCallbacks=un,b.firestoreToCMSModel=Ze,b.fullPathToCollectionSegments=Le,b.getBadgeForWidget=Pa,b.getCollectionByPathOrAlias=Do,b.getCollectionPathsCombinations=yr,b.getColorForProperty=Qa,b.getDefaultValuesFor=Co,b.getFieldConfig=Zo,b.getFieldId=ai,b.getFirstAdditionalView=zr,b.getHashValue=Gr,b.getIcon=st,b.getIconForProperty=Xo,b.getIconForView=or,b.getIdIcon=di,b.getLastSegment=vl,b.getPropertyInPath=rt,b.getReferenceFrom=Bo,b.getReferencePreviewKeys=at,b.getResolvedPropertyInPath=tt,b.getValueInPath=_e,b.hydrateRegExp=Yn,b.isEmptyObject=Or,b.isHidden=_o,b.isObject=jo,b.isPropertyBuilder=Qe,b.isReadOnly=so,b.isReferenceProperty=ci,b.isValidRegExp=ra,b.joinCollectionLists=ql,b.mergeCollections=Vr,b.mergeDeep=Fe,b.performAlgoliaTextSearch=Id,b.pick=Qn,b.plural=La,b.randomColor=ea,b.randomString=lo,b.removeFunctions=Lr,b.removeInPath=_l,b.removeInitialAndTrailingSlashes=ge,b.removeInitialSlash=en,b.removeTrailingSlash=on,b.removeUndefined=$r,b.renderSkeletonCaptionText=Ol,b.renderSkeletonIcon=Qr,b.renderSkeletonImageThumbnail=Pr,b.renderSkeletonText=Ie,b.resolveArrayProperty=Ve,b.resolveCollection=pe,b.resolveCollectionPathAliases=br,b.resolveEnumValues=Eo,b.resolveNavigationFrom=fn,b.resolvePermissions=Ro,b.resolveProperties=Kr,b.resolveProperty=ke,b.resolvePropertyEnum=Rr,b.sanitizeData=Gn,b.saveEntityWithCallbacks=Br,b.segmentsToStrippedPath=On,b.serializeRegExp=oa,b.singular=Ga,b.sortProperties=Wr,b.stripCollectionPath=Ur,b.toKebabCase=Xl,b.toSnakeCase=Rl,b.traverseValueProperty=Jo,b.traverseValuesProperties=Yr,b.updateDateAutoValues=Ln,b.useAuthController=Ue,b.useBreadcrumbsContext=$o,b.useBrowserTitleAndIcon=hn,b.useBuildLocalConfigurationPersistence=_i,b.useBuildModeController=ji,b.useClearRestoreValue=xe,b.useClipboard=gn,b.useCollectionFetch=An,b.useDataSource=Ee,b.useDebounce=Nr,b.useEntityFetch=Lo,b.useFireCMSContext=R,b.useFirebaseAuthController=qi,b.useFirebaseStorageSource=Ki,b.useFirestoreDataSource=Zi,b.useInitialiseFirebase=es,b.useModeController=Go,b.useNavigationContext=he,b.useReferenceDialog=Oo,b.useResolvedNavigationFrom=Cl,b.useSelectionController=wt,b.useSideDialogContext=nr,b.useSideEntityController=Oe,b.useSnackbarController=Pe,b.useStorageSource=ro,b.useValidateAuthenticator=Ri,Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.js.map
